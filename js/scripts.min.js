function showEventsPerMonth(e, t, i) {
    e -= 1;
    var a = new Date(t, e, i);
    if (e = a.getMonth() + 1, t = a.getFullYear(), i = a.getDate(), itemEvents.hasOwnProperty(t) || (itemEvents[t] = new Object), !itemEvents[t].hasOwnProperty(e) || firstLoad) $.ajax({
        type: "POST",
        url: baseurl + "json/calendar.json",
        data: firstLoad ? null : {
            month: e,
            year: t
        },
        cache: !1,
        async: !0,
        dataType: "json",
        success: function(a) {
            loadEvents(a, t), showEvents(t, e, i), firstLoad = !1
        }
    });
    else {
        var n = showEvents(t, e, i),
            r = !1,
            s = new Date(t, e - 1, i),
            o = new Date(s.getFullYear(), s.getMonth() + 1, 1),
            l = o.getFullYear(),
            d = o.getMonth() + 1,
            c = new Date(s.getFullYear(), s.getMonth() - 1, 1),
            u = c.getFullYear(),
            h = c.getMonth() + 1;
        itemEvents.hasOwnProperty(u) || (itemEvents[u] = new Object, t = u), itemEvents[u].hasOwnProperty(h) || (e = h, r = !0), itemEvents.hasOwnProperty(l) || (itemEvents[l] = new Object, t = l), itemEvents[l].hasOwnProperty(d) || (e = d, r = !0), r && $.ajax({
            type: "POST",
            url: baseurl + "json/calendar.json",
            data: {
                month: e,
                year: t
            },
            cache: !1,
            async: !0,
            dataType: "json",
            success: function(i) {
                loadEvents(i, t), MAX_EVENTS > n && showEvents(t, e - 1, 1)
            }
        })
    }
}

function loadEvents(e, t) {
    e.status && $.each(e.calendar, function(i, a) {
        $.each(a, function(i, a) {
            itemEvents[t][i] = new Object, $.each(a, function(a, n) {
                "object" == typeof n && (itemEvents[t][i].hasOwnProperty(a) || (itemEvents[t][i][a] = new Object), $.each(n, function(n, r) {
                    e.events[r] && (itemEvents[t][i][a][r] || (itemEvents[t][i][a][r] = e.events[r]))
                }))
            })
        })
    })
}

function showEvents(e, t, i) {
    $("#tinyevents").empty();
    for (var a = 0, n = 0; MAX_EVENTS > a && 100 > n;) {
        var r = new Date(e, t - 1, i);
        if (d = r.getDate(), m = r.getMonth() + 1, y = r.getFullYear(), itemEvents[y] && itemEvents[y][m] && itemEvents[y][m][d]) {
            var s = "",
                o = "";
            $.each(itemEvents[y][m][d], function(e, t) {
                a++, a > MAX_EVENTS || (o = "", t.starred && (o = "starred"), s = '<dl id="tc_event_' + a + '" class="' + o + '"><dt><a href="' + t.event_link + '">' + lzero(m) + "/" + lzero(d) + "/" + y + '</a></dt><dd><h4><a href="' + t.event_link + '">' + t.title + '</a></h4><p class="descr">' + t.introtext + ' <a class="more" href="' + t.event_link + '">Read more.</a></p></dd></dl>', $("#tinyevents").append(s))
            })
        }
        i += 1, n++
    }
    return a
}

function shEvent(e) {
    return $("#tc_event_" + e).toggleClass("show"), $("#tc_event_" + e + " .descr").slideToggle("fast"), !1
}

function lzero(e) {
    return e += "", 1 == e.length ? "0" + e : e
}

function printCalendar() {
    window.print()
}

function inputPlaceholder(e) {
    if (e.attr("placeholder") && "" != e.attr("placeholder") && !$.support.placeholder) {
        var t = e.attr("placeholder"),
            i = $('<label for="' + e.attr("id") + '" class="placeholder"></label>').text(t);
        e.after(i), e.click(function() {
            $('label[for="' + e.attr("id") + '"]').addClass("blur"), "booking-dates" == $(this).attr("id") && i.hide()
        }).blur(function() {
            $('label[for="' + e.attr("id") + '"]').removeClass("blur")
        }), e.click(function() {
            $(this).addClass("blur")
        }).blur(function() {
            $(this).removeClass("blur")
        }), e.on("input keyup mouseup", function(t) {
            "" == e.val() ? i.show() : i.hide()
        })
    }
}

function iOS() {
    var e = navigator.userAgent;
    return e.match(/iPad/i) || e.match(/iPod/i) || e.match(/iPhone/i)
}

function initGallery(e) {
    var t = $.extend({
            data: null,
            id: null,
            categories: !1,
            startingImage: 0
        }, e),
        i = $("html"),
        a = $("<div />", {
            id: "hebs-gallery"
        }),
        n = $("<div />", {
            "class": "galleria"
        }),
        r = $("<a />", {
            "class": "close-button"
        }),
        s = t.data[t.id].images,
        o = $("<select />", {
            "class": "category-selector"
        });
    return t.data && t.id ? (i.addClass("selection-disabled"), $("body").append(a.append(n).append(r)), 1 == t.categories && ($.each(t.data, function(e, t) {
        o.append($("<option />", {
            value: e,
            text: t.name
        }))
    }), $("option", o).length > 1 && (o.val(t.id), o.appendTo(a), o.sSelect()), 1 == s.length && a.addClass("no-controls")), a.fadeIn(200, function() {
        o.resetSS(), Galleria.run("#hebs-gallery .galleria", {
            dataSource: s,
            show: t.startingImage
        })
    }), void Galleria.ready(function() {
        var e = this;
        r.click(function() {
            e.pause(), a.fadeOut(200, function() {
                e.destroy(), $(this).remove(), i.removeClass("selection-disabled")
            })
        }), 1 == t.categories && o.change(function() {
            var i = t.data[$(this).val()].images;
            1 == i.length ? a.addClass("no-controls") : a.removeClass("no-controls"), e.load(i)
        })
    })) : !1
}

function initGoogleMap(e) {
    var t = new google.maps.LatLng(e.lat, e.lng),
        i = '<div class="map-content"><h4>' + e.name + "</h4><p>" + e.adr + "<br>Phone: " + e.phone + '</p><p><a href="http://maps.google.com/maps?f=d&geocode=&daddr=' + e.lat + "," + e.lng + '&z=15" target="_blank">Get directions</a></p></div>',
        a = {
            zoom: 16,
            center: t,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            scrollwheel: !1
        },
        n = new google.maps.Map(document.getElementById("map-canvas"), a),
        r = new google.maps.MarkerImage(templateURL + "/images/pin.png", null, null, null, new google.maps.Size(42, 72)),
        s = new google.maps.Marker({
            position: t,
            map: n,
            icon: r
        }),
        o = new google.maps.InfoWindow;
    o.setContent(i), o.open(n, s), google.maps.event.addListener(s, "click", function() {
        o.open(n, s)
    })
}! function(e, t) {
    function i(e, t) {
        var i = e.createElement("p"),
            a = e.getElementsByTagName("head")[0] || e.documentElement;
        return i.innerHTML = "x<style>" + t + "</style>", a.insertBefore(i.lastChild, a.firstChild)
    }

    function a() {
        var e = y.elements;
        return "string" == typeof e ? e.split(" ") : e
    }

    function n(e) {
        var t = m[e[g]];
        return t || (t = {}, f++, e[g] = f, m[f] = t), t
    }

    function r(e, i, a) {
        return i || (i = t), v ? i.createElement(e) : (a || (a = n(i)), i = a.cache[e] ? a.cache[e].cloneNode() : h.test(e) ? (a.cache[e] = a.createElem(e)).cloneNode() : a.createElem(e), i.canHaveChildren && !u.test(e) ? a.frag.appendChild(i) : i)
    }

    function s(e, t) {
        t.cache || (t.cache = {}, t.createElem = e.createElement, t.createFrag = e.createDocumentFragment, t.frag = t.createFrag()), e.createElement = function(i) {
            return y.shivMethods ? r(i, e, t) : t.createElem(i)
        }, e.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + a().join().replace(/\w+/g, function(e) {
            return t.createElem(e), t.frag.createElement(e), 'c("' + e + '")'
        }) + ");return n}")(y, t.frag)
    }

    function o(e) {
        e || (e = t);
        var a = n(e);
        return !y.shivCSS || p || a.hasCSS || (a.hasCSS = !!i(e, "article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")), v || s(e, a), e
    }

    function l(e) {
        for (var t, i = e.attributes, a = i.length, n = e.ownerDocument.createElement(_ + ":" + e.nodeName); a--;) t = i[a], t.specified && n.setAttribute(t.nodeName, t.nodeValue);
        return n.style.cssText = e.style.cssText, n
    }

    function d(e) {
        function t() {
            clearTimeout(o._removeSheetTimer), r && r.removeNode(!0), r = null
        }
        var r, s, o = n(e),
            d = e.namespaces,
            c = e.parentWindow;
        return !x || e.printShived ? e : ("undefined" == typeof d[_] && d.add(_), c.attachEvent("onbeforeprint", function() {
            t();
            var n, o, d;
            d = e.styleSheets;
            for (var c = [], u = d.length, h = Array(u); u--;) h[u] = d[u];
            for (; d = h.pop();)
                if (!d.disabled && b.test(d.media)) {
                    try {
                        n = d.imports, o = n.length
                    } catch (p) {
                        o = 0
                    }
                    for (u = 0; o > u; u++) h.push(n[u]);
                    try {
                        c.push(d.cssText)
                    } catch (g) {}
                }
            for (n = c.reverse().join("").split("{"), o = n.length, u = RegExp("(^|[\\s,>+~])(" + a().join("|") + ")(?=[[\\s,>+~#.:]|$)", "gi"), h = "$1" + _ + "\\:$2"; o--;) c = n[o] = n[o].split("}"), c[c.length - 1] = c[c.length - 1].replace(u, h), n[o] = c.join("}");
            for (c = n.join("{"), o = e.getElementsByTagName("*"), u = o.length, h = RegExp("^(?:" + a().join("|") + ")$", "i"), d = []; u--;) n = o[u], h.test(n.nodeName) && d.push(n.applyElement(l(n)));
            s = d, r = i(e, c)
        }), c.attachEvent("onafterprint", function() {
            for (var e = s, i = e.length; i--;) e[i].removeNode();
            clearTimeout(o._removeSheetTimer), o._removeSheetTimer = setTimeout(t, 500)
        }), e.printShived = !0, e)
    }
    var c = e.html5 || {},
        u = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
        h = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
        p, g = "_html5shiv",
        f = 0,
        m = {},
        v;
    ! function() {
        try {
            var e = t.createElement("a");
            e.innerHTML = "<xyz></xyz>", p = "hidden" in e;
            var i;
            if (!(i = 1 == e.childNodes.length)) {
                t.createElement("a");
                var a = t.createDocumentFragment();
                i = "undefined" == typeof a.cloneNode || "undefined" == typeof a.createDocumentFragment || "undefined" == typeof a.createElement
            }
            v = i
        } catch (n) {
            v = p = !0
        }
    }();
    var y = {
        elements: c.elements || "abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",
        shivCSS: !1 !== c.shivCSS,
        supportsUnknownElements: v,
        shivMethods: !1 !== c.shivMethods,
        type: "default",
        shivDocument: o,
        createElement: r,
        createDocumentFragment: function(e, i) {
            if (e || (e = t), v) return e.createDocumentFragment();
            for (var i = i || n(e), r = i.frag.cloneNode(), s = 0, o = a(), l = o.length; l > s; s++) r.createElement(o[s]);
            return r
        }
    };
    e.html5 = y, o(t);
    var b = /^$|\b(?:all|print)\b/,
        _ = "html5shiv",
        x = !v && function() {
            var i = t.documentElement;
            return !("undefined" == typeof t.namespaces || "undefined" == typeof t.parentWindow || "undefined" == typeof i.applyElement || "undefined" == typeof i.removeNode || "undefined" == typeof e.attachEvent)
        }();
    y.type += " print", y.shivPrint = d, d(t)
}(this, document),
function(e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery)
}(function(e) {
    function t(t, a) {
        var n, r, s, o = t.nodeName.toLowerCase();
        return "area" === o ? (n = t.parentNode, r = n.name, t.href && r && "map" === n.nodeName.toLowerCase() ? (s = e("img[usemap='#" + r + "']")[0], !!s && i(s)) : !1) : (/input|select|textarea|button|object/.test(o) ? !t.disabled : "a" === o ? t.href || a : a) && i(t)
    }

    function i(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
            return "hidden" === e.css(this, "visibility")
        }).length
    }

    function a(e) {
        for (var t, i; e.length && e[0] !== document;) {
            if (t = e.css("position"), ("absolute" === t || "relative" === t || "fixed" === t) && (i = parseInt(e.css("zIndex"), 10), !isNaN(i) && 0 !== i)) return i;
            e = e.parent()
        }
        return 0
    }

    function n() {
        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        }, this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        }, e.extend(this._defaults, this.regional[""]), this.regional.en = e.extend(!0, {}, this.regional[""]), this.regional["en-US"] = e.extend(!0, {}, this.regional.en), this.dpDiv = r(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }

    function r(t) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(i, "mouseout", function() {
            e(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).removeClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).removeClass("ui-datepicker-next-hover")
        }).delegate(i, "mouseover", s)
    }

    function s() {
        e.datepicker._isDisabledDatepicker(l.inline ? l.dpDiv.parent()[0] : l.input[0]) || (e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), e(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).addClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).addClass("ui-datepicker-next-hover"))
    }

    function o(t, i) {
        e.extend(t, i);
        for (var a in i) null == i[a] && (t[a] = i[a]);
        return t
    }
    e.ui = e.ui || {}, e.extend(e.ui, {
        version: "1.11.1",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), e.fn.extend({
        scrollParent: function(t) {
            var i = this.css("position"),
                a = "absolute" === i,
                n = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                r = this.parents().filter(function() {
                    var t = e(this);
                    return a && "static" === t.css("position") ? !1 : n.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"))
                }).eq(0);
            return "fixed" !== i && r.length ? r : e(this[0].ownerDocument || document)
        },
        uniqueId: function() {
            var e = 0;
            return function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++e)
                })
            }
        }(),
        removeUniqueId: function() {
            return this.each(function() {
                /^ui-id-\d+$/.test(this.id) && e(this).removeAttr("id")
            })
        }
    }), e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
            return function(i) {
                return !!e.data(i, t)
            }
        }) : function(t, i, a) {
            return !!e.data(t, a[3])
        },
        focusable: function(i) {
            return t(i, !isNaN(e.attr(i, "tabindex")))
        },
        tabbable: function(i) {
            var a = e.attr(i, "tabindex"),
                n = isNaN(a);
            return (n || a >= 0) && t(i, !n)
        }
    }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function(t, i) {
        function a(t, i, a, r) {
            return e.each(n, function() {
                i -= parseFloat(e.css(t, "padding" + this)) || 0, a && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), r && (i -= parseFloat(e.css(t, "margin" + this)) || 0)
            }), i
        }
        var n = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"],
            r = i.toLowerCase(),
            s = {
                innerWidth: e.fn.innerWidth,
                innerHeight: e.fn.innerHeight,
                outerWidth: e.fn.outerWidth,
                outerHeight: e.fn.outerHeight
            };
        e.fn["inner" + i] = function(t) {
            return void 0 === t ? s["inner" + i].call(this) : this.each(function() {
                e(this).css(r, a(this, t) + "px")
            })
        }, e.fn["outer" + i] = function(t, n) {
            return "number" != typeof t ? s["outer" + i].call(this, t) : this.each(function() {
                e(this).css(r, a(this, t, !0, n) + "px")
            })
        }
    }), e.fn.addBack || (e.fn.addBack = function(e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
        return function(i) {
            return arguments.length ? t.call(this, e.camelCase(i)) : t.call(this)
        }
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.fn.extend({
        focus: function(t) {
            return function(i, a) {
                return "number" == typeof i ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        e(t).focus(), a && a.call(t)
                    }, i)
                }) : t.apply(this, arguments)
            }
        }(e.fn.focus),
        disableSelection: function() {
            var e = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";
            return function() {
                return this.bind(e + ".ui-disableSelection", function(e) {
                    e.preventDefault()
                })
            }
        }(),
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        },
        zIndex: function(t) {
            if (void 0 !== t) return this.css("zIndex", t);
            if (this.length)
                for (var i, a, n = e(this[0]); n.length && n[0] !== document;) {
                    if (i = n.css("position"), ("absolute" === i || "relative" === i || "fixed" === i) && (a = parseInt(n.css("zIndex"), 10), !isNaN(a) && 0 !== a)) return a;
                    n = n.parent()
                }
            return 0
        }
    }), e.ui.plugin = {
        add: function(t, i, a) {
            var n, r = e.ui[t].prototype;
            for (n in a) r.plugins[n] = r.plugins[n] || [], r.plugins[n].push([i, a[n]])
        },
        call: function(e, t, i, a) {
            var n, r = e.plugins[t];
            if (r && (a || e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType))
                for (n = 0; r.length > n; n++) e.options[r[n][0]] && r[n][1].apply(e.element, i)
        }
    }, e.extend(e.ui, {
        datepicker: {
            version: "1.11.1"
        }
    });
    var l;
    e.extend(n.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function() {
            return this.dpDiv
        },
        setDefaults: function(e) {
            return o(this._defaults, e || {}), this
        },
        _attachDatepicker: function(t, i) {
            var a, n, r;
            a = t.nodeName.toLowerCase(), n = "div" === a || "span" === a, t.id || (this.uuid += 1, t.id = "dp" + this.uuid), r = this._newInst(e(t), n), r.settings = e.extend({}, i || {}), "input" === a ? this._connectDatepicker(t, r) : n && this._inlineDatepicker(t, r)
        },
        _newInst: function(t, i) {
            var a = t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: a,
                input: t,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: i ? r(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            }
        },
        _connectDatepicker: function(t, i) {
            var a = e(t);
            i.append = e([]), i.trigger = e([]), a.hasClass(this.markerClassName) || (this._attachments(a, i), a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), this._autoSize(i), e.data(t, "datepicker", i), i.settings.disabled && this._disableDatepicker(t))
        },
        _attachments: function(t, i) {
            var a, n, r, s = this._get(i, "appendText"),
                o = this._get(i, "isRTL");
            i.append && i.append.remove(), s && (i.append = e("<span class='" + this._appendClass + "'>" + s + "</span>"), t[o ? "before" : "after"](i.append)), t.unbind("focus", this._showDatepicker), i.trigger && i.trigger.remove(), a = this._get(i, "showOn"), ("focus" === a || "both" === a) && t.focus(this._showDatepicker), ("button" === a || "both" === a) && (n = this._get(i, "buttonText"), r = this._get(i, "buttonImage"), i.trigger = e(this._get(i, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                src: r,
                alt: n,
                title: n
            }) : e("<button type='button'></button>").addClass(this._triggerClass).html(r ? e("<img/>").attr({
                src: r,
                alt: n,
                title: n
            }) : n)), t[o ? "before" : "after"](i.trigger), i.trigger.click(function() {
                return e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0] ? e.datepicker._hideDatepicker() : e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0] ? (e.datepicker._hideDatepicker(), e.datepicker._showDatepicker(t[0])) : e.datepicker._showDatepicker(t[0]), !1
            }))
        },
        _autoSize: function(e) {
            if (this._get(e, "autoSize") && !e.inline) {
                var t, i, a, n, r = new Date(2009, 11, 20),
                    s = this._get(e, "dateFormat");
                s.match(/[DM]/) && (t = function(e) {
                    for (i = 0, a = 0, n = 0; e.length > n; n++) e[n].length > i && (i = e[n].length, a = n);
                    return a
                }, r.setMonth(t(this._get(e, s.match(/MM/) ? "monthNames" : "monthNamesShort"))), r.setDate(t(this._get(e, s.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - r.getDay())), e.input.attr("size", this._formatDate(e, r).length)
            }
        },
        _inlineDatepicker: function(t, i) {
            var a = e(t);
            a.hasClass(this.markerClassName) || (a.addClass(this.markerClassName).append(i.dpDiv), e.data(t, "datepicker", i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(t), i.dpDiv.css("display", "block"))
        },
        _dialogDatepicker: function(t, i, a, n, r) {
            var s, l, d, c, u, h = this._dialogInst;
            return h || (this.uuid += 1, s = "dp" + this.uuid, this._dialogInput = e("<input type='text' id='" + s + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.keydown(this._doKeyDown), e("body").append(this._dialogInput), h = this._dialogInst = this._newInst(this._dialogInput, !1), h.settings = {}, e.data(this._dialogInput[0], "datepicker", h)), o(h.settings, n || {}), i = i && i.constructor === Date ? this._formatDate(h, i) : i, this._dialogInput.val(i), this._pos = r ? r.length ? r : [r.pageX, r.pageY] : null, this._pos || (l = document.documentElement.clientWidth, d = document.documentElement.clientHeight, c = document.documentElement.scrollLeft || document.body.scrollLeft, u = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [l / 2 - 100 + c, d / 2 - 150 + u]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), h.settings.onSelect = a, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), e.blockUI && e.blockUI(this.dpDiv), e.data(this._dialogInput[0], "datepicker", h), this
        },
        _destroyDatepicker: function(t) {
            var i, a = e(t),
                n = e.data(t, "datepicker");
            a.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), e.removeData(t, "datepicker"), "input" === i ? (n.append.remove(), n.trigger.remove(), a.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : ("div" === i || "span" === i) && a.removeClass(this.markerClassName).empty())
        },
        _enableDatepicker: function(t) {
            var i, a, n = e(t),
                r = e.data(t, "datepicker");
            n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), "input" === i ? (t.disabled = !1, r.trigger.filter("button").each(function() {
                this.disabled = !1
            }).end().filter("img").css({
                opacity: "1.0",
                cursor: ""
            })) : ("div" === i || "span" === i) && (a = n.children("." + this._inlineClass), a.children().removeClass("ui-state-disabled"), a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e
            }))
        },
        _disableDatepicker: function(t) {
            var i, a, n = e(t),
                r = e.data(t, "datepicker");
            n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), "input" === i ? (t.disabled = !0, r.trigger.filter("button").each(function() {
                this.disabled = !0
            }).end().filter("img").css({
                opacity: "0.5",
                cursor: "default"
            })) : ("div" === i || "span" === i) && (a = n.children("." + this._inlineClass), a.children().addClass("ui-state-disabled"), a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e
            }), this._disabledInputs[this._disabledInputs.length] = t)
        },
        _isDisabledDatepicker: function(e) {
            if (!e) return !1;
            for (var t = 0; this._disabledInputs.length > t; t++)
                if (this._disabledInputs[t] === e) return !0;
            return !1
        },
        _getInst: function(t) {
            try {
                return e.data(t, "datepicker")
            } catch (i) {
                throw "Missing instance data for this datepicker"
            }
        },
        _optionDatepicker: function(t, i, a) {
            var n, r, s, l, d = this._getInst(t);
            return 2 === arguments.length && "string" == typeof i ? "defaults" === i ? e.extend({}, e.datepicker._defaults) : d ? "all" === i ? e.extend({}, d.settings) : this._get(d, i) : null : (n = i || {}, "string" == typeof i && (n = {}, n[i] = a), void(d && (this._curInst === d && this._hideDatepicker(), r = this._getDateDatepicker(t, !0), s = this._getMinMaxDate(d, "min"), l = this._getMinMaxDate(d, "max"), o(d.settings, n), null !== s && void 0 !== n.dateFormat && void 0 === n.minDate && (d.settings.minDate = this._formatDate(d, s)), null !== l && void 0 !== n.dateFormat && void 0 === n.maxDate && (d.settings.maxDate = this._formatDate(d, l)), "disabled" in n && (n.disabled ? this._disableDatepicker(t) : this._enableDatepicker(t)), this._attachments(e(t), d), this._autoSize(d), this._setDate(d, r), this._updateAlternate(d), this._updateDatepicker(d))))
        },
        _changeDatepicker: function(e, t, i) {
            this._optionDatepicker(e, t, i)
        },
        _refreshDatepicker: function(e) {
            var t = this._getInst(e);
            t && this._updateDatepicker(t)
        },
        _setDateDatepicker: function(e, t) {
            var i = this._getInst(e);
            i && (this._setDate(i, t), this._updateDatepicker(i), this._updateAlternate(i))
        },
        _getDateDatepicker: function(e, t) {
            var i = this._getInst(e);
            return i && !i.inline && this._setDateFromField(i, t), i ? this._getDate(i) : null
        },
        _doKeyDown: function(t) {
            var i, a, n, r = e.datepicker._getInst(t.target),
                s = !0,
                o = r.dpDiv.is(".ui-datepicker-rtl");
            if (r._keyEvent = !0, e.datepicker._datepickerShowing) switch (t.keyCode) {
                case 9:
                    e.datepicker._hideDatepicker(), s = !1;
                    break;
                case 13:
                    return n = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", r.dpDiv), n[0] && e.datepicker._selectDay(t.target, r.selectedMonth, r.selectedYear, n[0]), i = e.datepicker._get(r, "onSelect"), i ? (a = e.datepicker._formatDate(r), i.apply(r.input ? r.input[0] : null, [a, r])) : e.datepicker._hideDatepicker(), !1;
                case 27:
                    e.datepicker._hideDatepicker();
                    break;
                case 33:
                    e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(r, "stepBigMonths") : -e.datepicker._get(r, "stepMonths"), "M");
                    break;
                case 34:
                    e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(r, "stepBigMonths") : +e.datepicker._get(r, "stepMonths"), "M");
                    break;
                case 35:
                    (t.ctrlKey || t.metaKey) && e.datepicker._clearDate(t.target), s = t.ctrlKey || t.metaKey;
                    break;
                case 36:
                    (t.ctrlKey || t.metaKey) && e.datepicker._gotoToday(t.target), s = t.ctrlKey || t.metaKey;
                    break;
                case 37:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, o ? 1 : -1, "D"), s = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(r, "stepBigMonths") : -e.datepicker._get(r, "stepMonths"), "M");
                    break;
                case 38:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, -7, "D"), s = t.ctrlKey || t.metaKey;
                    break;
                case 39:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, o ? -1 : 1, "D"), s = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(r, "stepBigMonths") : +e.datepicker._get(r, "stepMonths"), "M");
                    break;
                case 40:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, 7, "D"), s = t.ctrlKey || t.metaKey;
                    break;
                default:
                    s = !1
            } else 36 === t.keyCode && t.ctrlKey ? e.datepicker._showDatepicker(this) : s = !1;
            s && (t.preventDefault(), t.stopPropagation())
        },
        _doKeyPress: function(t) {
            var i, a, n = e.datepicker._getInst(t.target);
            return e.datepicker._get(n, "constrainInput") ? (i = e.datepicker._possibleChars(e.datepicker._get(n, "dateFormat")), a = String.fromCharCode(null == t.charCode ? t.keyCode : t.charCode), t.ctrlKey || t.metaKey || " " > a || !i || i.indexOf(a) > -1) : void 0
        },
        _doKeyUp: function(t) {
            var i, a = e.datepicker._getInst(t.target);
            if (a.input.val() !== a.lastVal) try {
                i = e.datepicker.parseDate(e.datepicker._get(a, "dateFormat"), a.input ? a.input.val() : null, e.datepicker._getFormatConfig(a)), i && (e.datepicker._setDateFromField(a), e.datepicker._updateAlternate(a), e.datepicker._updateDatepicker(a))
            } catch (n) {}
            return !0
        },
        _showDatepicker: function(t) {
            if (t = t.target || t, "input" !== t.nodeName.toLowerCase() && (t = e("input", t.parentNode)[0]), !e.datepicker._isDisabledDatepicker(t) && e.datepicker._lastInput !== t) {
                var i, n, r, s, l, d, c;
                i = e.datepicker._getInst(t), e.datepicker._curInst && e.datepicker._curInst !== i && (e.datepicker._curInst.dpDiv.stop(!0, !0), i && e.datepicker._datepickerShowing && e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])), n = e.datepicker._get(i, "beforeShow"), r = n ? n.apply(t, [t, i]) : {}, r !== !1 && (o(i.settings, r), i.lastVal = null, e.datepicker._lastInput = t, e.datepicker._setDateFromField(i), e.datepicker._inDialog && (t.value = ""), e.datepicker._pos || (e.datepicker._pos = e.datepicker._findPos(t), e.datepicker._pos[1] += t.offsetHeight), s = !1, e(t).parents().each(function() {
                    return s |= "fixed" === e(this).css("position"), !s
                }), l = {
                    left: e.datepicker._pos[0],
                    top: e.datepicker._pos[1]
                }, e.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }), e.datepicker._updateDatepicker(i), l = e.datepicker._checkOffset(i, l, s), i.dpDiv.css({
                    position: e.datepicker._inDialog && e.blockUI ? "static" : s ? "fixed" : "absolute",
                    display: "none",
                    left: l.left + "px",
                    top: l.top + "px"
                }), i.inline || (d = e.datepicker._get(i, "showAnim"), c = e.datepicker._get(i, "duration"), i.dpDiv.css("z-index", a(e(t)) + 1), e.datepicker._datepickerShowing = !0, e.effects && e.effects.effect[d] ? i.dpDiv.show(d, e.datepicker._get(i, "showOptions"), c) : i.dpDiv[d || "show"](d ? c : null), e.datepicker._shouldFocusInput(i) && i.input.focus(), e.datepicker._curInst = i))
            }
        },
        _updateDatepicker: function(t) {
            this.maxRows = 4, l = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t);
            var i, a = this._getNumberOfMonths(t),
                n = a[1],
                r = 17,
                o = t.dpDiv.find("." + this._dayOverClass + " a");
            o.length > 0 && s.apply(o.get(0)), t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), n > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + n).css("width", r * n + "em"), t.dpDiv[(1 !== a[0] || 1 !== a[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t) && t.input.focus(), t.yearshtml && (i = t.yearshtml, setTimeout(function() {
                i === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), i = t.yearshtml = null
            }, 0))
        },
        _shouldFocusInput: function(e) {
            return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus")
        },
        _checkOffset: function(t, i, a) {
            var n = t.dpDiv.outerWidth(),
                r = t.dpDiv.outerHeight(),
                s = t.input ? t.input.outerWidth() : 0,
                o = t.input ? t.input.outerHeight() : 0,
                l = document.documentElement.clientWidth + (a ? 0 : e(document).scrollLeft()),
                d = document.documentElement.clientHeight + (a ? 0 : e(document).scrollTop());
            return i.left -= this._get(t, "isRTL") ? n - s : 0, i.left -= a && i.left === t.input.offset().left ? e(document).scrollLeft() : 0, i.top -= a && i.top === t.input.offset().top + o ? e(document).scrollTop() : 0, i.left -= Math.min(i.left, i.left + n > l && l > n ? Math.abs(i.left + n - l) : 0), i.top -= Math.min(i.top, i.top + r > d && d > r ? Math.abs(r + o) : 0), i
        },
        _findPos: function(t) {
            for (var i, a = this._getInst(t), n = this._get(a, "isRTL"); t && ("hidden" === t.type || 1 !== t.nodeType || e.expr.filters.hidden(t));) t = t[n ? "previousSibling" : "nextSibling"];
            return i = e(t).offset(), [i.left, i.top]
        },
        _hideDatepicker: function(t) {
            var i, a, n, r, s = this._curInst;
            !s || t && s !== e.data(t, "datepicker") || this._datepickerShowing && (i = this._get(s, "showAnim"), a = this._get(s, "duration"), n = function() {
                e.datepicker._tidyDialog(s)
            }, e.effects && (e.effects.effect[i] || e.effects[i]) ? s.dpDiv.hide(i, e.datepicker._get(s, "showOptions"), a, n) : s.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? a : null, n), i || n(), this._datepickerShowing = !1, r = this._get(s, "onClose"), r && r.apply(s.input ? s.input[0] : null, [s.input ? s.input.val() : "", s]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px"
            }), e.blockUI && (e.unblockUI(), e("body").append(this.dpDiv))), this._inDialog = !1)
        },
        _tidyDialog: function(e) {
            e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        },
        _checkExternalClick: function(t) {
            if (e.datepicker._curInst) {
                var i = e(t.target),
                    a = e.datepicker._getInst(i[0]);
                (i[0].id !== e.datepicker._mainDivId && 0 === i.parents("#" + e.datepicker._mainDivId).length && !i.hasClass(e.datepicker.markerClassName) && !i.closest("." + e.datepicker._triggerClass).length && e.datepicker._datepickerShowing && (!e.datepicker._inDialog || !e.blockUI) || i.hasClass(e.datepicker.markerClassName) && e.datepicker._curInst !== a) && e.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function(t, i, a) {
            var n = e(t),
                r = this._getInst(n[0]);
            this._isDisabledDatepicker(n[0]) || (this._adjustInstDate(r, i + ("M" === a ? this._get(r, "showCurrentAtPos") : 0), a), this._updateDatepicker(r))
        },
        _gotoToday: function(t) {
            var i, a = e(t),
                n = this._getInst(a[0]);
            this._get(n, "gotoCurrent") && n.currentDay ? (n.selectedDay = n.currentDay, n.drawMonth = n.selectedMonth = n.currentMonth, n.drawYear = n.selectedYear = n.currentYear) : (i = new Date, n.selectedDay = i.getDate(), n.drawMonth = n.selectedMonth = i.getMonth(), n.drawYear = n.selectedYear = i.getFullYear()), this._notifyChange(n), this._adjustDate(a)
        },
        _selectMonthYear: function(t, i, a) {
            var n = e(t),
                r = this._getInst(n[0]);
            r["selected" + ("M" === a ? "Month" : "Year")] = r["draw" + ("M" === a ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), this._notifyChange(r), this._adjustDate(n)
        },
        _selectDay: function(t, i, a, n) {
            var r, s = e(t);
            e(n).hasClass(this._unselectableClass) || this._isDisabledDatepicker(s[0]) || (r = this._getInst(s[0]), r.selectedDay = r.currentDay = e("a", n).html(), r.selectedMonth = r.currentMonth = i, r.selectedYear = r.currentYear = a, this._selectDate(t, this._formatDate(r, r.currentDay, r.currentMonth, r.currentYear)))
        },
        _clearDate: function(t) {
            var i = e(t);
            this._selectDate(i, "")
        },
        _selectDate: function(t, i) {
            var a, n = e(t),
                r = this._getInst(n[0]);
            i = null != i ? i : this._formatDate(r), r.input && r.input.val(i), this._updateAlternate(r), a = this._get(r, "onSelect"), a ? a.apply(r.input ? r.input[0] : null, [i, r]) : r.input && r.input.trigger("change"), r.inline ? this._updateDatepicker(r) : (this._hideDatepicker(), this._lastInput = r.input[0], "object" != typeof r.input[0] && r.input.focus(), this._lastInput = null)
        },
        _updateAlternate: function(t) {
            var i, a, n, r = this._get(t, "altField");
            r && (i = this._get(t, "altFormat") || this._get(t, "dateFormat"), a = this._getDate(t), n = this.formatDate(i, a, this._getFormatConfig(t)), e(r).each(function() {
                e(this).val(n)
            }))
        },
        noWeekends: function(e) {
            var t = e.getDay();
            return [t > 0 && 6 > t, ""]
        },
        iso8601Week: function(e) {
            var t, i = new Date(e.getTime());
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), t = i.getTime(), i.setMonth(0), i.setDate(1), Math.floor(Math.round((t - i) / 864e5) / 7) + 1
        },
        parseDate: function(t, i, a) {
            if (null == t || null == i) throw "Invalid arguments";
            if (i = "object" == typeof i ? "" + i : i + "", "" === i) return null;
            var n, r, s, o, l = 0,
                d = (a ? a.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                c = "string" != typeof d ? d : (new Date).getFullYear() % 100 + parseInt(d, 10),
                u = (a ? a.dayNamesShort : null) || this._defaults.dayNamesShort,
                h = (a ? a.dayNames : null) || this._defaults.dayNames,
                p = (a ? a.monthNamesShort : null) || this._defaults.monthNamesShort,
                g = (a ? a.monthNames : null) || this._defaults.monthNames,
                f = -1,
                m = -1,
                v = -1,
                y = -1,
                b = !1,
                _ = function(e) {
                    var i = t.length > n + 1 && t.charAt(n + 1) === e;
                    return i && n++, i
                },
                x = function(e) {
                    var t = _(e),
                        a = "@" === e ? 14 : "!" === e ? 20 : "y" === e && t ? 4 : "o" === e ? 3 : 2,
                        n = "y" === e ? a : 1,
                        r = RegExp("^\\d{" + n + "," + a + "}"),
                        s = i.substring(l).match(r);
                    if (!s) throw "Missing number at position " + l;
                    return l += s[0].length, parseInt(s[0], 10)
                },
                w = function(t, a, n) {
                    var r = -1,
                        s = e.map(_(t) ? n : a, function(e, t) {
                            return [
                                [t, e]
                            ]
                        }).sort(function(e, t) {
                            return -(e[1].length - t[1].length)
                        });
                    if (e.each(s, function(e, t) {
                            var a = t[1];
                            return i.substr(l, a.length).toLowerCase() === a.toLowerCase() ? (r = t[0], l += a.length, !1) : void 0
                        }), -1 !== r) return r + 1;
                    throw "Unknown name at position " + l
                },
                k = function() {
                    if (i.charAt(l) !== t.charAt(n)) throw "Unexpected literal at position " + l;
                    l++
                };
            for (n = 0; t.length > n; n++)
                if (b) "'" !== t.charAt(n) || _("'") ? k() : b = !1;
                else switch (t.charAt(n)) {
                    case "d":
                        v = x("d");
                        break;
                    case "D":
                        w("D", u, h);
                        break;
                    case "o":
                        y = x("o");
                        break;
                    case "m":
                        m = x("m");
                        break;
                    case "M":
                        m = w("M", p, g);
                        break;
                    case "y":
                        f = x("y");
                        break;
                    case "@":
                        o = new Date(x("@")), f = o.getFullYear(), m = o.getMonth() + 1, v = o.getDate();
                        break;
                    case "!":
                        o = new Date((x("!") - this._ticksTo1970) / 1e4), f = o.getFullYear(), m = o.getMonth() + 1, v = o.getDate();
                        break;
                    case "'":
                        _("'") ? k() : b = !0;
                        break;
                    default:
                        k()
                }
                if (i.length > l && (s = i.substr(l), !/^\s+/.test(s))) throw "Extra/unparsed characters found in date: " + s;
            if (-1 === f ? f = (new Date).getFullYear() : 100 > f && (f += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (c >= f ? 0 : -100)), y > -1)
                for (m = 1, v = y; r = this._getDaysInMonth(f, m - 1), !(r >= v);) m++, v -= r;
            if (o = this._daylightSavingAdjust(new Date(f, m - 1, v)), o.getFullYear() !== f || o.getMonth() + 1 !== m || o.getDate() !== v) throw "Invalid date";
            return o
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: 864e9 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)),
        formatDate: function(e, t, i) {
            if (!t) return "";
            var a, n = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort,
                r = (i ? i.dayNames : null) || this._defaults.dayNames,
                s = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort,
                o = (i ? i.monthNames : null) || this._defaults.monthNames,
                l = function(t) {
                    var i = e.length > a + 1 && e.charAt(a + 1) === t;
                    return i && a++, i
                },
                d = function(e, t, i) {
                    var a = "" + t;
                    if (l(e))
                        for (; i > a.length;) a = "0" + a;
                    return a
                },
                c = function(e, t, i, a) {
                    return l(e) ? a[t] : i[t]
                },
                u = "",
                h = !1;
            if (t)
                for (a = 0; e.length > a; a++)
                    if (h) "'" !== e.charAt(a) || l("'") ? u += e.charAt(a) : h = !1;
                    else switch (e.charAt(a)) {
                        case "d":
                            u += d("d", t.getDate(), 2);
                            break;
                        case "D":
                            u += c("D", t.getDay(), n, r);
                            break;
                        case "o":
                            u += d("o", Math.round((new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime() - new Date(t.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                            break;
                        case "m":
                            u += d("m", t.getMonth() + 1, 2);
                            break;
                        case "M":
                            u += c("M", t.getMonth(), s, o);
                            break;
                        case "y":
                            u += l("y") ? t.getFullYear() : (10 > t.getYear() % 100 ? "0" : "") + t.getYear() % 100;
                            break;
                        case "@":
                            u += t.getTime();
                            break;
                        case "!":
                            u += 1e4 * t.getTime() + this._ticksTo1970;
                            break;
                        case "'":
                            l("'") ? u += "'" : h = !0;
                            break;
                        default:
                            u += e.charAt(a)
                    }
                    return u
        },
        _possibleChars: function(e) {
            var t, i = "",
                a = !1,
                n = function(i) {
                    var a = e.length > t + 1 && e.charAt(t + 1) === i;
                    return a && t++, a
                };
            for (t = 0; e.length > t; t++)
                if (a) "'" !== e.charAt(t) || n("'") ? i += e.charAt(t) : a = !1;
                else switch (e.charAt(t)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        i += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null;
                    case "'":
                        n("'") ? i += "'" : a = !0;
                        break;
                    default:
                        i += e.charAt(t)
                }
                return i
        },
        _get: function(e, t) {
            return void 0 !== e.settings[t] ? e.settings[t] : this._defaults[t]
        },
        _setDateFromField: function(e, t) {
            if (e.input.val() !== e.lastVal) {
                var i = this._get(e, "dateFormat"),
                    a = e.lastVal = e.input ? e.input.val() : null,
                    n = this._getDefaultDate(e),
                    r = n,
                    s = this._getFormatConfig(e);
                try {
                    r = this.parseDate(i, a, s) || n
                } catch (o) {
                    a = t ? "" : a
                }
                e.selectedDay = r.getDate(), e.drawMonth = e.selectedMonth = r.getMonth(), e.drawYear = e.selectedYear = r.getFullYear(), e.currentDay = a ? r.getDate() : 0, e.currentMonth = a ? r.getMonth() : 0, e.currentYear = a ? r.getFullYear() : 0, this._adjustInstDate(e)
            }
        },
        _getDefaultDate: function(e) {
            return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
        },
        _determineDate: function(t, i, a) {
            var n = function(e) {
                    var t = new Date;
                    return t.setDate(t.getDate() + e), t
                },
                r = function(i) {
                    try {
                        return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), i, e.datepicker._getFormatConfig(t))
                    } catch (a) {}
                    for (var n = (i.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date, r = n.getFullYear(), s = n.getMonth(), o = n.getDate(), l = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, d = l.exec(i); d;) {
                        switch (d[2] || "d") {
                            case "d":
                            case "D":
                                o += parseInt(d[1], 10);
                                break;
                            case "w":
                            case "W":
                                o += 7 * parseInt(d[1], 10);
                                break;
                            case "m":
                            case "M":
                                s += parseInt(d[1], 10), o = Math.min(o, e.datepicker._getDaysInMonth(r, s));
                                break;
                            case "y":
                            case "Y":
                                r += parseInt(d[1], 10), o = Math.min(o, e.datepicker._getDaysInMonth(r, s))
                        }
                        d = l.exec(i)
                    }
                    return new Date(r, s, o)
                },
                s = null == i || "" === i ? a : "string" == typeof i ? r(i) : "number" == typeof i ? isNaN(i) ? a : n(i) : new Date(i.getTime());
            return s = s && "Invalid Date" == "" + s ? a : s, s && (s.setHours(0), s.setMinutes(0), s.setSeconds(0), s.setMilliseconds(0)), this._daylightSavingAdjust(s)
        },
        _daylightSavingAdjust: function(e) {
            return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
        },
        _setDate: function(e, t, i) {
            var a = !t,
                n = e.selectedMonth,
                r = e.selectedYear,
                s = this._restrictMinMax(e, this._determineDate(e, t, new Date));
            e.selectedDay = e.currentDay = s.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = s.getMonth(), e.drawYear = e.selectedYear = e.currentYear = s.getFullYear(), n === e.selectedMonth && r === e.selectedYear || i || this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(a ? "" : this._formatDate(e))
        },
        _getDate: function(e) {
            var t = !e.currentYear || e.input && "" === e.input.val() ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return t
        },
        _attachHandlers: function(t) {
            var i = this._get(t, "stepMonths"),
                a = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function() {
                var t = {
                    prev: function() {
                        e.datepicker._adjustDate(a, -i, "M")
                    },
                    next: function() {
                        e.datepicker._adjustDate(a, +i, "M")
                    },
                    hide: function() {
                        e.datepicker._hideDatepicker()
                    },
                    today: function() {
                        e.datepicker._gotoToday(a)
                    },
                    selectDay: function() {
                        return e.datepicker._selectDay(a, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
                    },
                    selectMonth: function() {
                        return e.datepicker._selectMonthYear(a, this, "M"), !1
                    },
                    selectYear: function() {
                        return e.datepicker._selectMonthYear(a, this, "Y"), !1
                    }
                };
                e(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")])
            })
        },
        _generateHTML: function(e) {
            var t, i, a, n, r, s, o, l, d, c, u, h, p, g, f, m, v, y, b, _, x, w, k, D, C, T, S, F, M, E, I, A, P, N, O, j, L, G, z, q = new Date,
                R = this._daylightSavingAdjust(new Date(q.getFullYear(), q.getMonth(), q.getDate())),
                Y = this._get(e, "isRTL"),
                H = this._get(e, "showButtonPanel"),
                W = this._get(e, "hideIfNoPrevNext"),
                V = this._get(e, "navigationAsDateFormat"),
                U = this._getNumberOfMonths(e),
                B = this._get(e, "showCurrentAtPos"),
                K = this._get(e, "stepMonths"),
                Q = 1 !== U[0] || 1 !== U[1],
                J = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)),
                X = this._getMinMaxDate(e, "min"),
                $ = this._getMinMaxDate(e, "max"),
                Z = e.drawMonth - B,
                ee = e.drawYear;
            if (0 > Z && (Z += 12, ee--), $)
                for (t = this._daylightSavingAdjust(new Date($.getFullYear(), $.getMonth() - U[0] * U[1] + 1, $.getDate())), t = X && X > t ? X : t; this._daylightSavingAdjust(new Date(ee, Z, 1)) > t;) Z--, 0 > Z && (Z = 11, ee--);
            for (e.drawMonth = Z, e.drawYear = ee, i = this._get(e, "prevText"), i = V ? this.formatDate(i, this._daylightSavingAdjust(new Date(ee, Z - K, 1)), this._getFormatConfig(e)) : i, a = this._canAdjustMonth(e, -1, ee, Z) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "e" : "w") + "'>" + i + "</span></a>" : W ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "e" : "w") + "'>" + i + "</span></a>", n = this._get(e, "nextText"), n = V ? this.formatDate(n, this._daylightSavingAdjust(new Date(ee, Z + K, 1)), this._getFormatConfig(e)) : n, r = this._canAdjustMonth(e, 1, ee, Z) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "w" : "e") + "'>" + n + "</span></a>" : W ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (Y ? "w" : "e") + "'>" + n + "</span></a>", s = this._get(e, "currentText"), o = this._get(e, "gotoCurrent") && e.currentDay ? J : R, s = V ? this.formatDate(s, o, this._getFormatConfig(e)) : s, l = e.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>", d = H ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (Y ? l : "") + (this._isInRange(e, o) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + s + "</button>" : "") + (Y ? "" : l) + "</div>" : "", c = parseInt(this._get(e, "firstDay"), 10), c = isNaN(c) ? 0 : c, u = this._get(e, "showWeek"), h = this._get(e, "dayNames"), p = this._get(e, "dayNamesMin"), g = this._get(e, "monthNames"), f = this._get(e, "monthNamesShort"), m = this._get(e, "beforeShowDay"), v = this._get(e, "showOtherMonths"), y = this._get(e, "selectOtherMonths"), b = this._getDefaultDate(e), _ = "", w = 0; U[0] > w; w++) {
                for (k = "", this.maxRows = 4, D = 0; U[1] > D; D++) {
                    if (C = this._daylightSavingAdjust(new Date(ee, Z, e.selectedDay)), T = " ui-corner-all", S = "", Q) {
                        if (S += "<div class='ui-datepicker-group", U[1] > 1) switch (D) {
                            case 0:
                                S += " ui-datepicker-group-first", T = " ui-corner-" + (Y ? "right" : "left");
                                break;
                            case U[1] - 1:
                                S += " ui-datepicker-group-last", T = " ui-corner-" + (Y ? "left" : "right");
                                break;
                            default:
                                S += " ui-datepicker-group-middle", T = ""
                        }
                        S += "'>"
                    }
                    for (S += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + T + "'>" + (/all|left/.test(T) && 0 === w ? Y ? r : a : "") + (/all|right/.test(T) && 0 === w ? Y ? a : r : "") + this._generateMonthYearHeader(e, Z, ee, X, $, w > 0 || D > 0, g, f) + "</div><table class='ui-datepicker-calendar'><thead><tr>", F = u ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "", x = 0; 7 > x; x++) M = (x + c) % 7, F += "<th scope='col'" + ((x + c + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + h[M] + "'>" + p[M] + "</span></th>";
                    for (S += F + "</tr></thead><tbody>", E = this._getDaysInMonth(ee, Z), ee === e.selectedYear && Z === e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, E)), I = (this._getFirstDayOfMonth(ee, Z) - c + 7) % 7, A = Math.ceil((I + E) / 7), P = Q && this.maxRows > A ? this.maxRows : A, this.maxRows = P, N = this._daylightSavingAdjust(new Date(ee, Z, 1 - I)), O = 0; P > O; O++) {
                        for (S += "<tr>", j = u ? "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(N) + "</td>" : "", x = 0; 7 > x; x++) L = m ? m.apply(e.input ? e.input[0] : null, [N]) : [!0, ""], G = N.getMonth() !== Z, z = G && !y || !L[0] || X && X > N || $ && N > $, j += "<td class='" + ((x + c + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (G ? " ui-datepicker-other-month" : "") + (N.getTime() === C.getTime() && Z === e.selectedMonth && e._keyEvent || b.getTime() === N.getTime() && b.getTime() === C.getTime() ? " " + this._dayOverClass : "") + (z ? " " + this._unselectableClass + " ui-state-disabled" : "") + (G && !v ? "" : " " + L[1] + (N.getTime() === J.getTime() ? " " + this._currentClass : "") + (N.getTime() === R.getTime() ? " ui-datepicker-today" : "")) + "'" + (G && !v || !L[2] ? "" : " title='" + L[2].replace(/'/g, "&#39;") + "'") + (z ? "" : " data-handler='selectDay' data-event='click' data-month='" + N.getMonth() + "' data-year='" + N.getFullYear() + "'") + ">" + (G && !v ? "&#xa0;" : z ? "<span class='ui-state-default'>" + N.getDate() + "</span>" : "<a class='ui-state-default" + (N.getTime() === R.getTime() ? " ui-state-highlight" : "") + (N.getTime() === J.getTime() ? " ui-state-active" : "") + (G ? " ui-priority-secondary" : "") + "' href='#'>" + N.getDate() + "</a>") + "</td>", N.setDate(N.getDate() + 1), N = this._daylightSavingAdjust(N);
                        S += j + "</tr>"
                    }
                    Z++, Z > 11 && (Z = 0, ee++), S += "</tbody></table>" + (Q ? "</div>" + (U[0] > 0 && D === U[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""), k += S
                }
                _ += k
            }
            return _ += d, e._keyEvent = !1, _
        },
        _generateMonthYearHeader: function(e, t, i, a, n, r, s, o) {
            var l, d, c, u, h, p, g, f, m = this._get(e, "changeMonth"),
                v = this._get(e, "changeYear"),
                y = this._get(e, "showMonthAfterYear"),
                b = "<div class='ui-datepicker-title'>",
                _ = "";
            if (r || !m) _ += "<span class='ui-datepicker-month'>" + s[t] + "</span>";
            else {
                for (l = a && a.getFullYear() === i, d = n && n.getFullYear() === i, _ += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", c = 0; 12 > c; c++)(!l || c >= a.getMonth()) && (!d || n.getMonth() >= c) && (_ += "<option value='" + c + "'" + (c === t ? " selected='selected'" : "") + ">" + o[c] + "</option>");
                _ += "</select>"
            }
            if (y || (b += _ + (!r && m && v ? "" : "&#xa0;")), !e.yearshtml)
                if (e.yearshtml = "", r || !v) b += "<span class='ui-datepicker-year'>" + i + "</span>";
                else {
                    for (u = this._get(e, "yearRange").split(":"), h = (new Date).getFullYear(), p = function(e) {
                            var t = e.match(/c[+\-].*/) ? i + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? h + parseInt(e, 10) : parseInt(e, 10);
                            return isNaN(t) ? h : t
                        }, g = p(u[0]), f = Math.max(g, p(u[1] || "")), g = a ? Math.max(g, a.getFullYear()) : g, f = n ? Math.min(f, n.getFullYear()) : f, e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; f >= g; g++) e.yearshtml += "<option value='" + g + "'" + (g === i ? " selected='selected'" : "") + ">" + g + "</option>";
                    e.yearshtml += "</select>", b += e.yearshtml, e.yearshtml = null
                }
            return b += this._get(e, "yearSuffix"), y && (b += (!r && m && v ? "" : "&#xa0;") + _), b += "</div>"
        },
        _adjustInstDate: function(e, t, i) {
            var a = e.drawYear + ("Y" === i ? t : 0),
                n = e.drawMonth + ("M" === i ? t : 0),
                r = Math.min(e.selectedDay, this._getDaysInMonth(a, n)) + ("D" === i ? t : 0),
                s = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(a, n, r)));
            e.selectedDay = s.getDate(), e.drawMonth = e.selectedMonth = s.getMonth(), e.drawYear = e.selectedYear = s.getFullYear(), ("M" === i || "Y" === i) && this._notifyChange(e)
        },
        _restrictMinMax: function(e, t) {
            var i = this._getMinMaxDate(e, "min"),
                a = this._getMinMaxDate(e, "max"),
                n = i && i > t ? i : t;
            return a && n > a ? a : n
        },
        _notifyChange: function(e) {
            var t = this._get(e, "onChangeMonthYear");
            t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
        },
        _getNumberOfMonths: function(e) {
            var t = this._get(e, "numberOfMonths");
            return null == t ? [1, 1] : "number" == typeof t ? [1, t] : t
        },
        _getMinMaxDate: function(e, t) {
            return this._determineDate(e, this._get(e, t + "Date"), null)
        },
        _getDaysInMonth: function(e, t) {
            return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
        },
        _getFirstDayOfMonth: function(e, t) {
            return new Date(e, t, 1).getDay()
        },
        _canAdjustMonth: function(e, t, i, a) {
            var n = this._getNumberOfMonths(e),
                r = this._daylightSavingAdjust(new Date(i, a + (0 > t ? t : n[0] * n[1]), 1));
            return 0 > t && r.setDate(this._getDaysInMonth(r.getFullYear(), r.getMonth())), this._isInRange(e, r)
        },
        _isInRange: function(e, t) {
            var i, a, n = this._getMinMaxDate(e, "min"),
                r = this._getMinMaxDate(e, "max"),
                s = null,
                o = null,
                l = this._get(e, "yearRange");
            return l && (i = l.split(":"), a = (new Date).getFullYear(), s = parseInt(i[0], 10), o = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (s += a), i[1].match(/[+\-].*/) && (o += a)), (!n || t.getTime() >= n.getTime()) && (!r || t.getTime() <= r.getTime()) && (!s || t.getFullYear() >= s) && (!o || o >= t.getFullYear())
        },
        _getFormatConfig: function(e) {
            var t = this._get(e, "shortYearCutoff");
            return t = "string" != typeof t ? t : (new Date).getFullYear() % 100 + parseInt(t, 10), {
                shortYearCutoff: t,
                dayNamesShort: this._get(e, "dayNamesShort"),
                dayNames: this._get(e, "dayNames"),
                monthNamesShort: this._get(e, "monthNamesShort"),
                monthNames: this._get(e, "monthNames")
            }
        },
        _formatDate: function(e, t, i, a) {
            t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
            var n = t ? "object" == typeof t ? t : this._daylightSavingAdjust(new Date(a, i, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return this.formatDate(this._get(e, "dateFormat"), n, this._getFormatConfig(e))
        }
    }), e.fn.datepicker = function(t) {
        if (!this.length) return this;
        e.datepicker.initialized || (e(document).mousedown(e.datepicker._checkExternalClick), e.datepicker.initialized = !0), 0 === e("#" + e.datepicker._mainDivId).length && e("body").append(e.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof t || "isDisabled" !== t && "getDate" !== t && "widget" !== t ? "option" === t && 2 === arguments.length && "string" == typeof arguments[1] ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i)) : this.each(function() {
            "string" == typeof t ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this].concat(i)) : e.datepicker._attachDatepicker(this, t)
        }) : e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i))
    }, e.datepicker = new n, e.datepicker.initialized = !1, e.datepicker.uuid = (new Date).getTime(), e.datepicker.version = "1.11.1", e.datepicker
}),
function($) {
    "use strict";
    var e = {
        init: function(t) {
            var i = this;
            return i.data("jqv") && null != i.data("jqv") || (t = e._saveOptions(i, t), $(document).on("click", ".formError", function() {
                $(this).fadeOut(150, function() {
                    $(this).closest(".formError").remove()
                })
            })), this
        },
        attach: function(t) {
            var i = this,
                a;
            return a = t ? e._saveOptions(i, t) : i.data("jqv"), a.validateAttribute = i.find("[data-validation-engine*=validate]").length ? "data-validation-engine" : "class", a.binded && (i.on(a.validationEventTrigger, "[" + a.validateAttribute + "*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)", e._onFieldEvent), i.on("click", "[" + a.validateAttribute + "*=validate][type=checkbox],[" + a.validateAttribute + "*=validate][type=radio]", e._onFieldEvent), i.on(a.validationEventTrigger, "[" + a.validateAttribute + "*=validate][class*=datepicker]", {
                delay: 300
            }, e._onFieldEvent)), a.autoPositionUpdate && $(window).bind("resize", {
                noAnimation: !0,
                formElem: i
            }, e.updatePromptsPosition), i.on("click", "a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", e._submitButtonClick), i.removeData("jqv_submitButton"), i.on("submit", e._onSubmitEvent), this
        },
        detach: function() {
            var t = this,
                i = t.data("jqv");
            return t.off(i.validationEventTrigger, "[" + i.validateAttribute + "*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)", e._onFieldEvent), t.off("click", "[" + i.validateAttribute + "*=validate][type=checkbox],[" + i.validateAttribute + "*=validate][type=radio]", e._onFieldEvent), t.off(i.validationEventTrigger, "[" + i.validateAttribute + "*=validate][class*=datepicker]", e._onFieldEvent), t.off("submit", e._onSubmitEvent), t.removeData("jqv"), t.off("click", "a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", e._submitButtonClick), t.removeData("jqv_submitButton"), i.autoPositionUpdate && $(window).off("resize", e.updatePromptsPosition), this
        },
        validate: function(t) {
            var i = $(this),
                a = null,
                n;
            if (i.is("form") || i.hasClass("validationEngineContainer")) {
                if (i.hasClass("validating")) return !1;
                i.addClass("validating"), n = t ? e._saveOptions(i, t) : i.data("jqv");
                var a = e._validateFields(this);
                setTimeout(function() {
                    i.removeClass("validating")
                }, 100), a && n.onSuccess ? n.onSuccess() : !a && n.onFailure && n.onFailure()
            } else {
                if (!i.is("form") && !i.hasClass("validationEngineContainer")) {
                    var r = i.closest("form, .validationEngineContainer");
                    return n = r.data("jqv") ? r.data("jqv") : $.validationEngine.defaults, a = e._validateField(i, n), a && n.onFieldSuccess ? n.onFieldSuccess() : n.onFieldFailure && n.InvalidFields.length > 0 && n.onFieldFailure(), !a
                }
                i.removeClass("validating")
            }
            return n.onValidationComplete ? !!n.onValidationComplete(r, a) : a
        },
        updatePromptsPosition: function(t) {
            if (t && this == window) var i = t.data.formElem,
                a = t.data.noAnimation;
            else var i = $(this.closest("form, .validationEngineContainer"));
            var n = i.data("jqv");
            return n || (n = e._saveOptions(i, n)), i.find("[" + n.validateAttribute + "*=validate]").not(":disabled").each(function() {
                var t = $(this);
                n.prettySelect && t.is(":hidden") && (t = i.find("#" + n.usePrefix + t.attr("id") + n.useSuffix));
                var r = e._getPrompt(t),
                    s = $(r).find(".formErrorContent").html();
                r && e._updatePrompt(t, $(r), s, void 0, !1, n, a)
            }), this
        },
        showPrompt: function(t, i, a, n) {
            var r = this.closest("form, .validationEngineContainer"),
                s = r.data("jqv");
            return s || (s = e._saveOptions(this, s)), a && (s.promptPosition = a), s.showArrow = 1 == n, e._showPrompt(this, t, i, !1, s), this
        },
        hide: function() {
            var t = $(this).closest("form, .validationEngineContainer"),
                i = t.data("jqv");
            i || (i = e._saveOptions(t, i));
            var a = i && i.fadeDuration ? i.fadeDuration : .3,
                n;
            return n = t.is("form") || t.hasClass("validationEngineContainer") ? "parentForm" + e._getClassName($(t).attr("id")) : e._getClassName($(t).attr("id")) + "formError", $("." + n).fadeTo(a, 0, function() {
                $(this).closest(".formError").remove()
            }), this
        },
        hideAll: function() {
            var e = this,
                t = e.data("jqv"),
                i = t ? t.fadeDuration : 300;
            return $(".formError").fadeTo(i, 0, function() {
                $(this).closest(".formError").remove()
            }), this
        },
        _onFieldEvent: function(t) {
            var i = $(this),
                a = i.closest("form, .validationEngineContainer"),
                n = a.data("jqv");
            n || (n = e._saveOptions(a, n)), n.eventTrigger = "field", 1 == n.notEmpty ? i.val().length > 0 && window.setTimeout(function() {
                e._validateField(i, n)
            }, t.data ? t.data.delay : 0) : window.setTimeout(function() {
                e._validateField(i, n)
            }, t.data ? t.data.delay : 0)
        },
        _onSubmitEvent: function() {
            var t = $(this),
                i = t.data("jqv");
            if (t.data("jqv_submitButton")) {
                var a = $("#" + t.data("jqv_submitButton"));
                if (a && a.length > 0 && (a.hasClass("validate-skip") || "true" == a.attr("data-validation-engine-skip"))) return !0
            }
            i.eventTrigger = "submit";
            var n = e._validateFields(t);
            return n && i.ajaxFormValidation ? (e._validateFormWithAjax(t, i), !1) : i.onValidationComplete ? !!i.onValidationComplete(t, n) : n
        },
        _checkAjaxStatus: function(e) {
            var t = !0;
            return $.each(e.ajaxValidCache, function(e, i) {
                return i ? void 0 : (t = !1, !1)
            }), t
        },
        _checkAjaxFieldStatus: function(e, t) {
            return 1 == t.ajaxValidCache[e]
        },
        _validateFields: function(t) {
            var i = t.data("jqv"),
                a = !1;
            t.trigger("jqv.form.validating");
            var n = null;
            if (t.find("[" + i.validateAttribute + "*=validate]").not(":disabled").each(function() {
                    var r = $(this),
                        s = [];
                    if ($.inArray(r.attr("name"), s) < 0) {
                        if (a |= e._validateField(r, i), a && null == n && (r.is(":hidden") && i.prettySelect ? n = r = t.find("#" + i.usePrefix + e._jqSelector(r.attr("id")) + i.useSuffix) : (r.data("jqv-prompt-at") instanceof jQuery ? r = r.data("jqv-prompt-at") : r.data("jqv-prompt-at") && (r = $(r.data("jqv-prompt-at"))), n = r)), i.doNotShowAllErrosOnSubmit) return !1;
                        if (s.push(r.attr("name")), 1 == i.showOneMessage && a) return !1
                    }
                }), t.trigger("jqv.form.result", [a]), a) {
                if (i.scroll) {
                    var r = n.offset().top,
                        s = n.offset().left,
                        o = i.promptPosition;
                    if ("string" == typeof o && -1 != o.indexOf(":") && (o = o.substring(0, o.indexOf(":"))), "bottomRight" != o && "bottomLeft" != o) {
                        var l = e._getPrompt(n);
                        l && (r = l.offset().top)
                    }
                    if (i.scrollOffset && (r -= i.scrollOffset), i.isOverflown) {
                        var d = $(i.overflownDIV);
                        if (!d.length) return !1;
                        var c = d.scrollTop(),
                            u = -parseInt(d.offset().top);
                        r += c + u - 5;
                        var h = $(i.overflownDIV).filter(":not(:animated)");
                        h.animate({
                            scrollTop: r
                        }, 1100, function() {
                            i.focusFirstField && n.focus()
                        })
                    } else $("html, body").animate({
                        scrollTop: r
                    }, 1100, function() {
                        i.focusFirstField && n.focus()
                    }), $("html, body").animate({
                        scrollLeft: s
                    }, 1100)
                } else i.focusFirstField && n.focus();
                return !1
            }
            return !0
        },
        _validateFormWithAjax: function(t, i) {
            var a = t.serialize(),
                n = i.ajaxFormValidationMethod ? i.ajaxFormValidationMethod : "GET",
                r = i.ajaxFormValidationURL ? i.ajaxFormValidationURL : t.attr("action"),
                s = i.dataType ? i.dataType : "json";
            $.ajax({
                type: n,
                url: r,
                cache: !1,
                dataType: s,
                data: a,
                form: t,
                methods: e,
                options: i,
                beforeSend: function() {
                    return i.onBeforeAjaxFormValidation(t, i)
                },
                error: function(t, a) {
                    i.onFailure ? i.onFailure(t, a) : e._ajaxError(t, a)
                },
                success: function(a) {
                    if ("json" == s && a !== !0) {
                        for (var n = !1, r = 0; r < a.length; r++) {
                            var o = a[r],
                                l = o[0],
                                d = $($("#" + l)[0]);
                            if (1 == d.length) {
                                var c = o[2];
                                if (1 == o[1])
                                    if ("" != c && c) {
                                        if (i.allrules[c]) {
                                            var u = i.allrules[c].alertTextOk;
                                            u && (c = u)
                                        }
                                        i.showPrompts && e._showPrompt(d, c, "pass", !1, i, !0)
                                    } else e._closePrompt(d);
                                else {
                                    if (n |= !0, i.allrules[c]) {
                                        var u = i.allrules[c].alertText;
                                        u && (c = u)
                                    }
                                    i.showPrompts && e._showPrompt(d, c, "", !1, i, !0)
                                }
                            }
                        }
                        i.onAjaxFormComplete(!n, t, a, i)
                    } else i.onAjaxFormComplete(!0, t, a, i)
                }
            })
        },
        _validateField: function(t, i, a) {
            if (t.attr("id") || (t.attr("id", "form-validation-field-" + $.validationEngine.fieldIdCounter), ++$.validationEngine.fieldIdCounter), t.hasClass(i.ignoreFieldsWithClass)) return !1;
            if (!i.validateNonVisibleFields && (t.is(":hidden") && !i.prettySelect || t.parent().is(":hidden"))) return !1;
            var n = t.attr(i.validateAttribute),
                r = /validate\[(.*)\]/.exec(n);
            if (!r) return !1;
            var s = r[1],
                o = s.split(/\[|,|\]/),
                l = !1,
                d = t.attr("name"),
                c = "",
                u = "",
                h = !1,
                p = !1;
            i.isError = !1, i.showArrow = !0, i.maxErrorsPerField > 0 && (p = !0);
            for (var g = $(t.closest("form, .validationEngineContainer")), f = 0; f < o.length; f++) o[f] = o[f].replace(" ", ""), "" === o[f] && delete o[f];
            for (var f = 0, m = 0; f < o.length; f++) {
                if (p && m >= i.maxErrorsPerField) {
                    if (!h) {
                        var v = $.inArray("required", o);
                        h = -1 != v && v >= f
                    }
                    break
                }
                var y = void 0;
                switch (o[f]) {
                    case "required":
                        h = !0, y = e._getErrorMessage(g, t, o[f], o, f, i, e._required);
                        break;
                    case "custom":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._custom);
                        break;
                    case "groupRequired":
                        var b = "[" + i.validateAttribute + "*=" + o[f + 1] + "]",
                            _ = g.find(b).eq(0);
                        _[0] != t[0] && (e._validateField(_, i, a), i.showArrow = !0), y = e._getErrorMessage(g, t, o[f], o, f, i, e._groupRequired), y && (h = !0), i.showArrow = !1;
                        break;
                    case "ajax":
                        y = e._ajax(t, o, f, i), y && (u = "load");
                        break;
                    case "minSize":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._minSize);
                        break;
                    case "maxSize":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._maxSize);
                        break;
                    case "min":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._min);
                        break;
                    case "max":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._max);
                        break;
                    case "past":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._past);
                        break;
                    case "future":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._future);
                        break;
                    case "dateRange":
                        var b = "[" + i.validateAttribute + "*=" + o[f + 1] + "]";
                        i.firstOfGroup = g.find(b).eq(0), i.secondOfGroup = g.find(b).eq(1), (i.firstOfGroup[0].value || i.secondOfGroup[0].value) && (y = e._getErrorMessage(g, t, o[f], o, f, i, e._dateRange)), y && (h = !0), i.showArrow = !1;
                        break;
                    case "dateTimeRange":
                        var b = "[" + i.validateAttribute + "*=" + o[f + 1] + "]";
                        i.firstOfGroup = g.find(b).eq(0), i.secondOfGroup = g.find(b).eq(1), (i.firstOfGroup[0].value || i.secondOfGroup[0].value) && (y = e._getErrorMessage(g, t, o[f], o, f, i, e._dateTimeRange)), y && (h = !0), i.showArrow = !1;
                        break;
                    case "maxCheckbox":
                        t = $(g.find("input[name='" + d + "']")), y = e._getErrorMessage(g, t, o[f], o, f, i, e._maxCheckbox);
                        break;
                    case "minCheckbox":
                        t = $(g.find("input[name='" + d + "']")), y = e._getErrorMessage(g, t, o[f], o, f, i, e._minCheckbox);
                        break;
                    case "equals":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._equals);
                        break;
                    case "funcCall":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._funcCall);
                        break;
                    case "creditCard":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._creditCard);
                        break;
                    case "condRequired":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._condRequired), void 0 !== y && (h = !0);
                        break;
                    case "funcCallRequired":
                        y = e._getErrorMessage(g, t, o[f], o, f, i, e._funcCallRequired), void 0 !== y && (h = !0)
                }
                var x = !1;
                if ("object" == typeof y) switch (y.status) {
                    case "_break":
                        x = !0;
                        break;
                    case "_error":
                        y = y.message;
                        break;
                    case "_error_no_prompt":
                        return !0
                }
                if (0 == f && 0 == s.indexOf("funcCallRequired") && void 0 !== y && (c += y + "<br/>", i.isError = !0, m++, x = !0), x) break;
                "string" == typeof y && (c += y + "<br/>", i.isError = !0, m++)
            }!h && !t.val() && t.val().length < 1 && $.inArray("equals", o) < 0 && (i.isError = !1);
            var w = t.prop("type"),
                k = t.data("promptPosition") || i.promptPosition;
            ("radio" == w || "checkbox" == w) && g.find("input[name='" + d + "']").size() > 1 && (t = $("inline" === k ? g.find("input[name='" + d + "'][type!=hidden]:last") : g.find("input[name='" + d + "'][type!=hidden]:first")), i.showArrow = i.showArrowOnRadioAndCheckbox), t.is(":hidden") && i.prettySelect && (t = g.find("#" + i.usePrefix + e._jqSelector(t.attr("id")) + i.useSuffix)), i.isError && i.showPrompts ? e._showPrompt(t, c, u, !1, i) : l || e._closePrompt(t), l || t.trigger("jqv.field.result", [t, i.isError, c]);
            var D = $.inArray(t[0], i.InvalidFields);
            return -1 == D ? i.isError && i.InvalidFields.push(t[0]) : i.isError || i.InvalidFields.splice(D, 1), e._handleStatusCssClasses(t, i), i.isError && i.onFieldFailure && i.onFieldFailure(t), !i.isError && i.onFieldSuccess && i.onFieldSuccess(t), i.isError
        },
        _handleStatusCssClasses: function(e, t) {
            t.addSuccessCssClassToField && e.removeClass(t.addSuccessCssClassToField), t.addFailureCssClassToField && e.removeClass(t.addFailureCssClassToField), t.addSuccessCssClassToField && !t.isError && e.addClass(t.addSuccessCssClassToField), t.addFailureCssClassToField && t.isError && e.addClass(t.addFailureCssClassToField)
        },
        _getErrorMessage: function(t, i, a, n, r, s, o) {
            var l = jQuery.inArray(a, n);
            if ("custom" === a || "funcCall" === a || "funcCallRequired" === a) {
                var d = n[l + 1];
                a = a + "[" + d + "]", delete n[l]
            }
            var c = a,
                u = i.attr("data-validation-engine") ? i.attr("data-validation-engine") : i.attr("class"),
                h = u.split(" "),
                p;
            if (p = "future" == a || "past" == a || "maxCheckbox" == a || "minCheckbox" == a ? o(t, i, n, r, s) : o(i, n, r, s), void 0 != p) {
                var g = e._getCustomErrorMessage($(i), h, c, s);
                g && (p = g)
            }
            return p
        },
        _getCustomErrorMessage: function(t, i, a, n) {
            var r = !1,
                s = /^custom\[.*\]$/.test(a) ? e._validityProp.custom : e._validityProp[a];
            if (void 0 != s && (r = t.attr("data-errormessage-" + s), void 0 != r)) return r;
            if (r = t.attr("data-errormessage"), void 0 != r) return r;
            var o = "#" + t.attr("id");
            if ("undefined" != typeof n.custom_error_messages[o] && "undefined" != typeof n.custom_error_messages[o][a]) r = n.custom_error_messages[o][a].message;
            else if (i.length > 0)
                for (var l = 0; l < i.length && i.length > 0; l++) {
                    var d = "." + i[l];
                    if ("undefined" != typeof n.custom_error_messages[d] && "undefined" != typeof n.custom_error_messages[d][a]) {
                        r = n.custom_error_messages[d][a].message;
                        break
                    }
                }
            return r || "undefined" == typeof n.custom_error_messages[a] || "undefined" == typeof n.custom_error_messages[a].message || (r = n.custom_error_messages[a].message), r
        },
        _validityProp: {
            required: "value-missing",
            custom: "custom-error",
            groupRequired: "value-missing",
            ajax: "custom-error",
            minSize: "range-underflow",
            maxSize: "range-overflow",
            min: "range-underflow",
            max: "range-overflow",
            past: "type-mismatch",
            future: "type-mismatch",
            dateRange: "type-mismatch",
            dateTimeRange: "type-mismatch",
            maxCheckbox: "range-overflow",
            minCheckbox: "range-underflow",
            equals: "pattern-mismatch",
            funcCall: "custom-error",
            funcCallRequired: "custom-error",
            creditCard: "pattern-mismatch",
            condRequired: "value-missing"
        },
        _required: function(e, t, i, a, n) {
            switch (e.prop("type")) {
                case "radio":
                case "checkbox":
                    if (n) {
                        if (!e.prop("checked")) return a.allrules[t[i]].alertTextCheckboxMultiple;
                        break
                    }
                    var r = e.closest("form, .validationEngineContainer"),
                        s = e.attr("name");
                    if (0 == r.find("input[name='" + s + "']:checked").size()) return 1 == r.find("input[name='" + s + "']:visible").size() ? a.allrules[t[i]].alertTextCheckboxe : a.allrules[t[i]].alertTextCheckboxMultiple;
                    break;
                case "text":
                case "password":
                case "textarea":
                case "file":
                case "select-one":
                case "select-multiple":
                default:
                    var o = $.trim(e.val()),
                        l = $.trim(e.attr("data-validation-placeholder")),
                        d = $.trim(e.attr("placeholder"));
                    if (!o || l && o == l || d && o == d) return a.allrules[t[i]].alertText
            }
        },
        _groupRequired: function(t, i, a, n) {
            var r = "[" + n.validateAttribute + "*=" + i[a + 1] + "]",
                s = !1;
            return t.closest("form, .validationEngineContainer").find(r).each(function() {
                return e._required($(this), i, a, n) ? void 0 : (s = !0, !1)
            }), s ? void 0 : n.allrules[i[a]].alertText
        },
        _custom: function(e, t, i, a) {
            var n = t[i + 1],
                r = a.allrules[n],
                s;
            if (!r) return void alert("jqv:custom rule not found - " + n);
            if (r.regex) {
                var o = r.regex;
                if (!o) return void alert("jqv:custom regex not found - " + n);
                var l = new RegExp(o);
                if (!l.test(e.val())) return a.allrules[n].alertText
            } else {
                if (!r.func) return void alert("jqv:custom type not allowed " + n);
                if (s = r.func, "function" != typeof s) return void alert("jqv:custom parameter 'function' is no function - " + n);
                if (!s(e, t, i, a)) return a.allrules[n].alertText
            }
        },
        _funcCall: function(e, t, i, a) {
            var n = t[i + 1],
                r;
            if (n.indexOf(".") > -1) {
                for (var s = n.split("."), o = window; s.length;) o = o[s.shift()];
                r = o
            } else r = window[n] || a.customFunctions[n];
            return "function" == typeof r ? r(e, t, i, a) : void 0
        },
        _funcCallRequired: function(t, i, a, n) {
            return e._funcCall(t, i, a, n)
        },
        _equals: function(e, t, i, a) {
            var n = t[i + 1];
            return e.val() != $("#" + n).val() ? a.allrules.equals.alertText : void 0
        },
        _maxSize: function(e, t, i, a) {
            var n = t[i + 1],
                r = e.val().length;
            if (r > n) {
                var s = a.allrules.maxSize;
                return s.alertText + n + s.alertText2
            }
        },
        _minSize: function(e, t, i, a) {
            var n = t[i + 1],
                r = e.val().length;
            if (n > r) {
                var s = a.allrules.minSize;
                return s.alertText + n + s.alertText2
            }
        },
        _min: function(e, t, i, a) {
            var n = parseFloat(t[i + 1]),
                r = parseFloat(e.val());
            if (n > r) {
                var s = a.allrules.min;
                return s.alertText2 ? s.alertText + n + s.alertText2 : s.alertText + n
            }
        },
        _max: function(e, t, i, a) {
            var n = parseFloat(t[i + 1]),
                r = parseFloat(e.val());
            if (r > n) {
                var s = a.allrules.max;
                return s.alertText2 ? s.alertText + n + s.alertText2 : s.alertText + n
            }
        },
        _past: function(t, i, a, n, r) {
            var s = a[n + 1],
                o = $(t.find("*[name='" + s.replace(/^#+/, "") + "']")),
                l;
            if ("now" == s.toLowerCase()) l = new Date;
            else if (void 0 != o.val()) {
                if (o.is(":disabled")) return;
                l = e._parseDate(o.val())
            } else l = e._parseDate(s);
            var d = e._parseDate(i.val());
            if (d > l) {
                var c = r.allrules.past;
                return c.alertText2 ? c.alertText + e._dateToString(l) + c.alertText2 : c.alertText + e._dateToString(l)
            }
        },
        _future: function(t, i, a, n, r) {
            var s = a[n + 1],
                o = $(t.find("*[name='" + s.replace(/^#+/, "") + "']")),
                l;
            if ("now" == s.toLowerCase()) l = new Date;
            else if (void 0 != o.val()) {
                if (o.is(":disabled")) return;
                l = e._parseDate(o.val())
            } else l = e._parseDate(s);
            var d = e._parseDate(i.val());
            if (l > d) {
                var c = r.allrules.future;
                return c.alertText2 ? c.alertText + e._dateToString(l) + c.alertText2 : c.alertText + e._dateToString(l)
            }
        },
        _isDate: function(e) {
            var t = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);
            return t.test(e)
        },
        _isDateTime: function(e) {
            var t = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);
            return t.test(e)
        },
        _dateCompare: function(e, t) {
            return new Date(e.toString()) < new Date(t.toString())
        },
        _dateRange: function(t, i, a, n) {
            return !n.firstOfGroup[0].value && n.secondOfGroup[0].value || n.firstOfGroup[0].value && !n.secondOfGroup[0].value ? n.allrules[i[a]].alertText + n.allrules[i[a]].alertText2 : e._isDate(n.firstOfGroup[0].value) && e._isDate(n.secondOfGroup[0].value) && e._dateCompare(n.firstOfGroup[0].value, n.secondOfGroup[0].value) ? void 0 : n.allrules[i[a]].alertText + n.allrules[i[a]].alertText2
        },
        _dateTimeRange: function(t, i, a, n) {
            return !n.firstOfGroup[0].value && n.secondOfGroup[0].value || n.firstOfGroup[0].value && !n.secondOfGroup[0].value ? n.allrules[i[a]].alertText + n.allrules[i[a]].alertText2 : e._isDateTime(n.firstOfGroup[0].value) && e._isDateTime(n.secondOfGroup[0].value) && e._dateCompare(n.firstOfGroup[0].value, n.secondOfGroup[0].value) ? void 0 : n.allrules[i[a]].alertText + n.allrules[i[a]].alertText2
        },
        _maxCheckbox: function(e, t, i, a, n) {
            var r = i[a + 1],
                s = t.attr("name"),
                o = e.find("input[name='" + s + "']:checked").size();
            return o > r ? (n.showArrow = !1, n.allrules.maxCheckbox.alertText2 ? n.allrules.maxCheckbox.alertText + " " + r + " " + n.allrules.maxCheckbox.alertText2 : n.allrules.maxCheckbox.alertText) : void 0
        },
        _minCheckbox: function(e, t, i, a, n) {
            var r = i[a + 1],
                s = t.attr("name"),
                o = e.find("input[name='" + s + "']:checked").size();
            return r > o ? (n.showArrow = !1, n.allrules.minCheckbox.alertText + " " + r + " " + n.allrules.minCheckbox.alertText2) : void 0
        },
        _creditCard: function(e, t, i, a) {
            var n = !1,
                r = e.val().replace(/ +/g, "").replace(/-+/g, ""),
                s = r.length;
            if (s >= 14 && 16 >= s && parseInt(r) > 0) {
                var o = 0,
                    i = s - 1,
                    l = 1,
                    d, c = new String;
                do d = parseInt(r.charAt(i)), c += l++ % 2 == 0 ? 2 * d : d; while (--i >= 0);
                for (i = 0; i < c.length; i++) o += parseInt(c.charAt(i));
                n = o % 10 == 0
            }
            return n ? void 0 : a.allrules.creditCard.alertText
        },
        _ajax: function(t, i, a, n) {
            var r = i[a + 1],
                s = n.allrules[r],
                o = s.extraData,
                l = s.extraDataDynamic,
                d = {
                    fieldId: t.attr("id"),
                    fieldValue: t.val()
                };
            if ("object" == typeof o) $.extend(d, o);
            else if ("string" == typeof o)
                for (var c = o.split("&"), a = 0; a < c.length; a++) {
                    var u = c[a].split("=");
                    u[0] && u[0] && (d[u[0]] = u[1])
                }
            if (l)
                for (var h = [], p = String(l).split(","), a = 0; a < p.length; a++) {
                    var g = p[a];
                    if ($(g).length) {
                        var f = t.closest("form, .validationEngineContainer").find(g).val(),
                            m = g.replace("#", "") + "=" + escape(f);
                        d[g.replace("#", "")] = f
                    }
                }
            return "field" == n.eventTrigger && delete n.ajaxValidCache[t.attr("id")], n.isError || e._checkAjaxFieldStatus(t.attr("id"), n) ? void 0 : ($.ajax({
                type: n.ajaxFormValidationMethod,
                url: s.url,
                cache: !1,
                dataType: "json",
                data: d,
                field: t,
                rule: s,
                methods: e,
                options: n,
                beforeSend: function() {},
                error: function(t, i) {
                    n.onFailure ? n.onFailure(t, i) : e._ajaxError(t, i)
                },
                success: function(i) {
                    var a = i[0],
                        r = $("#" + a).eq(0);
                    if (1 == r.length) {
                        var o = i[1],
                            l = i[2];
                        if (o) {
                            if (n.ajaxValidCache[a] = !0, l) {
                                if (n.allrules[l]) {
                                    var d = n.allrules[l].alertTextOk;
                                    d && (l = d)
                                }
                            } else l = s.alertTextOk;
                            n.showPrompts && (l ? e._showPrompt(r, l, "pass", !0, n) : e._closePrompt(r)), "submit" == n.eventTrigger && t.closest("form").submit()
                        } else {
                            if (n.ajaxValidCache[a] = !1, n.isError = !0, l) {
                                if (n.allrules[l]) {
                                    var d = n.allrules[l].alertText;
                                    d && (l = d)
                                }
                            } else l = s.alertText;
                            n.showPrompts && e._showPrompt(r, l, "", !0, n)
                        }
                    }
                    r.trigger("jqv.field.result", [r, n.isError, l])
                }
            }), s.alertTextLoad)
        },
        _ajaxError: function(e, t) {
            0 == e.status && null == t ? alert("The page is not served from a server! ajax call failed") : "undefined" != typeof console && console.log("Ajax error: " + e.status + " " + t)
        },
        _dateToString: function(e) {
            return e.getFullYear() + "-" + (e.getMonth() + 1) + "-" + e.getDate()
        },
        _parseDate: function(e) {
            var t = e.split("-");
            return t == e && (t = e.split("/")), t == e ? (t = e.split("."), new Date(t[2], t[1] - 1, t[0])) : new Date(t[0], t[1] - 1, t[2])
        },
        _showPrompt: function(t, i, a, n, r, s) {
            t.data("jqv-prompt-at") instanceof jQuery ? t = t.data("jqv-prompt-at") : t.data("jqv-prompt-at") && (t = $(t.data("jqv-prompt-at")));
            var o = e._getPrompt(t);
            s && (o = !1), $.trim(i) && (o ? e._updatePrompt(t, o, i, a, n, r) : e._buildPrompt(t, i, a, n, r))
        },
        _buildPrompt: function(t, i, a, n, r) {
            var s = $("<div>");
            switch (s.addClass(e._getClassName(t.attr("id")) + "formError"), s.addClass("parentForm" + e._getClassName(t.closest("form, .validationEngineContainer").attr("id"))), s.addClass("formError"), a) {
                case "pass":
                    s.addClass("greenPopup");
                    break;
                case "load":
                    s.addClass("blackPopup")
            }
            n && s.addClass("ajaxed");
            var o = $("<div>").addClass("formErrorContent").html(i).appendTo(s),
                l = t.data("promptPosition") || r.promptPosition;
            if (r.showArrow) {
                var d = $("<div>").addClass("formErrorArrow");
                if ("string" == typeof l) {
                    var c = l.indexOf(":"); - 1 != c && (l = l.substring(0, c))
                }
                switch (l) {
                    case "bottomLeft":
                    case "bottomRight":
                        s.find(".formErrorContent").before(d), d.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');
                        break;
                    case "topLeft":
                    case "topRight":
                        d.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>'), s.append(d)
                }
            }
            r.addPromptClass && s.addClass(r.addPromptClass);
            var u = t.attr("data-required-class");
            if (void 0 !== u) s.addClass(u);
            else if (r.prettySelect && $("#" + t.attr("id")).next().is("select")) {
                var h = $("#" + t.attr("id").substr(r.usePrefix.length).substring(r.useSuffix.length)).attr("data-required-class");
                void 0 !== h && s.addClass(h)
            }
            s.css({
                opacity: 0
            }), "inline" === l ? (s.addClass("inline"), "undefined" != typeof t.attr("data-prompt-target") && $("#" + t.attr("data-prompt-target")).length > 0 ? s.appendTo($("#" + t.attr("data-prompt-target"))) : t.after(s)) : t.before(s);
            var c = e._calculatePosition(t, s, r);
            return s.css({
                position: "inline" === l ? "relative" : "absolute",
                top: c.callerTopPosition,
                left: c.callerleftPosition,
                marginTop: c.marginTopSize,
                opacity: 0
            }).data("callerField", t), r.autoHidePrompt && setTimeout(function() {
                s.animate({
                    opacity: 0
                }, function() {
                    s.closest(".formError").remove()
                })
            }, r.autoHideDelay), s.animate({
                opacity: .87
            })
        },
        _updatePrompt: function(t, i, a, n, r, s, o) {
            if (i) {
                "undefined" != typeof n && ("pass" == n ? i.addClass("greenPopup") : i.removeClass("greenPopup"), "load" == n ? i.addClass("blackPopup") : i.removeClass("blackPopup")), r ? i.addClass("ajaxed") : i.removeClass("ajaxed"), i.find(".formErrorContent").html(a);
                var l = e._calculatePosition(t, i, s),
                    d = {
                        top: l.callerTopPosition,
                        left: l.callerleftPosition,
                        marginTop: l.marginTopSize,
                        opacity: .87
                    };
                i.css({
                    opacity: 0,
                    display: "block"
                }), o ? i.css(d) : i.animate(d)
            }
        },
        _closePrompt: function(t) {
            var i = e._getPrompt(t);
            i && i.fadeTo("fast", 0, function() {
                i.closest(".formError").remove()
            })
        },
        closePrompt: function(t) {
            return e._closePrompt(t)
        },
        _getPrompt: function(t) {
            var i = $(t).closest("form, .validationEngineContainer").attr("id"),
                a = e._getClassName(t.attr("id")) + "formError",
                n = $("." + e._escapeExpression(a) + ".parentForm" + e._getClassName(i))[0];
            return n ? $(n) : void 0
        },
        _escapeExpression: function(e) {
            return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g, "\\$1")
        },
        isRTL: function(e) {
            var t = $(document),
                i = $("body"),
                a = e && e.hasClass("rtl") || e && "rtl" === (e.attr("dir") || "").toLowerCase() || t.hasClass("rtl") || "rtl" === (t.attr("dir") || "").toLowerCase() || i.hasClass("rtl") || "rtl" === (i.attr("dir") || "").toLowerCase();
            return Boolean(a)
        },
        _calculatePosition: function(e, t, i) {
            var a, n, r, s = e.width(),
                o = e.position().left,
                l = e.position().top,
                d = e.height(),
                c = t.height();
            a = n = 0, r = -c;
            var u = e.data("promptPosition") || i.promptPosition,
                h = "",
                p = "",
                g = 0,
                f = 0;
            switch ("string" == typeof u && -1 != u.indexOf(":") && (h = u.substring(u.indexOf(":") + 1), u = u.substring(0, u.indexOf(":")), -1 != h.indexOf(",") && (p = h.substring(h.indexOf(",") + 1), h = h.substring(0, h.indexOf(",")), f = parseInt(p), isNaN(f) && (f = 0)), g = parseInt(h), isNaN(h) && (h = 0)), u) {
                default:
                    case "topRight":
                    n += o + s - 27,
                a += l;
                break;
                case "topLeft":
                        a += l,
                    n += o;
                    break;
                case "centerRight":
                        a = l + 4,
                    r = 0,
                    n = o + e.outerWidth(!0) + 5;
                    break;
                case "centerLeft":
                        n = o - (t.width() + 2),
                    a = l + 4,
                    r = 0;
                    break;
                case "bottomLeft":
                        a = l + e.height() + 5,
                    r = 0,
                    n = o;
                    break;
                case "bottomRight":
                        n = o + s - 27,
                    a = l + e.height() + 5,
                    r = 0;
                    break;
                case "inline":
                        n = 0,
                    a = 0,
                    r = 0
            }
            return n += g, a += f, {
                callerTopPosition: a + "px",
                callerleftPosition: n + "px",
                marginTopSize: r + "px"
            }
        },
        _saveOptions: function(e, t) {
            if ($.validationEngineLanguage) var i = $.validationEngineLanguage.allRules;
            else $.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");
            $.validationEngine.defaults.allrules = i;
            var a = $.extend(!0, {}, $.validationEngine.defaults, t);
            return e.data("jqv", a), a
        },
        _getClassName: function(e) {
            return e ? e.replace(/:/g, "_").replace(/\./g, "_") : void 0
        },
        _jqSelector: function(e) {
            return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, "\\$1")
        },
        _condRequired: function(t, i, a, n) {
            var r, s;
            for (r = a + 1; r < i.length; r++)
                if (s = jQuery("#" + i[r]).first(), s.length && void 0 == e._required(s, ["required"], 0, n, !0)) return e._required(t, ["required"], 0, n)
        },
        _submitButtonClick: function(e) {
            var t = $(this),
                i = t.closest("form, .validationEngineContainer");
            i.data("jqv_submitButton", t.attr("id"))
        }
    };
    $.fn.validationEngine = function(t) {
        var i = $(this);
        return i[0] ? "string" == typeof t && "_" != t.charAt(0) && e[t] ? ("showPrompt" != t && "hide" != t && "hideAll" != t && e.init.apply(i), e[t].apply(i, Array.prototype.slice.call(arguments, 1))) : "object" != typeof t && t ? void $.error("Method " + t + " does not exist in jQuery.validationEngine") : (e.init.apply(i, arguments), e.attach.apply(i)) : i
    }, $.validationEngine = {
        fieldIdCounter: 0,
        defaults: {
            validationEventTrigger: "blur",
            scroll: !0,
            focusFirstField: !0,
            showPrompts: !0,
            validateNonVisibleFields: !1,
            ignoreFieldsWithClass: "ignoreMe",
            promptPosition: "topRight",
            bindMethod: "bind",
            inlineAjax: !1,
            ajaxFormValidation: !1,
            ajaxFormValidationURL: !1,
            ajaxFormValidationMethod: "get",
            onAjaxFormComplete: $.noop,
            onBeforeAjaxFormValidation: $.noop,
            onValidationComplete: !1,
            doNotShowAllErrosOnSubmit: !1,
            custom_error_messages: {},
            binded: !0,
            notEmpty: !1,
            showArrow: !0,
            showArrowOnRadioAndCheckbox: !1,
            isError: !1,
            maxErrorsPerField: !1,
            ajaxValidCache: {},
            autoPositionUpdate: !1,
            InvalidFields: [],
            onFieldSuccess: !1,
            onFieldFailure: !1,
            onSuccess: !1,
            onFailure: !1,
            validateAttribute: "class",
            addSuccessCssClassToField: "",
            addFailureCssClassToField: "",
            autoHidePrompt: !1,
            autoHideDelay: 1e4,
            fadeDuration: 300,
            prettySelect: !1,
            addPromptClass: "",
            usePrefix: "",
            useSuffix: "",
            showOneMessage: !1
        }
    }, $(function() {
        $.validationEngine.defaults.promptPosition = e.isRTL() ? "topLeft" : "topRight"
    })
}(jQuery),
function($) {
    $.fn.validationEngineLanguage = function() {}, $.validationEngineLanguage = {
        newLang: function() {
            $.validationEngineLanguage.allRules = {
                required: {
                    regex: "none",
                    alertText: "* This field is required",
                    alertTextCheckboxMultiple: "* Please select an option",
                    alertTextCheckboxe: "* This checkbox is required",
                    alertTextDateRange: "* Both date range fields are required"
                },
                dateRange: {
                    regex: "none",
                    alertText: "* Invalid ",
                    alertText2: "Date Range"
                },
                dateTimeRange: {
                    regex: "none",
                    alertText: "* Invalid ",
                    alertText2: "Date Time Range"
                },
                minSize: {
                    regex: "none",
                    alertText: "* Minimum ",
                    alertText2: " characters allowed"
                },
                maxSize: {
                    regex: "none",
                    alertText: "* Maximum ",
                    alertText2: " characters allowed"
                },
                groupRequired: {
                    regex: "none",
                    alertText: "* You must fill one of the following fields"
                },
                min: {
                    regex: "none",
                    alertText: "* Minimum value is "
                },
                max: {
                    regex: "none",
                    alertText: "* Maximum value is "
                },
                past: {
                    regex: "none",
                    alertText: "* Date prior to "
                },
                future: {
                    regex: "none",
                    alertText: "* Date past "
                },
                maxCheckbox: {
                    regex: "none",
                    alertText: "* Maximum ",
                    alertText2: " options allowed"
                },
                minCheckbox: {
                    regex: "none",
                    alertText: "* Please select ",
                    alertText2: " options"
                },
                equals: {
                    regex: "none",
                    alertText: "* Fields do not match"
                },
                telephone: {
                    regex: /^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,
                    alertText: "* Invalid phone number"
                },
                email: {
                    regex: /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
                    alertText: "* Invalid email address"
                },
                integer: {
                    regex: /^[\-\+]?\d+$/,
                    alertText: "* Not a valid integer"
                },
                number: {
                    regex: /^[\-\+]?(([0-9]+)([\.,]([0-9]+))?|([\.,]([0-9]+))?)$/,
                    alertText: "* Invalid floating decimal number"
                },
                date: {
                    regex: /^(0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])[\/\-]\d{4}$/,
                    alertText: "* Invalid date, must be in MM/DD/YYYY format"
                },
                ipv4: {
                    regex: /^((([01]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))[.]){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))$/,
                    alertText: "* Invalid IP address"
                },
                url: {
                    regex: /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,
                    alertText: "* Invalid URL"
                },
                onlyNumber: {
                    regex: /^[0-9\ ]+$/,
                    alertText: "* Numbers only"
                },
                onlyLetter: {
                    regex: /^[a-zA-Z\ \']+$/,
                    alertText: "* Letters only"
                },
                noSpecialCaracters: {
                    regex: /^[0-9a-zA-Z]+$/,
                    alertText: "* No special characters allowed"
                },
                ajaxUserCall: {
                    url: "ajaxValidateFieldUser",
                    extraData: "name=eric",
                    alertText: "* This user is already taken",
                    alertTextLoad: "* Validating, please wait"
                },
                ajaxUserCallPhp: {
                    url: "phpajax/ajaxValidateFieldUser.php",
                    extraData: "name=eric",
                    alertTextOk: "* This username is available",
                    alertText: "* This user is already taken",
                    alertTextLoad: "* Validating, please wait"
                },
                ajaxNameCall: {
                    url: "ajaxValidateFieldName",
                    alertText: "* This name is already taken",
                    alertTextOk: "* This name is available",
                    alertTextLoad: "* Validating, please wait"
                },
                ajaxNameCallPhp: {
                    url: "phpajax/ajaxValidateFieldName.php",
                    alertText: "* This name is already taken",
                    alertTextLoad: "* Validating, please wait"
                },
                validate2fields: {
                    alertText: "* Please input HELLO"
                },
                dateFormat: {
                    regex: /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/,
                    alertText: "* Invalid Date"
                },
                dateTimeFormat: {
                    regex: /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/,
                    alertText: "* Invalid Date or Date Format",
                    alertText2: "Expected Format: ",
                    alertText3: "mm/dd/yyyy hh:mm:ss AM|PM or ",
                    alertText4: "yyyy-mm-dd hh:mm:ss AM|PM"
                }
            }
        }
    }, $.validationEngineLanguage.newLang()
}(jQuery), Date.dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], Date.abbrDayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], Date.monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], Date.abbrMonthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], Date.firstDayOfWeek = 1, Date.format = "mm/dd/yyyy", Date.fullYearStart = "20",
    function() {
        function e(e, t) {
            Date.prototype[e] || (Date.prototype[e] = t)
        }
        e("isLeapYear", function() {
            var e = this.getFullYear();
            return e % 4 == 0 && e % 100 != 0 || e % 400 == 0
        }), e("isWeekend", function() {
            return 0 == this.getDay() || 6 == this.getDay()
        }), e("isWeekDay", function() {
            return !this.isWeekend()
        }), e("getDaysInMonth", function() {
            return [31, this.isLeapYear() ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][this.getMonth()]
        }), e("getDayName", function(e) {
            return e ? Date.abbrDayNames[this.getDay()] : Date.dayNames[this.getDay()]
        }), e("getMonthName", function(e) {
            return e ? Date.abbrMonthNames[this.getMonth()] : Date.monthNames[this.getMonth()]
        }), e("getDayOfYear", function() {
            var e = new Date("1/1/" + this.getFullYear());
            return Math.floor((this.getTime() - e.getTime()) / 864e5)
        }), e("getWeekOfYear", function() {
            return Math.ceil(this.getDayOfYear() / 7)
        }), e("setDayOfYear", function(e) {
            return this.setMonth(0), this.setDate(e), this
        }), e("addYears", function(e) {
            return this.setFullYear(this.getFullYear() + e), this
        }), e("addMonths", function(e) {
            var t = this.getDate();
            return this.setMonth(this.getMonth() + e), t > this.getDate() && this.addDays(-this.getDate()), this
        }), e("addDays", function(e) {
            return this.setTime(this.getTime() + 864e5 * e), this
        }), e("addHours", function(e) {
            return this.setHours(this.getHours() + e), this
        }), e("addMinutes", function(e) {
            return this.setMinutes(this.getMinutes() + e), this
        }), e("addSeconds", function(e) {
            return this.setSeconds(this.getSeconds() + e), this
        }), e("zeroTime", function() {
            return this.setMilliseconds(0), this.setSeconds(0), this.setMinutes(0), this.setHours(0), this
        }), e("asString", function(e) {
            var i = e || Date.format;
            return i.split("yyyy").join(this.getFullYear()).split("yy").join((this.getFullYear() + "").substring(2)).split("mmmm").join(this.getMonthName(!1)).split("mmm").join(this.getMonthName(!0)).split("mm").join(t(this.getMonth() + 1)).split("dd").join(t(this.getDate())).split("hh").join(t(this.getHours())).split("min").join(t(this.getMinutes())).split("ss").join(t(this.getSeconds()))
        }), Date.fromString = function(e, t) {
            var i = t || Date.format,
                a = new Date("01/01/1977"),
                n = 0,
                r = i.indexOf("mmmm");
            if (r > -1) {
                for (var s = 0; s < Date.monthNames.length; s++) {
                    var o = e.substr(r, Date.monthNames[s].length);
                    if (Date.monthNames[s] == o) {
                        n = Date.monthNames[s].length - 4;
                        break
                    }
                }
                a.setMonth(s)
            } else if (r = i.indexOf("mmm"), r > -1) {
                for (var o = e.substr(r, 3), s = 0; s < Date.abbrMonthNames.length && Date.abbrMonthNames[s] != o; s++);
                a.setMonth(s)
            } else a.setMonth(Number(e.substr(i.indexOf("mm"), 2)) - 1);
            var l = i.indexOf("yyyy");
            l > -1 ? (l > r && (l += n), a.setFullYear(Number(e.substr(l, 4)))) : (l > r && (l += n), a.setFullYear(Number(Date.fullYearStart + e.substr(i.indexOf("yy"), 2))));
            var d = i.indexOf("dd");
            return d > r && (d += n), a.setDate(Number(e.substr(d, 2))), isNaN(a.getTime()) ? !1 : a
        };
        var t = function(e) {
            var t = "0" + e;
            return t.substring(t.length - 2)
        }
    }(),
    function($) {
        $("html").addClass("stylish-select"), Array.prototype.indexOf || (Array.prototype.indexOf = function(e) {
            if (void 0 === this || null === this) throw new TypeError;
            var t = Object(this),
                i = t.length >>> 0;
            if (0 === i) return -1;
            var a = 0;
            if (arguments.length > 0 && (a = Number(arguments[1]), a !== a ? a = 0 : 0 !== a && a !== 1 / 0 && a !== -(1 / 0) && (a = (a > 0 || -1) * Math.floor(Math.abs(a)))), a >= i) return -1;
            for (var n = a >= 0 ? a : Math.max(i - Math.abs(a), 0); i > n; n++)
                if (n in t && t[n] === e) return n;
            return -1
        }), $.fn.extend({
            getSetSSValue: function(e) {
                return e ? ($(this).val(e).change(), this) : $(this).find(":selected").val()
            },
            resetSS: function() {
                var e = $(this).data("ssOpts");
                $this = $(this), $this.next().remove(), $this.unbind(".sSelect").sSelect(e)
            }
        }), $.fn.sSelect = function(e) {
            return this.each(function() {
                function t(e, t) {
                    var i = $(e).text(),
                        a = $(e).val(),
                        n = $(e).is(":disabled");
                    n || $(e).parents().is(":disabled") || w.push(i.charAt(0).toLowerCase()), t.append($("<li><a" + (n ? ' class="newListItemDisabled"' : "") + ' href="JavaScript:void(0);">' + i + "</a></li>").data({
                        key: a,
                        selected: $(e).is(":selected")
                    }))
                }

                function i() {
                    var e = v.offset().top,
                        t = $(window).height(),
                        i = $(window).scrollTop();
                    T > parseInt(g.ddMaxHeight) && (T = parseInt(g.ddMaxHeight)), e -= i, e + T >= t ? (b.css({
                        height: T
                    }), y.css({
                        top: "-" + T + "px",
                        height: T
                    }), f.onTop = !0) : (b.css({
                        height: T
                    }), y.css({
                        top: S + "px",
                        height: T
                    }), f.onTop = !1)
                }

                function a() {
                    v.css("position", "relative")
                }

                function n() {
                    v.css({
                        position: "static"
                    })
                }

                function r(e, t) {
                    1 == e && (x = _, f.change()), 1 == t && (_ = x, s(_)), y.hide(), n()
                }

                function s(e, t) {
                    if (-1 == e) m.text(g.defaultText), C.removeClass("hiLite");
                    else {
                        C.removeClass("hiLite").eq(e).addClass("hiLite");
                        var i = C.eq(e).text(),
                            a = C.eq(e).parent().data("key");
                        try {
                            f.val(a)
                        } catch (n) {
                            f[0].selectedIndex = e
                        }
                        if (m.text(i), 1 == t && (x = e, f.change()), y.is(":visible")) try {
                            C.eq(e).focus()
                        } catch (n) {}
                    }
                }

                function o(e) {
                    $(e).unbind("keydown.sSelect").bind("keydown.sSelect", function(e) {
                        var t = e.which;
                        switch (D = !0, t) {
                            case 40:
                            case 39:
                                return l(), !1;
                                break;
                            case 38:
                            case 37:
                                return d(), !1;
                                break;
                            case 33:
                            case 36:
                                return c(), !1;
                                break;
                            case 34:
                            case 35:
                                return u(), !1;
                                break;
                            case 13:
                            case 27:
                                return r(!0), !1;
                                break;
                            case 9:
                                return r(!0), h(), !1
                        }
                        keyPressed = String.fromCharCode(t).toLowerCase();
                        var i = w.indexOf(keyPressed);
                        return "undefined" != typeof i ? (++_, _ = w.indexOf(keyPressed, _), (-1 == _ || null == _ || k != keyPressed) && (_ = w.indexOf(keyPressed)), s(_), k = keyPressed, !1) : void 0
                    })
                }

                function l() {
                    F - 1 > _ && (++_, s(_))
                }

                function d() {
                    _ > 0 && (--_, s(_))
                }

                function c() {
                    _ = 0, s(_)
                }

                function u() {
                    _ = F - 1, s(_)
                }

                function h() {
                    var e = $("body").find("button,input,textarea,select"),
                        t = e.index(f);
                    return t > -1 && t + 1 < e.length && e.eq(t + 1).focus(), !1
                }
                var p = {
                        defaultText: "Please select",
                        animationSpeed: 0,
                        ddMaxHeight: "",
                        containerClass: ""
                    },
                    g = $.extend(p, e),
                    f = $(this),
                    m = $('<div class="selectedTxt"></div>'),
                    v = $('<div class="newListSelected ' + g.containerClass + (f.is(":disabled") ? " newListDisabled" : "") + '"></div>'),
                    y = $('<div class="SSContainerDivWrapper" style="visibility:hidden;"></div>'),
                    b = $('<ul class="newList"></ul>'),
                    _ = -1,
                    x = -1,
                    w = [],
                    k = !1,
                    D = !1,
                    C;
                if ($(this).data("ssOpts", e), v.insertAfter(f), v.attr("tabindex", f.attr("tabindex") || "0"), m.prependTo(v), b.appendTo(v), b.wrap(y), y = b.parent(), f.hide(), f.attr("id") && v.attr("id", "sSelect_" + f.attr("id")), !f.is(":disabled")) {
                    m.data("ssReRender", !m.is(":visible")), f.children().each(function() {
                        if ($(this).is("option")) t(this, b);
                        else {
                            var e = $(this).attr("label"),
                                i = $('<li class="newListOptionTitle ' + ($(this).is(":disabled") ? "newListOptionDisabled" : "") + '">' + e + "</li>"),
                                a = $("<ul></ul>");
                            i.appendTo(b), a.appendTo(i), $(this).children().each(function() {
                                t(this, a)
                            })
                        }
                    }), C = b.find("li a:not(.newListItemDisabled)").not(function() {
                        return $(this).parents().hasClass("newListOptionDisabled")
                    }), C.each(function(e) {
                        $(this).parent().data("selected") && (g.defaultText = $(this).html(), _ = x = e)
                    });
                    var T = b.height(),
                        S = v.height(),
                        F = C.length; - 1 != _ ? s(_) : m.text(g.defaultText), i(), $(window).bind("resize.sSelect scroll.sSelect", i), m.bind("click.sSelect", function(e) {
                        e.stopPropagation(), $(this).data("ssReRender") && (T = b.height("").height(), y.height(""), S = v.height(), $(this).data("ssReRender", !1), i()), $(".SSContainerDivWrapper").not($(this).next()).hide().parent().css("position", "static").removeClass("newListSelFocus"), y.toggle(), a(), -1 == _ && (_ = 0);
                        try {
                            C.eq(_).focus()
                        } catch (t) {}
                    }), C.bind("click.sSelect", function(e) {
                        var t = $(e.target);
                        _ = C.index(t), D = !0, s(_, !0), r()
                    }), C.bind("mouseenter.sSelect", function(e) {
                        var t = $(e.target);
                        t.addClass("newListHover")
                    }).bind("mouseleave.sSelect", function(e) {
                        var t = $(e.target);
                        t.removeClass("newListHover")
                    }), f.bind("change.sSelect", function(e) {
                        var t = $(e.target);
                        if (1 == D) return D = !1, !1;
                        var i = t.find(":selected");
                        _ = t.find("option").index(i), s(_)
                    }), v.bind("click.sSelect", function(e) {
                        e.stopPropagation(), o(this)
                    }), v.bind("focus.sSelect", function() {
                        $(this).addClass("newListSelFocus"), o(this)
                    }), v.bind("blur.sSelect", function() {
                        $(this).removeClass("newListSelFocus")
                    }), $(document).bind("click.sSelect", function() {
                        v.removeClass("newListSelFocus"), y.is(":visible") ? r(!1, !0) : r(!1)
                    }), f.focus(function() {
                        f.next().focus()
                    }), m.bind("mouseenter.sSelect", function(e) {
                        var t = $(e.target);
                        t.parent().addClass("newListSelHover")
                    }).bind("mouseleave.sSelect", function(e) {
                        var t = $(e.target);
                        t.parent().removeClass("newListSelHover")
                    }), y.css({
                        left: "0",
                        display: "none",
                        visibility: "visible"
                    })
                }
            })
        }
    }(jQuery);
var firstLoad = !0,
    itemEvents;
itemEvents = new Object;
var MAX_EVENTS = 3;
$(function() {
        Date.format = "mm/dd/yyyy", Date.firstDayOfWeek = 0;
        var e = new Date,
            t = e.getMonth() + 1;
        if (t = t > 9 ? t : "0" + t, year = e.getFullYear(), 0 != $("#tinyevents").length && showEventsPerMonth(t, year, e.getDate()), $("#calendar-year .y2").length) {
            var i = $("#calendar-month a.border_line"),
                a = i.offset().left - $("#calendar-month").offset().left,
                n = $("#calendar-year").width() - a;
            $("#calendar-year .y1").width(a).next().width(n)
        } else {
            var a = $("#calendar-month").width();
            $("#calendar-year .y1").width(a)
        }
        $("#calendar_days dl").each(function() {
            var e = 300,
                t = 400,
                i = null,
                a = !1,
                n = !1,
                r = $("dt a", this),
                s = $("dd", this),
                o = r.offset().left + s.outerWidth() / 2;
            r.mousemove(function(e) {
                s.css({
                    left: e.pageX - r.offset().left - s.outerWidth() / 2
                })
            }), $(this).hover(function() {
                $(".evid" + $(this).data("eventid")).addClass("hover")
            }, function() {
                $(".evid" + $(this).data("eventid")).removeClass("hover")
            }), $([r.get(0), s.get(0)]).mouseover(function() {
                i && clearTimeout(i), a || n || (a = !0, $("#calendar_days dd").hide(), s.css({
                    bottom: 25,
                    display: "block"
                }), a = !1, n = !0)
            }).mouseout(function() {
                i && clearTimeout(i), i = setTimeout(function() {
                    i = null, n = !1, s.hide()
                }, t)
            })
        })
    }), $(document).ready(function() {
        var e = $(".poi"),
            t = null != navigator.userAgent.match(/iPad/i);
        $.each(e, function() {
            var t = $(this),
                i = e.index(t),
                a = $(".poi-maps-container", t),
                n = $(".poi-map-canvas", a),
                r = [],
                s = [],
                o = $(".category-selector", t),
                l = $("button", o),
                d = $(".categories", t),
                c = $(".category", d),
                u = $(".description", c),
                h = $(".hotel", t),
                p = {
                    regular: new google.maps.MarkerImage(templateURL + "images/secondary-pin.png", null, null, null, new google.maps.Size(30, 44)),
                    hotel: new google.maps.MarkerImage(templateURL + "images/pin.png", null, null, null, new google.maps.Size(42, 72))
                },
                g = [{
                    featureType: "landscape",
                    stylers: [{
                        saturation: -100
                    }, {
                        lightness: 65
                    }, {
                        visibility: "on"
                    }]
                }, {
                    featureType: "poi",
                    elementType: "geometry",
                    stylers: [{
                        visibility: "simplified"
                    }, {
                        color: "#fcfcfc"
                    }]
                }, {
                    featureType: "poi",
                    elementType: "labels.icon",
                    stylers: [{
                        saturation: "-100"
                    }]
                }, {
                    featureType: "poi",
                    elementType: "labels.text",
                    stylers: [{
                        saturation: "-100"
                    }]
                }, {
                    featureType: "road.highway",
                    stylers: [{
                        saturation: -100
                    }, {
                        visibility: "simplified"
                    }]
                }, {
                    featureType: "road.arterial",
                    stylers: [{
                        saturation: -100
                    }, {
                        lightness: 30
                    }, {
                        visibility: "on"
                    }]
                }, {
                    featureType: "road.local",
                    stylers: [{
                        saturation: -100
                    }, {
                        lightness: 40
                    }, {
                        visibility: "on"
                    }]
                }, {
                    featureType: "transit.station.bus",
                    elementType: "all",
                    stylers: [{
                        saturation: "-100"
                    }]
                }, {
                    featureType: "administrative",
                    elementType: "all",
                    stylers: [{
                        saturation: "-100"
                    }]
                }, {
                    featureType: "administrative.province",
                    stylers: [{
                        visibility: "off"
                    }]
                }, {
                    featureType: "water",
                    elementType: "labels",
                    stylers: [{
                        visibility: "on"
                    }, {
                        lightness: -25
                    }, {
                        saturation: -100
                    }]
                }, {
                    featureType: "water",
                    elementType: "geometry",
                    stylers: [{
                        hue: "#ffff00"
                    }, {
                        lightness: -25
                    }, {
                        saturation: -97
                    }]
                }];
            c.length && (l.click(function() {
                var e = $(this),
                    t = e.data("poi-category-index"),
                    i = r[t],
                    a = s[t];
                l.removeClass("active"), e.addClass("active"), c.each(function() {
                    var e = $(this);
                    u.removeClass("visible"), e.data("poi-category-index") == t ? e.addClass("visible") : e.removeClass("visible")
                }), n.removeClass("visible").filter("[data-poi-category-index=" + t + "]").addClass("visible"), i && a && i.fitBounds(a)
            }), $(".expand-description", t).click(function() {
                var e = $(this).closest(".point").next(".description");
                u.not(e).removeClass("visible"), e.toggleClass("visible")
            }), c.each(function() {
                var e = $(this),
                    t = e.data("poi-category-index"),
                    i = $(".point", e),
                    a = new google.maps.InfoWindow({
                        content: ""
                    }),
                    o = new google.maps.LatLngBounds,
                    l = new google.maps.Map(n.filter("[data-poi-category-index=" + t + "]")[0], {
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        scrollwheel: !1
                    });
                if (l.setOptions({
                        styles: g
                    }), i.each(function() {
                        var e = $(this),
                            t = new google.maps.Marker({
                                position: new google.maps.LatLng(e.data("lat"), e.data("lng")),
                                icon: p.regular,
                                map: l
                            }),
                            i = '<div class="map-content"><h4>' + e.data("name") + "</h4><p>" + (e.data("phone") ? "Phone: " + e.data("phone") : "") + '</p><p><a href="http://maps.google.com/maps?f=d&amp;geocode=&amp;daddr=' + e.data("lat") + "%2C%20" + e.data("lng") + '&amp;z=14" target="_blank">Get directions</a></p></div>',
                            n = function() {
                                a.setContent(i), a.open(l, t)
                            };
                        o.extend(new google.maps.LatLng(e.data("lat"), e.data("lng"))), l.fitBounds(o), google.maps.event.addListener(t, "click", function() {
                            n()
                        }), $(".show-on-map", e).hover(function() {
                            t.getAnimation() || t.setAnimation(google.maps.Animation.BOUNCE)
                        }, function() {
                            t.setAnimation(null)
                        }).click(function(e) {
                            n(), e.preventDefault()
                        })
                    }), h.each(function() {
                        var e = $(this),
                            t = new google.maps.Marker({
                                position: new google.maps.LatLng(e.data("lat"), e.data("lng")),
                                icon: p.hotel,
                                map: l
                            }),
                            i = '<div class="map-content"><h4>' + $(".title", e).text() + "</h4><p>" + $(".address", e).text() + ($(".phone", e).text() ? "<br>" + $(".phone", e).text() : "") + '</p><p><a href="http://maps.google.com/maps?f=d&amp;geocode=&amp;daddr=' + e.data("lat") + "%2C%20" + e.data("lng") + '&amp;z=14" target="_blank">Get directions</a></p></div>';
                        o.extend(new google.maps.LatLng(e.data("lat"), e.data("lng"))), l.fitBounds(o), google.maps.event.addListener(t, "click", function() {
                            a.setContent(i), a.open(l, t)
                        })
                    }), o.getNorthEast().equals(o.getSouthWest())) {
                    var d = new google.maps.LatLng(o.getNorthEast().lat() + .006, o.getNorthEast().lng() + .006),
                        c = new google.maps.LatLng(o.getNorthEast().lat() - .006, o.getNorthEast().lng() - .006);
                    o.extend(d), o.extend(c), l.fitBounds(o)
                }
                r.push(l), s.push(o)
            }))
        })
    }), ! function(e) {
        var t = {},
            a = {
                mode: "horizontal",
                slideSelector: "",
                infiniteLoop: !0,
                hideControlOnEnd: !1,
                speed: 500,
                easing: null,
                slideMargin: 0,
                startSlide: 0,
                randomStart: !1,
                captions: !1,
                ticker: !1,
                tickerHover: !1,
                adaptiveHeight: !1,
                adaptiveHeightSpeed: 500,
                video: !1,
                useCSS: !0,
                preloadImages: "visible",
                responsive: !0,
                slideZIndex: 50,
                touchEnabled: !0,
                swipeThreshold: 50,
                oneToOneTouch: !0,
                preventDefaultSwipeX: !0,
                preventDefaultSwipeY: !1,
                pager: !0,
                pagerType: "full",
                pagerShortSeparator: " / ",
                pagerSelector: null,
                buildPager: null,
                pagerCustom: null,
                controls: !0,
                nextText: "Next",
                prevText: "Prev",
                nextSelector: null,
                prevSelector: null,
                autoControls: !1,
                startText: "Start",
                stopText: "Stop",
                autoControlsCombine: !1,
                autoControlsSelector: null,
                auto: !1,
                pause: 4e3,
                autoStart: !0,
                autoDirection: "next",
                autoHover: !1,
                autoDelay: 0,
                minSlides: 1,
                maxSlides: 1,
                moveSlides: 0,
                slideWidth: 0,
                onSliderLoad: function() {},
                onSlideBefore: function() {},
                onSlideAfter: function() {},
                onSlideNext: function() {},
                onSlidePrev: function() {},
                onSliderResize: function() {}
            };
        e.fn.bxSlider = function(n) {
            if (0 == this.length) return this;
            if (this.length > 1) return this.each(function() {
                e(this).bxSlider(n)
            }), this;
            var r = {},
                s = this;
            t.el = this;
            var o = e(window).width(),
                l = e(window).height(),
                d = function() {
                    r.settings = e.extend({}, a, n), r.settings.slideWidth = parseInt(r.settings.slideWidth), r.children = s.children(r.settings.slideSelector), r.children.length < r.settings.minSlides && (r.settings.minSlides = r.children.length), r.children.length < r.settings.maxSlides && (r.settings.maxSlides = r.children.length), r.settings.randomStart && (r.settings.startSlide = Math.floor(Math.random() * r.children.length)), r.active = {
                        index: r.settings.startSlide
                    }, r.carousel = r.settings.minSlides > 1 || r.settings.maxSlides > 1, r.carousel && (r.settings.preloadImages = "all"), r.minThreshold = r.settings.minSlides * r.settings.slideWidth + (r.settings.minSlides - 1) * r.settings.slideMargin, r.maxThreshold = r.settings.maxSlides * r.settings.slideWidth + (r.settings.maxSlides - 1) * r.settings.slideMargin, r.working = !1, r.controls = {}, r.interval = null, r.animProp = "vertical" == r.settings.mode ? "top" : "left", r.usingCSS = r.settings.useCSS && "fade" != r.settings.mode && function() {
                        var e = document.createElement("div"),
                            t = ["WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"];
                        for (var i in t)
                            if (void 0 !== e.style[t[i]]) return r.cssPrefix = t[i].replace("Perspective", "").toLowerCase(), r.animProp = "-" + r.cssPrefix + "-transform", !0;
                        return !1
                    }(), "vertical" == r.settings.mode && (r.settings.maxSlides = r.settings.minSlides), s.data("origStyle", s.attr("style")), s.children(r.settings.slideSelector).each(function() {
                        e(this).data("origStyle", e(this).attr("style"))
                    }), c()
                },
                c = function() {
                    s.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'), r.viewport = s.parent(), r.loader = e('<div class="bx-loading" />'), r.viewport.prepend(r.loader), s.css({
                        width: "horizontal" == r.settings.mode ? 100 * r.children.length + 215 + "%" : "auto",
                        position: "relative"
                    }), r.usingCSS && r.settings.easing ? s.css("-" + r.cssPrefix + "-transition-timing-function", r.settings.easing) : r.settings.easing || (r.settings.easing = "swing"), m(), r.viewport.css({
                        width: "100%",
                        overflow: "hidden",
                        position: "relative"
                    }), r.viewport.parent().css({
                        maxWidth: g()
                    }), r.settings.pager || r.viewport.parent().css({
                        margin: "0 auto 0px"
                    }), r.children.css({
                        "float": "horizontal" == r.settings.mode ? "left" : "none",
                        listStyle: "none",
                        position: "relative"
                    }), r.children.css("width", f()), "horizontal" == r.settings.mode && r.settings.slideMargin > 0 && r.children.css("marginRight", r.settings.slideMargin), "vertical" == r.settings.mode && r.settings.slideMargin > 0 && r.children.css("marginBottom", r.settings.slideMargin), "fade" == r.settings.mode && (r.children.css({
                        position: "absolute",
                        zIndex: 0,
                        display: "none"
                    }), r.children.eq(r.settings.startSlide).css({
                        zIndex: r.settings.slideZIndex,
                        display: "block"
                    })), r.controls.el = e('<div class="bx-controls" />'), r.settings.captions && C(), r.active.last = r.settings.startSlide == v() - 1, r.settings.video && s.fitVids();
                    var t = r.children.eq(r.settings.startSlide);
                    "all" == r.settings.preloadImages && (t = r.children), r.settings.ticker ? r.settings.pager = !1 : (r.settings.pager && w(), r.settings.controls && k(), r.settings.auto && r.settings.autoControls && D(), (r.settings.controls || r.settings.autoControls || r.settings.pager) && r.viewport.after(r.controls.el)), u(t, h)
                },
                u = function(t, i) {
                    var a = t.find("img, iframe").length;
                    if (0 == a) return void i();
                    var n = 0;
                    t.find("img, iframe").each(function() {
                        e(this).one("load", function() {
                            ++n == a && i()
                        }).each(function() {
                            this.complete && e(this).load()
                        })
                    })
                },
                h = function() {
                    if (r.settings.infiniteLoop && "fade" != r.settings.mode && !r.settings.ticker) {
                        var t = "vertical" == r.settings.mode ? r.settings.minSlides : r.settings.maxSlides,
                            i = r.children.slice(0, t).clone().addClass("bx-clone"),
                            a = r.children.slice(-t).clone().addClass("bx-clone");
                        s.append(i).prepend(a)
                    }
                    r.loader.remove(), b(), "vertical" == r.settings.mode && (r.settings.adaptiveHeight = !0), r.viewport.height(p()), s.redrawSlider(), r.settings.onSliderLoad(r.active.index), r.initialized = !0, r.settings.responsive && e(window).bind("resize", Y), r.settings.auto && r.settings.autoStart && O(), r.settings.ticker && j(), r.settings.pager && I(r.settings.startSlide), r.settings.controls && N(), r.settings.touchEnabled && !r.settings.ticker && G()
                },
                p = function() {
                    var t = 0,
                        a = e();
                    if ("vertical" == r.settings.mode || r.settings.adaptiveHeight)
                        if (r.carousel) {
                            var n = 1 == r.settings.moveSlides ? r.active.index : r.active.index * y();
                            for (a = r.children.eq(n), i = 1; i <= r.settings.maxSlides - 1; i++) a = n + i >= r.children.length ? a.add(r.children.eq(i - 1)) : a.add(r.children.eq(n + i))
                        } else a = r.children.eq(r.active.index);
                    else a = r.children;
                    return "vertical" == r.settings.mode ? (a.each(function() {
                        t += e(this).outerHeight()
                    }), r.settings.slideMargin > 0 && (t += r.settings.slideMargin * (r.settings.minSlides - 1))) : t = Math.max.apply(Math, a.map(function() {
                        return e(this).outerHeight(!1)
                    }).get()), t
                },
                g = function() {
                    var e = "100%";
                    return r.settings.slideWidth > 0 && (e = "horizontal" == r.settings.mode ? r.settings.maxSlides * r.settings.slideWidth + (r.settings.maxSlides - 1) * r.settings.slideMargin : r.settings.slideWidth), e
                },
                f = function() {
                    var e = r.settings.slideWidth,
                        t = r.viewport.width();
                    return 0 == r.settings.slideWidth || r.settings.slideWidth > t && !r.carousel || "vertical" == r.settings.mode ? e = t : r.settings.maxSlides > 1 && "horizontal" == r.settings.mode && (t > r.maxThreshold || t < r.minThreshold && (e = (t - r.settings.slideMargin * (r.settings.minSlides - 1)) / r.settings.minSlides)), e
                },
                m = function() {
                    var e = 1;
                    if ("horizontal" == r.settings.mode && r.settings.slideWidth > 0)
                        if (r.viewport.width() < r.minThreshold) e = r.settings.minSlides;
                        else if (r.viewport.width() > r.maxThreshold) e = r.settings.maxSlides;
                    else {
                        var t = r.children.first().width();
                        e = Math.floor(r.viewport.width() / t)
                    } else "vertical" == r.settings.mode && (e = r.settings.minSlides);
                    return e
                },
                v = function() {
                    var e = 0;
                    if (r.settings.moveSlides > 0)
                        if (r.settings.infiniteLoop) e = r.children.length / y();
                        else
                            for (var t = 0, i = 0; t < r.children.length;) ++e, t = i + m(), i += r.settings.moveSlides <= m() ? r.settings.moveSlides : m();
                    else e = Math.ceil(r.children.length / m());
                    return e
                },
                y = function() {
                    return r.settings.moveSlides > 0 && r.settings.moveSlides <= m() ? r.settings.moveSlides : m()
                },
                b = function() {
                    if (r.children.length > r.settings.maxSlides && r.active.last && !r.settings.infiniteLoop) {
                        if ("horizontal" == r.settings.mode) {
                            var e = r.children.last(),
                                t = e.position();
                            _(-(t.left - (r.viewport.width() - e.width())), "reset", 0)
                        } else if ("vertical" == r.settings.mode) {
                            var i = r.children.length - r.settings.minSlides,
                                t = r.children.eq(i).position();
                            _(-t.top, "reset", 0)
                        }
                    } else {
                        var t = r.children.eq(r.active.index * y()).position();
                        r.active.index == v() - 1 && (r.active.last = !0), void 0 != t && ("horizontal" == r.settings.mode ? _(-t.left, "reset", 0) : "vertical" == r.settings.mode && _(-t.top, "reset", 0))
                    }
                },
                _ = function(e, t, i, a) {
                    if (r.usingCSS) {
                        var n = "vertical" == r.settings.mode ? "translate3d(0, " + e + "px, 0)" : "translate3d(" + e + "px, 0, 0)";
                        s.css("-" + r.cssPrefix + "-transition-duration", i / 1e3 + "s"), "slide" == t ? (s.css(r.animProp, n), s.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {
                            s.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"), A()
                        })) : "reset" == t ? s.css(r.animProp, n) : "ticker" == t && (s.css("-" + r.cssPrefix + "-transition-timing-function", "linear"), s.css(r.animProp, n), s.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {
                            s.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"), _(a.resetValue, "reset", 0), L()
                        }))
                    } else {
                        var o = {};
                        o[r.animProp] = e, "slide" == t ? s.animate(o, i, r.settings.easing, function() {
                            A()
                        }) : "reset" == t ? s.css(r.animProp, e) : "ticker" == t && s.animate(o, speed, "linear", function() {
                            _(a.resetValue, "reset", 0), L()
                        })
                    }
                },
                x = function() {
                    for (var t = "", i = v(), a = 0; i > a; a++) {
                        var n = "";
                        r.settings.buildPager && e.isFunction(r.settings.buildPager) ? (n = r.settings.buildPager(a), r.pagerEl.addClass("bx-custom-pager")) : (n = a + 1, r.pagerEl.addClass("bx-default-pager")), t += '<div class="bx-pager-item"><a href="" data-slide-index="' + a + '" class="bx-pager-link">' + n + "</a></div>"
                    }
                    r.pagerEl.html(t)
                },
                w = function() {
                    r.settings.pagerCustom ? r.pagerEl = e(r.settings.pagerCustom) : (r.pagerEl = e('<div class="bx-pager" />'), r.settings.pagerSelector ? e(r.settings.pagerSelector).html(r.pagerEl) : r.controls.el.addClass("bx-has-pager").append(r.pagerEl), x()), r.pagerEl.on("click", "a", E)
                },
                k = function() {
                    r.controls.next = e('<a class="bx-next" href="">' + r.settings.nextText + "</a>"), r.controls.prev = e('<a class="bx-prev" href="">' + r.settings.prevText + "</a>"), r.controls.next.bind("click", T), r.controls.prev.bind("click", S), r.settings.nextSelector && e(r.settings.nextSelector).append(r.controls.next), r.settings.prevSelector && e(r.settings.prevSelector).append(r.controls.prev), r.settings.nextSelector || r.settings.prevSelector || (r.controls.directionEl = e('<div class="bx-controls-direction" />'), r.controls.directionEl.append(r.controls.prev).append(r.controls.next), r.controls.el.addClass("bx-has-controls-direction").append(r.controls.directionEl))
                },
                D = function() {
                    r.controls.start = e('<div class="bx-controls-auto-item"><a class="bx-start" href="">' + r.settings.startText + "</a></div>"), r.controls.stop = e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">' + r.settings.stopText + "</a></div>"), r.controls.autoEl = e('<div class="bx-controls-auto" />'), r.controls.autoEl.on("click", ".bx-start", F), r.controls.autoEl.on("click", ".bx-stop", M), r.settings.autoControlsCombine ? r.controls.autoEl.append(r.controls.start) : r.controls.autoEl.append(r.controls.start).append(r.controls.stop), r.settings.autoControlsSelector ? e(r.settings.autoControlsSelector).html(r.controls.autoEl) : r.controls.el.addClass("bx-has-controls-auto").append(r.controls.autoEl), P(r.settings.autoStart ? "stop" : "start")
                },
                C = function() {
                    r.children.each(function() {
                        var t = e(this).find("img:first").attr("title");
                        void 0 != t && ("" + t).length && e(this).append('<div class="bx-caption"><span>' + t + "</span></div>")
                    })
                },
                T = function(e) {
                    r.settings.auto && s.stopAuto(), s.goToNextSlide(), e.preventDefault()
                },
                S = function(e) {
                    r.settings.auto && s.stopAuto(), s.goToPrevSlide(), e.preventDefault()
                },
                F = function(e) {
                    s.startAuto(), e.preventDefault()
                },
                M = function(e) {
                    s.stopAuto(), e.preventDefault()
                },
                E = function(t) {
                    r.settings.auto && s.stopAuto();
                    var i = e(t.currentTarget),
                        a = parseInt(i.attr("data-slide-index"));
                    a != r.active.index && s.goToSlide(a), t.preventDefault()
                },
                I = function(t) {
                    var i = r.children.length;
                    return "short" == r.settings.pagerType ? (r.settings.maxSlides > 1 && (i = Math.ceil(r.children.length / r.settings.maxSlides)), void r.pagerEl.html(t + 1 + r.settings.pagerShortSeparator + i)) : (r.pagerEl.find("a").removeClass("active"), void r.pagerEl.each(function(i, a) {
                        e(a).find("a").eq(t).addClass("active")
                    }))
                },
                A = function() {
                    if (r.settings.infiniteLoop) {
                        var e = "";
                        0 == r.active.index ? e = r.children.eq(0).position() : r.active.index == v() - 1 && r.carousel ? e = r.children.eq((v() - 1) * y()).position() : r.active.index == r.children.length - 1 && (e = r.children.eq(r.children.length - 1).position()), e && ("horizontal" == r.settings.mode ? _(-e.left, "reset", 0) : "vertical" == r.settings.mode && _(-e.top, "reset", 0))
                    }
                    r.working = !1, r.settings.onSlideAfter(r.children.eq(r.active.index), r.oldIndex, r.active.index)
                },
                P = function(e) {
                    r.settings.autoControlsCombine ? r.controls.autoEl.html(r.controls[e]) : (r.controls.autoEl.find("a").removeClass("active"), r.controls.autoEl.find("a:not(.bx-" + e + ")").addClass("active"))
                },
                N = function() {
                    1 == v() ? (r.controls.prev.addClass("disabled"), r.controls.next.addClass("disabled")) : !r.settings.infiniteLoop && r.settings.hideControlOnEnd && (0 == r.active.index ? (r.controls.prev.addClass("disabled"), r.controls.next.removeClass("disabled")) : r.active.index == v() - 1 ? (r.controls.next.addClass("disabled"), r.controls.prev.removeClass("disabled")) : (r.controls.prev.removeClass("disabled"), r.controls.next.removeClass("disabled")))
                },
                O = function() {
                    r.settings.autoDelay > 0 ? setTimeout(s.startAuto, r.settings.autoDelay) : s.startAuto(), r.settings.autoHover && s.hover(function() {
                        r.interval && (s.stopAuto(!0), r.autoPaused = !0)
                    }, function() {
                        r.autoPaused && (s.startAuto(!0), r.autoPaused = null)
                    })
                },
                j = function() {
                    var t = 0;
                    if ("next" == r.settings.autoDirection) s.append(r.children.clone().addClass("bx-clone"));
                    else {
                        s.prepend(r.children.clone().addClass("bx-clone"));
                        var i = r.children.first().position();
                        t = "horizontal" == r.settings.mode ? -i.left : -i.top
                    }
                    _(t, "reset", 0), r.settings.pager = !1, r.settings.controls = !1, r.settings.autoControls = !1, r.settings.tickerHover && !r.usingCSS && r.viewport.hover(function() {
                        s.stop()
                    }, function() {
                        var t = 0;
                        r.children.each(function() {
                            t += "horizontal" == r.settings.mode ? e(this).outerWidth(!0) : e(this).outerHeight(!0)
                        });
                        var i = r.settings.speed / t,
                            a = "horizontal" == r.settings.mode ? "left" : "top",
                            n = i * (t - Math.abs(parseInt(s.css(a))));
                        L(n)
                    }), L()
                },
                L = function(e) {
                    speed = e ? e : r.settings.speed;
                    var t = {
                            left: 0,
                            top: 0
                        },
                        i = {
                            left: 0,
                            top: 0
                        };
                    "next" == r.settings.autoDirection ? t = s.find(".bx-clone").first().position() : i = r.children.first().position();
                    var a = "horizontal" == r.settings.mode ? -t.left : -t.top,
                        n = "horizontal" == r.settings.mode ? -i.left : -i.top,
                        o = {
                            resetValue: n
                        };
                    _(a, "ticker", speed, o)
                },
                G = function() {
                    r.touch = {
                        start: {
                            x: 0,
                            y: 0
                        },
                        end: {
                            x: 0,
                            y: 0
                        }
                    }, r.viewport.bind("touchstart", z)
                },
                z = function(e) {
                    if (r.working) e.preventDefault();
                    else {
                        r.touch.originalPos = s.position();
                        var t = e.originalEvent;
                        r.touch.start.x = t.changedTouches[0].pageX, r.touch.start.y = t.changedTouches[0].pageY, r.viewport.bind("touchmove", q), r.viewport.bind("touchend", R)
                    }
                },
                q = function(e) {
                    var t = e.originalEvent,
                        i = Math.abs(t.changedTouches[0].pageX - r.touch.start.x),
                        a = Math.abs(t.changedTouches[0].pageY - r.touch.start.y);
                    if (3 * i > a && r.settings.preventDefaultSwipeX ? e.preventDefault() : 3 * a > i && r.settings.preventDefaultSwipeY && e.preventDefault(), "fade" != r.settings.mode && r.settings.oneToOneTouch) {
                        var n = 0;
                        if ("horizontal" == r.settings.mode) {
                            var s = t.changedTouches[0].pageX - r.touch.start.x;
                            n = r.touch.originalPos.left + s
                        } else {
                            var s = t.changedTouches[0].pageY - r.touch.start.y;
                            n = r.touch.originalPos.top + s
                        }
                        _(n, "reset", 0)
                    }
                },
                R = function(e) {
                    r.viewport.unbind("touchmove", q);
                    var t = e.originalEvent,
                        i = 0;
                    if (r.touch.end.x = t.changedTouches[0].pageX, r.touch.end.y = t.changedTouches[0].pageY, "fade" == r.settings.mode) {
                        var a = Math.abs(r.touch.start.x - r.touch.end.x);
                        a >= r.settings.swipeThreshold && (r.touch.start.x > r.touch.end.x ? s.goToNextSlide() : s.goToPrevSlide(), s.stopAuto())
                    } else {
                        var a = 0;
                        "horizontal" == r.settings.mode ? (a = r.touch.end.x - r.touch.start.x, i = r.touch.originalPos.left) : (a = r.touch.end.y - r.touch.start.y, i = r.touch.originalPos.top), !r.settings.infiniteLoop && (0 == r.active.index && a > 0 || r.active.last && 0 > a) ? _(i, "reset", 200) : Math.abs(a) >= r.settings.swipeThreshold ? (0 > a ? s.goToNextSlide() : s.goToPrevSlide(), s.stopAuto()) : _(i, "reset", 200)
                    }
                    r.viewport.unbind("touchend", R)
                },
                Y = function() {
                    var t = e(window).width(),
                        i = e(window).height();
                    (o != t || l != i) && (o = t, l = i, s.redrawSlider(), r.settings.onSliderResize.call(s, r.active.index))
                };
            return s.goToSlide = function(t, i) {
                if (!r.working && r.active.index != t)
                    if (r.working = !0, r.oldIndex = r.active.index, r.active.index = 0 > t ? v() - 1 : t >= v() ? 0 : t, r.settings.onSlideBefore(r.children.eq(r.active.index), r.oldIndex, r.active.index), "next" == i ? r.settings.onSlideNext(r.children.eq(r.active.index), r.oldIndex, r.active.index) : "prev" == i && r.settings.onSlidePrev(r.children.eq(r.active.index), r.oldIndex, r.active.index), r.active.last = r.active.index >= v() - 1, r.settings.pager && I(r.active.index), r.settings.controls && N(), "fade" == r.settings.mode) r.settings.adaptiveHeight && r.viewport.height() != p() && r.viewport.animate({
                        height: p()
                    }, r.settings.adaptiveHeightSpeed), r.children.filter(":visible").fadeOut(r.settings.speed).css({
                        zIndex: 0
                    }), r.children.eq(r.active.index).css("zIndex", r.settings.slideZIndex + 1).fadeIn(r.settings.speed, function() {
                        e(this).css("zIndex", r.settings.slideZIndex), A()
                    });
                    else {
                        r.settings.adaptiveHeight && r.viewport.height() != p() && r.viewport.animate({
                            height: p()
                        }, r.settings.adaptiveHeightSpeed);
                        var a = 0,
                            n = {
                                left: 0,
                                top: 0
                            };
                        if (!r.settings.infiniteLoop && r.carousel && r.active.last)
                            if ("horizontal" == r.settings.mode) {
                                var o = r.children.eq(r.children.length - 1);
                                n = o.position(), a = r.viewport.width() - o.outerWidth()
                            } else {
                                var l = r.children.length - r.settings.minSlides;
                                n = r.children.eq(l).position()
                            } else if (r.carousel && r.active.last && "prev" == i) {
                            var d = 1 == r.settings.moveSlides ? r.settings.maxSlides - y() : (v() - 1) * y() - (r.children.length - r.settings.maxSlides),
                                o = s.children(".bx-clone").eq(d);
                            n = o.position()
                        } else if ("next" == i && 0 == r.active.index) n = s.find("> .bx-clone").eq(r.settings.maxSlides).position(), r.active.last = !1;
                        else if (t >= 0) {
                            var c = t * y();
                            n = r.children.eq(c).position()
                        }
                        if ("undefined" != typeof n) {
                            var u = "horizontal" == r.settings.mode ? -(n.left - a) : -n.top;
                            _(u, "slide", r.settings.speed)
                        }
                    }
            }, s.goToNextSlide = function() {
                if (r.settings.infiniteLoop || !r.active.last) {
                    var e = parseInt(r.active.index) + 1;
                    s.goToSlide(e, "next")
                }
            }, s.goToPrevSlide = function() {
                if (r.settings.infiniteLoop || 0 != r.active.index) {
                    var e = parseInt(r.active.index) - 1;
                    s.goToSlide(e, "prev")
                }
            }, s.startAuto = function(e) {
                r.interval || (r.interval = setInterval(function() {
                    "next" == r.settings.autoDirection ? s.goToNextSlide() : s.goToPrevSlide()
                }, r.settings.pause), r.settings.autoControls && 1 != e && P("stop"))
            }, s.stopAuto = function(e) {
                r.interval && (clearInterval(r.interval), r.interval = null, r.settings.autoControls && 1 != e && P("start"))
            }, s.getCurrentSlide = function() {
                return r.active.index
            }, s.getCurrentSlideElement = function() {
                return r.children.eq(r.active.index)
            }, s.getSlideCount = function() {
                return r.children.length
            }, s.redrawSlider = function() {
                r.children.add(s.find(".bx-clone")).outerWidth(f()), r.viewport.css("height", p()), r.settings.ticker || b(), r.active.last && (r.active.index = v() - 1), r.active.index >= v() && (r.active.last = !0), r.settings.pager && !r.settings.pagerCustom && (x(), I(r.active.index))
            }, s.destroySlider = function() {
                r.initialized && (r.initialized = !1, e(".bx-clone", this).remove(), r.children.each(function() {
                    void 0 != e(this).data("origStyle") ? e(this).attr("style", e(this).data("origStyle")) : e(this).removeAttr("style")
                }), void 0 != e(this).data("origStyle") ? this.attr("style", e(this).data("origStyle")) : e(this).removeAttr("style"), e(this).unwrap().unwrap(), r.controls.el && r.controls.el.remove(), r.controls.next && r.controls.next.remove(), r.controls.prev && r.controls.prev.remove(), r.pagerEl && r.settings.controls && r.pagerEl.remove(), e(".bx-caption", this).remove(), r.controls.autoEl && r.controls.autoEl.remove(), clearInterval(r.interval), r.settings.responsive && e(window).unbind("resize", Y))
            }, s.reloadSlider = function(e) {
                void 0 != e && (n = e), s.destroySlider(), d()
            }, d(), this
        }
    }(jQuery),
    function(e, t) {
        "function" == typeof define && define.amd ? define(t) : "object" == typeof exports ? module.exports = t() : e.NProgress = t()
    }(this, function() {
        function e(e, t, i) {
            return t > e ? t : e > i ? i : e
        }

        function t(e) {
            return 100 * (-1 + e)
        }

        function i(e, i, a) {
            var n;
            return n = "translate3d" === d.positionUsing ? {
                transform: "translate3d(" + t(e) + "%,0,0)"
            } : "translate" === d.positionUsing ? {
                transform: "translate(" + t(e) + "%,0)"
            } : {
                "margin-left": t(e) + "%"
            }, n.transition = "all " + i + "ms " + a, n
        }

        function a(e, t) {
            var i = "string" == typeof e ? e : s(e);
            return i.indexOf(" " + t + " ") >= 0
        }

        function n(e, t) {
            var i = s(e),
                n = i + t;
            a(i, t) || (e.className = n.substring(1))
        }

        function r(e, t) {
            var i = s(e),
                n;
            a(e, t) && (n = i.replace(" " + t + " ", " "), e.className = n.substring(1, n.length - 1))
        }

        function s(e) {
            return (" " + (e.className || "") + " ").replace(/\s+/gi, " ")
        }

        function o(e) {
            e && e.parentNode && e.parentNode.removeChild(e)
        }
        var l = {};
        l.version = "0.1.6";
        var d = l.settings = {
            minimum: .08,
            easing: "ease",
            positionUsing: "",
            speed: 200,
            trickle: !0,
            trickleRate: .02,
            trickleSpeed: 800,
            showSpinner: !0,
            barSelector: '[role="bar"]',
            spinnerSelector: '[role="spinner"]',
            parent: "body",
            template: '<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'
        };
        l.configure = function(e) {
                var t, i;
                for (t in e) i = e[t], void 0 !== i && e.hasOwnProperty(t) && (d[t] = i);
                return this
            }, l.status = null, l.set = function(t) {
                var a = l.isStarted();
                t = e(t, d.minimum, 1), l.status = 1 === t ? null : t;
                var n = l.render(!a),
                    r = n.querySelector(d.barSelector),
                    s = d.speed,
                    o = d.easing;
                return n.offsetWidth, c(function(e) {
                    "" === d.positionUsing && (d.positionUsing = l.getPositioningCSS()), u(r, i(t, s, o)), 1 === t ? (u(n, {
                        transition: "none",
                        opacity: 1
                    }), n.offsetWidth, setTimeout(function() {
                        u(n, {
                            transition: "all " + s + "ms linear",
                            opacity: 0
                        }), setTimeout(function() {
                            l.remove(), e()
                        }, s)
                    }, s)) : setTimeout(e, s)
                }), this
            }, l.isStarted = function() {
                return "number" == typeof l.status
            }, l.start = function() {
                l.status || l.set(0);
                var e = function() {
                    setTimeout(function() {
                        l.status && (l.trickle(), e())
                    }, d.trickleSpeed)
                };
                return d.trickle && e(), this
            }, l.done = function(e) {
                return e || l.status ? l.inc(.3 + .5 * Math.random()).set(1) : this
            }, l.inc = function(t) {
                var i = l.status;
                return i ? ("number" != typeof t && (t = (1 - i) * e(Math.random() * i, .1, .95)), i = e(i + t, 0, .994), l.set(i)) : l.start()
            }, l.trickle = function() {
                return l.inc(Math.random() * d.trickleRate)
            },
            function() {
                var e = 0,
                    t = 0;
                l.promise = function(i) {
                    return i && "resolved" != i.state() ? (0 == t && l.start(), e++, t++, i.always(function() {
                        t--, 0 == t ? (e = 0, l.done()) : l.set((e - t) / e)
                    }), this) : this
                }
            }(), l.render = function(e) {
                if (l.isRendered()) return document.getElementById("nprogress");
                n(document.documentElement, "nprogress-busy");
                var i = document.createElement("div");
                i.id = "nprogress", i.innerHTML = d.template;
                var a = i.querySelector(d.barSelector),
                    r = e ? "-100" : t(l.status || 0),
                    s = document.querySelector(d.parent),
                    c;
                return u(a, {
                    transition: "all 0 linear",
                    transform: "translate3d(" + r + "%,0,0)"
                }), d.showSpinner || (c = i.querySelector(d.spinnerSelector), c && o(c)), s != document.body && n(s, "nprogress-custom-parent"), s.appendChild(i), i
            }, l.remove = function() {
                r(document.documentElement, "nprogress-busy"), r(document.querySelector(d.parent), "nprogress-custom-parent");
                var e = document.getElementById("nprogress");
                e && o(e)
            }, l.isRendered = function() {
                return !!document.getElementById("nprogress")
            }, l.getPositioningCSS = function() {
                var e = document.body.style,
                    t = "WebkitTransform" in e ? "Webkit" : "MozTransform" in e ? "Moz" : "msTransform" in e ? "ms" : "OTransform" in e ? "O" : "";
                return t + "Perspective" in e ? "translate3d" : t + "Transform" in e ? "translate" : "margin"
            };
        var c = function() {
                function e() {
                    var i = t.shift();
                    i && i(e)
                }
                var t = [];
                return function(i) {
                    t.push(i), 1 == t.length && e()
                }
            }(),
            u = function() {
                function e(e) {
                    return e.replace(/^-ms-/, "ms-").replace(/-([\da-z])/gi, function(e, t) {
                        return t.toUpperCase()
                    })
                }

                function t(e) {
                    var t = document.body.style;
                    if (e in t) return e;
                    for (var i = n.length, a = e.charAt(0).toUpperCase() + e.slice(1), r; i--;)
                        if (r = n[i] + a, r in t) return r;
                    return e
                }

                function i(i) {
                    return i = e(i), r[i] || (r[i] = t(i))
                }

                function a(e, t, a) {
                    t = i(t), e.style[t] = a
                }
                var n = ["Webkit", "O", "Moz", "ms"],
                    r = {};
                return function(e, t) {
                    var i = arguments,
                        n, r;
                    if (2 == i.length)
                        for (n in t) r = t[n], void 0 !== r && t.hasOwnProperty(n) && a(e, n, r);
                    else a(e, i[1], i[2])
                }
            }();
        return l
    }),
    function(e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery)
    }(function($) {
        function e(e) {
            return s.raw ? e : encodeURIComponent(e)
        }

        function t(e) {
            return s.raw ? e : decodeURIComponent(e)
        }

        function i(t) {
            return e(s.json ? JSON.stringify(t) : String(t))
        }

        function a(e) {
            0 === e.indexOf('"') && (e = e.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\"));
            try {
                return e = decodeURIComponent(e.replace(r, " ")), s.json ? JSON.parse(e) : e
            } catch (t) {}
        }

        function n(e, t) {
            var i = s.raw ? e : a(e);
            return $.isFunction(t) ? t(i) : i
        }
        var r = /\+/g,
            s = $.cookie = function(a, r, o) {
                if (void 0 !== r && !$.isFunction(r)) {
                    if (o = $.extend({}, s.defaults, o), "number" == typeof o.expires) {
                        var l = o.expires,
                            d = o.expires = new Date;
                        d.setTime(+d + 864e5 * l)
                    }
                    return document.cookie = [e(a), "=", i(r), o.expires ? "; expires=" + o.expires.toUTCString() : "", o.path ? "; path=" + o.path : "", o.domain ? "; domain=" + o.domain : "", o.secure ? "; secure" : ""].join("")
                }
                for (var c = a ? void 0 : {}, u = document.cookie ? document.cookie.split("; ") : [], h = 0, p = u.length; p > h; h++) {
                    var g = u[h].split("="),
                        f = t(g.shift()),
                        m = g.join("=");
                    if (a && a === f) {
                        c = n(m, r);
                        break
                    }
                    a || void 0 === (m = n(m)) || (c[f] = m)
                }
                return c
            };
        s.defaults = {}, $.removeCookie = function(e, t) {
            return void 0 === $.cookie(e) ? !1 : ($.cookie(e, "", $.extend({}, t, {
                expires: -1
            })), !$.cookie(e))
        }
    }),
    function($) {
        var e, t = this,
            i = t.document,
            a = $(i),
            n = $(t),
            r = Array.prototype,
            s = 1.29,
            o = !0,
            l = 3e4,
            d = !1,
            c = navigator.userAgent.toLowerCase(),
            u = t.location.hash.replace(/#\//, ""),
            h = function() {},
            p = function() {
                return !1
            },
            g = function() {
                var t = 3,
                    a = i.createElement("div"),
                    n = a.getElementsByTagName("i");
                do a.innerHTML = "<!--[if gt IE " + ++t + "]><i></i><![endif]-->"; while (n[0]);
                return t > 4 ? t : e
            }(),
            f = function() {
                return {
                    html: i.documentElement,
                    body: i.body,
                    head: i.getElementsByTagName("head")[0],
                    title: i.title
                }
            },
            m = t.parent !== t.self,
            v = "data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",
            y = function() {
                var e = [];
                return $.each(v.split(" "), function(t, i) {
                    e.push(i), /_/.test(i) && e.push(i.replace(/_/g, ""))
                }), e
            }(),
            b = function(e) {
                var t;
                return "object" != typeof e ? e : ($.each(e, function(i, a) {
                    /^[a-z]+_/.test(i) && (t = "", $.each(i.split("_"), function(e, i) {
                        t += e > 0 ? i.substr(0, 1).toUpperCase() + i.substr(1) : i
                    }), e[t] = a, delete e[i])
                }), e)
            },
            _ = function(e) {
                return $.inArray(e, y) > -1 ? Galleria[e.toUpperCase()] : e
            },
            x = {
                youtube: {
                    reg: /https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,
                    embed: function(e) {
                        return "http://www.youtube.com/embed/" + e
                    },
                    getThumb: function(e, i, a) {
                        a = a || h, $.getJSON(t.location.protocol + "//gdata.youtube.com/feeds/api/videos/" + e + "?v=2&alt=json-in-script&callback=?", function(e) {
                            try {
                                i(e.entry.media$group.media$thumbnail[0].url)
                            } catch (t) {
                                a()
                            }
                        }).error(a)
                    }
                },
                vimeo: {
                    reg: /https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,
                    embed: function(e) {
                        return "http://player.vimeo.com/video/" + e
                    },
                    getThumb: function(e, t, i) {
                        i = i || h, $.getJSON("http://vimeo.com/api/v2/video/" + e + ".json?callback=?", function(e) {
                            try {
                                t(e[0].thumbnail_medium)
                            } catch (a) {
                                i()
                            }
                        }).error(i)
                    }
                },
                dailymotion: {
                    reg: /https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,
                    embed: function(e) {
                        return "http://www.dailymotion.com/embed/video/" + e
                    },
                    getThumb: function(e, t, i) {
                        i = i || h, $.getJSON("https://api.dailymotion.com/video/" + e + "?fields=thumbnail_medium_url&callback=?", function(e) {
                            try {
                                t(e.thumbnail_medium_url)
                            } catch (a) {
                                i()
                            }
                        }).error(i)
                    }
                }
            },
            w = function(e) {
                var t;
                for (var i in x)
                    if (t = e && e.match(x[i].reg), t && t.length) return {
                        id: t[2],
                        provider: i
                    };
                return !1
            },
            k = {
                support: function() {
                    var e = f().html;
                    return !m && (e.requestFullscreen || e.mozRequestFullScreen || e.webkitRequestFullScreen)
                }(),
                callback: h,
                enter: function(e, t, i) {
                    this.instance = e, this.callback = t || h, i = i || f().html, i.requestFullscreen ? i.requestFullscreen() : i.mozRequestFullScreen ? i.mozRequestFullScreen() : i.webkitRequestFullScreen && i.webkitRequestFullScreen()
                },
                exit: function(e) {
                    this.callback = e || h, i.exitFullscreen ? i.exitFullscreen() : i.mozCancelFullScreen ? i.mozCancelFullScreen() : i.webkitCancelFullScreen && i.webkitCancelFullScreen()
                },
                instance: null,
                listen: function() {
                    if (this.support) {
                        var e = function() {
                            if (k.instance) {
                                var e = k.instance._fullscreen;
                                i.fullscreen || i.mozFullScreen || i.webkitIsFullScreen ? e._enter(k.callback) : e._exit(k.callback)
                            }
                        };
                        i.addEventListener("fullscreenchange", e, !1), i.addEventListener("mozfullscreenchange", e, !1), i.addEventListener("webkitfullscreenchange", e, !1)
                    }
                }
            },
            D = [],
            C = [],
            T = !1,
            S = !1,
            F = [],
            M = function(e) {
                Galleria.theme = e, $.each(F, function(e, t) {
                    t._initialized || t._init.call(t)
                }), F = []
            },
            E = function() {
                return {
                    clearTimer: function(e) {
                        $.each(Galleria.get(), function() {
                            this.clearTimer(e)
                        })
                    },
                    addTimer: function(e) {
                        $.each(Galleria.get(), function() {
                            this.addTimer(e)
                        })
                    },
                    array: function(e) {
                        return r.slice.call(e, 0)
                    },
                    create: function(e, t) {
                        t = t || "div";
                        var a = i.createElement(t);
                        return a.className = e, a
                    },
                    removeFromArray: function(e, t) {
                        return $.each(e, function(i, a) {
                            return a == t ? (e.splice(i, 1), !1) : void 0
                        }), e
                    },
                    getScriptPath: function(e) {
                        e = e || $("script:last").attr("src");
                        var t = e.split("/");
                        return 1 == t.length ? "" : (t.pop(), t.join("/") + "/")
                    },
                    animate: function() {
                        var e = function(e) {
                                var i = "transition WebkitTransition MozTransition OTransition".split(" "),
                                    a;
                                if (t.opera) return !1;
                                for (a = 0; i[a]; a++)
                                    if ("undefined" != typeof e[i[a]]) return i[a];
                                return !1
                            }((i.body || i.documentElement).style),
                            a = {
                                MozTransition: "transitionend",
                                OTransition: "oTransitionEnd",
                                WebkitTransition: "webkitTransitionEnd",
                                transition: "transitionend"
                            }[e],
                            n = {
                                _default: [.25, .1, .25, 1],
                                galleria: [.645, .045, .355, 1],
                                galleriaIn: [.55, .085, .68, .53],
                                galleriaOut: [.25, .46, .45, .94],
                                ease: [.25, 0, .25, 1],
                                linear: [.25, .25, .75, .75],
                                "ease-in": [.42, 0, 1, 1],
                                "ease-out": [0, 0, .58, 1],
                                "ease-in-out": [.42, 0, .58, 1]
                            },
                            r = function(e, t, i) {
                                var a = {};
                                i = i || "transition", $.each("webkit moz ms o".split(" "), function() {
                                    a["-" + this + "-" + i] = t
                                }), e.css(a)
                            },
                            s = function(e) {
                                r(e, "none", "transition"), Galleria.WEBKIT && Galleria.TOUCH && (r(e, "translate3d(0,0,0)", "transform"), e.data("revert") && (e.css(e.data("revert")), e.data("revert", null)))
                            },
                            o, l, d, c, u, p, g;
                        return function(i, f, m) {
                            return m = $.extend({
                                duration: 400,
                                complete: h,
                                stop: !1
                            }, m), i = $(i), m.duration ? e ? (m.stop && (i.unbind(a), s(i)), o = !1, $.each(f, function(e, t) {
                                g = i.css(e), E.parseValue(g) != E.parseValue(t) && (o = !0), i.css(e, g)
                            }), o ? (l = [], d = m.easing in n ? n[m.easing] : n._default, c = " " + m.duration + "ms cubic-bezier(" + d.join(",") + ")", void t.setTimeout(function(e, t, i, a) {
                                return function() {
                                    e.one(t, function(e) {
                                        return function() {
                                            s(e), m.complete.call(e[0])
                                        }
                                    }(e)), Galleria.WEBKIT && Galleria.TOUCH && (u = {}, p = [0, 0, 0], $.each(["left", "top"], function(t, a) {
                                        a in i && (p[t] = E.parseValue(i[a]) - E.parseValue(e.css(a)) + "px", u[a] = i[a], delete i[a])
                                    }), (p[0] || p[1]) && (e.data("revert", u), l.push("-webkit-transform" + a), r(e, "translate3d(" + p.join(",") + ")", "transform"))), $.each(i, function(e, t) {
                                        l.push(e + a)
                                    }), r(e, l.join(",")), e.css(i)
                                }
                            }(i, a, f, c), 2)) : void t.setTimeout(function() {
                                m.complete.call(i[0])
                            }, m.duration)) : void i.animate(f, m) : (i.css(f), void m.complete.call(i[0]))
                        }
                    }(),
                    removeAlpha: function(e) {
                        if (9 > g && e) {
                            var t = e.style,
                                i = e.currentStyle,
                                a = i && i.filter || t.filter || "";
                            /alpha/.test(a) && (t.filter = a.replace(/alpha\([^)]*\)/i, ""))
                        }
                    },
                    forceStyles: function(e, t) {
                        e = $(e), e.attr("style") && e.data("styles", e.attr("style")).removeAttr("style"), e.css(t)
                    },
                    revertStyles: function() {
                        $.each(E.array(arguments), function(e, t) {
                            t = $(t), t.removeAttr("style"), t.attr("style", ""), t.data("styles") && t.attr("style", t.data("styles")).data("styles", null)
                        })
                    },
                    moveOut: function(e) {
                        E.forceStyles(e, {
                            position: "absolute",
                            left: -1e4
                        })
                    },
                    moveIn: function() {
                        E.revertStyles.apply(E, E.array(arguments))
                    },
                    elem: function(e) {
                        return e instanceof $ ? {
                            $: e,
                            dom: e[0]
                        } : {
                            $: $(e),
                            dom: e
                        }
                    },
                    hide: function(e, t, i) {
                        i = i || h;
                        var a = E.elem(e),
                            n = a.$;
                        e = a.dom, n.data("opacity") || n.data("opacity", n.css("opacity"));
                        var r = {
                            opacity: 0
                        };
                        if (t) {
                            var s = 9 > g && e ? function() {
                                E.removeAlpha(e), e.style.visibility = "hidden", i.call(e)
                            } : i;
                            E.animate(e, r, {
                                duration: t,
                                complete: s,
                                stop: !0
                            })
                        } else 9 > g && e ? (E.removeAlpha(e), e.style.visibility = "hidden") : n.css(r)
                    },
                    show: function(e, t, i) {
                        i = i || h;
                        var a = E.elem(e),
                            n = a.$;
                        e = a.dom;
                        var r = parseFloat(n.data("opacity")) || 1,
                            s = {
                                opacity: r
                            };
                        if (t) {
                            9 > g && (n.css("opacity", 0), e.style.visibility = "visible");
                            var o = 9 > g && e ? function() {
                                1 == s.opacity && E.removeAlpha(e), i.call(e)
                            } : i;
                            E.animate(e, s, {
                                duration: t,
                                complete: o,
                                stop: !0
                            })
                        } else 9 > g && 1 == s.opacity && e ? (E.removeAlpha(e), e.style.visibility = "visible") : n.css(s)
                    },
                    optimizeTouch: function() {
                        var e, t, i, a, n = {},
                            r = function(e) {
                                e.preventDefault(), n = $.extend({}, e, !0)
                            },
                            s = function() {
                                this.evt = n
                            },
                            o = function() {
                                this.handler.call(e, this.evt)
                            };
                        return function(n) {
                            $(n).bind("touchend", function(n) {
                                for (e = n.target, a = !0; e.parentNode && e != n.currentTarget && a;) t = $(e).data("events"), i = $(e).data("fakes"), t && "click" in t ? (a = !1, n.preventDefault(), $(e).click(r).click(), t.click.pop(), $.each(t.click, s), $(e).data("fakes", t.click), delete t.click) : i && (a = !1, n.preventDefault(), $.each(i, o)), e = e.parentNode
                            })
                        }
                    }(),
                    wait: function(e) {
                        e = $.extend({
                            until: p,
                            success: h,
                            error: function() {
                                Galleria.raise("Could not complete wait function.")
                            },
                            timeout: 3e3
                        }, e);
                        var i = E.timestamp(),
                            a, n, r = function() {
                                return n = E.timestamp(), a = n - i, e.until(a) ? (e.success(), !1) : "number" == typeof e.timeout && n >= i + e.timeout ? (e.error(), !1) : void t.setTimeout(r, 10)
                            };
                        t.setTimeout(r, 10)
                    },
                    toggleQuality: function(e, t) {
                        7 !== g && 8 !== g || !e || "IMG" != e.nodeName.toUpperCase() || ("undefined" == typeof t && (t = "nearest-neighbor" === e.style.msInterpolationMode), e.style.msInterpolationMode = t ? "bicubic" : "nearest-neighbor")
                    },
                    insertStyleTag: function(e, t) {
                        if (!t || !$("#" + t).length) {
                            var a = i.createElement("style");
                            if (t && (a.id = t), f().head.appendChild(a), a.styleSheet) a.styleSheet.cssText = e;
                            else {
                                var n = i.createTextNode(e);
                                a.appendChild(n)
                            }
                        }
                    },
                    loadScript: function(e, t) {
                        var i = !1,
                            a = $("<script>").attr({
                                src: e,
                                async: !0
                            }).get(0);
                        a.onload = a.onreadystatechange = function() {
                            i || this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState || (i = !0, a.onload = a.onreadystatechange = null, "function" == typeof t && t.call(this, this))
                        }, f().head.appendChild(a)
                    },
                    parseValue: function(e) {
                        if ("number" == typeof e) return e;
                        if ("string" == typeof e) {
                            var t = e.match(/\-?\d|\./g);
                            return t && t.constructor === Array ? 1 * t.join("") : 0
                        }
                        return 0
                    },
                    timestamp: function() {
                        return (new Date).getTime()
                    },
                    loadCSS: function(t, a, n) {
                        var r, s;
                        if ($("link[rel=stylesheet]").each(function() {
                                return new RegExp(t).test(this.href) ? (r = this, !1) : void 0
                            }), "function" == typeof a && (n = a, a = e), n = n || h, r) return n.call(r, r), r;
                        if (s = i.styleSheets.length, $("#" + a).length) $("#" + a).attr("href", t), s--;
                        else {
                            r = $("<link>").attr({
                                rel: "stylesheet",
                                href: t,
                                id: a
                            }).get(0);
                            var o = $('link[rel="stylesheet"], style');
                            if (o.length ? o.get(0).parentNode.insertBefore(r, o[0]) : f().head.appendChild(r), g && s >= 31) return void Galleria.raise("You have reached the browser stylesheet limit (31)", !0)
                        }
                        if ("function" == typeof n) {
                            var l = $("<s>").attr("id", "galleria-loader").hide().appendTo(f().body);
                            E.wait({
                                until: function() {
                                    return 1 == l.height()
                                },
                                success: function() {
                                    l.remove(), n.call(r, r)
                                },
                                error: function() {
                                    l.remove(), Galleria.raise("Theme CSS could not load after 20 sec. " + (Galleria.QUIRK ? "Your browser is in Quirks Mode, please add a correct doctype." : "Please download the latest theme at http://galleria.io/customer/."), !0)
                                },
                                timeout: 5e3
                            })
                        }
                        return r
                    }
                }
            }(),
            I = function() {
                var e = function(e, t, i, a) {
                    var n = this.getOptions("easing"),
                        r = this.getStageWidth(),
                        s = {
                            left: r * (e.rewind ? -1 : 1)
                        },
                        o = {
                            left: 0
                        };
                    i ? (s.opacity = 0, o.opacity = 1) : s.opacity = 1, $(e.next).css(s), E.animate(e.next, o, {
                        duration: e.speed,
                        complete: function(e) {
                            return function() {
                                t(), e.css({
                                    left: 0
                                })
                            }
                        }($(e.next).add(e.prev)),
                        queue: !1,
                        easing: n
                    }), a && (e.rewind = !e.rewind), e.prev && (s = {
                        left: 0
                    }, o = {
                        left: r * (e.rewind ? 1 : -1)
                    }, i && (s.opacity = 1, o.opacity = 0), $(e.prev).css(s), E.animate(e.prev, o, {
                        duration: e.speed,
                        queue: !1,
                        easing: n,
                        complete: function() {
                            $(this).css("opacity", 0)
                        }
                    }))
                };
                return {
                    active: !1,
                    init: function(e, t, i) {
                        I.effects.hasOwnProperty(e) && I.effects[e].call(this, t, i)
                    },
                    effects: {
                        fade: function(e, t) {
                            $(e.next).css({
                                opacity: 0,
                                left: 0
                            }), E.animate(e.next, {
                                opacity: 1
                            }, {
                                duration: e.speed,
                                complete: t
                            }), e.prev && ($(e.prev).css("opacity", 1).show(), E.animate(e.prev, {
                                opacity: 0
                            }, {
                                duration: e.speed
                            }))
                        },
                        flash: function(e, t) {
                            $(e.next).css({
                                opacity: 0,
                                left: 0
                            }), e.prev ? E.animate(e.prev, {
                                opacity: 0
                            }, {
                                duration: e.speed / 2,
                                complete: function() {
                                    E.animate(e.next, {
                                        opacity: 1
                                    }, {
                                        duration: e.speed,
                                        complete: t
                                    })
                                }
                            }) : E.animate(e.next, {
                                opacity: 1
                            }, {
                                duration: e.speed,
                                complete: t
                            })
                        },
                        pulse: function(e, t) {
                            e.prev && $(e.prev).hide(), $(e.next).css({
                                opacity: 0,
                                left: 0
                            }).show(), E.animate(e.next, {
                                opacity: 1
                            }, {
                                duration: e.speed,
                                complete: t
                            })
                        },
                        slide: function(t, i) {
                            e.apply(this, E.array(arguments))
                        },
                        fadeslide: function(t, i) {
                            e.apply(this, E.array(arguments).concat([!0]))
                        },
                        doorslide: function(t, i) {
                            e.apply(this, E.array(arguments).concat([!1, !0]))
                        }
                    }
                }
            }();
        k.listen(), Galleria = function() {
            var r = this;
            this._options = {}, this._playing = !1, this._playtime = 5e3, this._active = null, this._queue = {
                length: 0
            }, this._data = [], this._dom = {}, this._thumbnails = [], this._layers = [], this._initialized = !1, this._firstrun = !1, this._stageWidth = 0, this._stageHeight = 0, this._target = e, this._binds = [], this._id = parseInt(1e4 * Math.random(), 10);
            var s = "container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",
                o = "current total";
            $.each(s.split(" "), function(e, t) {
                r._dom[t] = E.create("galleria-" + t)
            }), $.each(o.split(" "), function(e, t) {
                r._dom[t] = E.create("galleria-" + t, "span")
            });
            var l = this._keyboard = {
                    keys: {
                        UP: 38,
                        DOWN: 40,
                        LEFT: 37,
                        RIGHT: 39,
                        RETURN: 13,
                        ESCAPE: 27,
                        BACKSPACE: 8,
                        SPACE: 32
                    },
                    map: {},
                    bound: !1,
                    press: function(e) {
                        var t = e.keyCode || e.which;
                        t in l.map && "function" == typeof l.map[t] && l.map[t].call(r, e)
                    },
                    attach: function(e) {
                        var t, i;
                        for (t in e) e.hasOwnProperty(t) && (i = t.toUpperCase(), i in l.keys ? l.map[l.keys[i]] = e[t] : l.map[i] = e[t]);
                        l.bound || (l.bound = !0, a.bind("keydown", l.press))
                    },
                    detach: function() {
                        l.bound = !1, l.map = {}, a.unbind("keydown", l.press)
                    }
                },
                d = this._controls = {
                    0: e,
                    1: e,
                    active: 0,
                    swap: function() {
                        d.active = d.active ? 0 : 1
                    },
                    getActive: function() {
                        return d[d.active]
                    },
                    getNext: function() {
                        return d[1 - d.active]
                    }
                },
                u = this._carousel = {
                    next: r.$("thumb-nav-right"),
                    prev: r.$("thumb-nav-left"),
                    width: 0,
                    current: 0,
                    max: 0,
                    hooks: [],
                    update: function() {
                        var e = 0,
                            t = 0,
                            i = [0];
                        $.each(r._thumbnails, function(a, n) {
                            n.ready && (e += n.outerWidth || $(n.container).outerWidth(!0), i[a + 1] = e, t = Math.max(t, n.outerHeight || $(n.container).outerHeight(!0)))
                        }), r.$("thumbnails").css({
                            width: e,
                            height: t
                        }), u.max = e, u.hooks = i, u.width = r.$("thumbnails-list").width(), u.setClasses(), r.$("thumbnails-container").toggleClass("galleria-carousel", e > u.width), u.width = r.$("thumbnails-list").width()
                    },
                    bindControls: function() {
                        var e;
                        u.next.bind("click", function(t) {
                            if (t.preventDefault(), "auto" === r._options.carouselSteps) {
                                for (e = u.current; e < u.hooks.length; e++)
                                    if (u.hooks[e] - u.hooks[u.current] > u.width) {
                                        u.set(e - 2);
                                        break
                                    }
                            } else u.set(u.current + r._options.carouselSteps)
                        }), u.prev.bind("click", function(t) {
                            if (t.preventDefault(), "auto" === r._options.carouselSteps)
                                for (e = u.current; e >= 0; e--) {
                                    if (u.hooks[u.current] - u.hooks[e] > u.width) {
                                        u.set(e + 2);
                                        break
                                    }
                                    if (0 === e) {
                                        u.set(0);
                                        break
                                    }
                                } else u.set(u.current - r._options.carouselSteps)
                        })
                    },
                    set: function(e) {
                        for (e = Math.max(e, 0); u.hooks[e - 1] + u.width >= u.max && e >= 0;) e--;
                        u.current = e, u.animate()
                    },
                    getLast: function(e) {
                        return (e || u.current) - 1
                    },
                    follow: function(e) {
                        if (0 === e || e === u.hooks.length - 2) return void u.set(e);
                        for (var t = u.current; u.hooks[t] - u.hooks[u.current] < u.width && t <= u.hooks.length;) t++;
                        e - 1 < u.current ? u.set(e - 1) : e + 2 > t && u.set(e - t + u.current + 2)
                    },
                    setClasses: function() {
                        u.prev.toggleClass("disabled", !u.current), u.next.toggleClass("disabled", u.hooks[u.current] + u.width >= u.max)
                    },
                    animate: function(e) {
                        u.setClasses();
                        var t = -1 * u.hooks[u.current];
                        isNaN(t) || E.animate(r.get("thumbnails"), {
                            left: t
                        }, {
                            duration: r._options.carouselSpeed,
                            easing: r._options.easing,
                            queue: !1
                        })
                    }
                },
                h = this._tooltip = {
                    initialized: !1,
                    open: !1,
                    timer: "tooltip" + r._id,
                    swapTimer: "swap" + r._id,
                    init: function() {
                        h.initialized = !0;
                        var e = ".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";
                        E.insertStyleTag(e, "galleria-tooltip"), r.$("tooltip").css({
                            opacity: .8,
                            visibility: "visible",
                            display: "none"
                        })
                    },
                    move: function(e) {
                        var t = r.getMousePosition(e).x,
                            i = r.getMousePosition(e).y,
                            a = r.$("tooltip"),
                            n = t,
                            s = i,
                            o = a.outerHeight(!0) + 1,
                            l = a.outerWidth(!0),
                            d = o + 15,
                            c = r.$("container").width() - l - 2,
                            u = r.$("container").height() - o - 2;
                        isNaN(n) || isNaN(s) || (n += 10, s -= o + 8, n = Math.max(0, Math.min(c, n)), s = Math.max(0, Math.min(u, s)), d > i && (s = d), a.css({
                            left: n,
                            top: s
                        }))
                    },
                    bind: function(e, t) {
                        if (!Galleria.TOUCH) {
                            h.initialized || h.init();
                            var i = function() {
                                    r.$("container").unbind("mousemove", h.move), r.clearTimer(h.timer), r.$("tooltip").stop().animate({
                                        opacity: 0
                                    }, 200, function() {
                                        r.$("tooltip").hide(), r.addTimer(h.swapTimer, function() {
                                            h.open = !1
                                        }, 1e3)
                                    })
                                },
                                a = function(e, t) {
                                    h.define(e, t), $(e).hover(function() {
                                        r.clearTimer(h.swapTimer), r.$("container").unbind("mousemove", h.move).bind("mousemove", h.move).trigger("mousemove"), h.show(e), r.addTimer(h.timer, function() {
                                            r.$("tooltip").stop().show().animate({
                                                opacity: 1
                                            }), h.open = !0
                                        }, h.open ? 0 : 500)
                                    }, i).click(i)
                                };
                            "string" == typeof t ? a(e in r._dom ? r.get(e) : e, t) : $.each(e, function(e, t) {
                                a(r.get(e), t)
                            })
                        }
                    },
                    show: function(e) {
                        e = $(e in r._dom ? r.get(e) : e);
                        var i = e.data("tt"),
                            a = function(i) {
                                t.setTimeout(function(e) {
                                    return function() {
                                        h.move(e)
                                    }
                                }(i), 10), e.unbind("mouseup", a)
                            };
                        i = "function" == typeof i ? i() : i, i && (r.$("tooltip").html(i.replace(/\s/, "&#160;")), e.bind("mouseup", a))
                    },
                    define: function(e, t) {
                        if ("function" != typeof t) {
                            var i = t;
                            t = function() {
                                return i
                            }
                        }
                        e = $(e in r._dom ? r.get(e) : e).data("tt", t), h.show(e)
                    }
                },
                p = this._fullscreen = {
                    scrolled: 0,
                    crop: e,
                    active: !1,
                    keymap: r._keyboard.map,
                    parseCallback: function(e, t) {
                        return I.active ? function() {
                            "function" == typeof e && e.call(r);
                            var i = r._controls.getActive(),
                                a = r._controls.getNext();
                            r._scaleImage(a), r._scaleImage(i), t && r._options.trueFullscreen && $(i.container).add(a.container).trigger("transitionend")
                        } : e
                    },
                    enter: function(e) {
                        e = p.parseCallback(e, !0), r._options.trueFullscreen && k.support ? (p.active = !0, E.forceStyles(r.get("container"), {
                            width: "100%",
                            height: "100%"
                        }), r.rescale(), Galleria.MAC ? !Galleria.WEBKIT || Galleria.SAFARI && /version\/[1-5]/.test(c) ? (r.$("stage").css("opacity", 0), t.setTimeout(function() {
                            p.scale(), r.$("stage").css("opacity", 1)
                        }, 4)) : (r.$("container").css("opacity", 0).addClass("fullscreen"), t.setTimeout(function() {
                            p.scale(), r.$("container").css("opacity", 1)
                        }, 50)) : r.$("container").addClass("fullscreen"), n.resize(p.scale), k.enter(r, e, r.get("container"))) : (p.scrolled = n.scrollTop(), t.scrollTo(0, 0), p._enter(e))
                    },
                    _enter: function(a) {
                        p.active = !0, m && (p.iframe = function() {
                            var e, a = i.referrer,
                                n = i.createElement("a"),
                                r = t.location;
                            return n.href = a, n.protocol != r.protocol || n.hostname != r.hostname || n.port != r.port ? (Galleria.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."), !1) : (p.pd = t.parent.document, $(p.pd).find("iframe").each(function() {
                                var t = this.contentDocument || this.contentWindow.document;
                                return t === i ? (e = this, !1) : void 0
                            }), e)
                        }()), E.hide(r.getActiveImage()), m && p.iframe && (p.iframe.scrolled = $(t.parent).scrollTop(), t.parent.scrollTo(0, 0));
                        var s = r.getData(),
                            o = r._options,
                            l = !r._options.trueFullscreen || !k.support,
                            d = {
                                height: "100%",
                                overflow: "hidden",
                                margin: 0,
                                padding: 0
                            };
                        if (l && (r.$("container").addClass("fullscreen"), E.forceStyles(r.get("container"), {
                                position: "fixed",
                                top: 0,
                                left: 0,
                                width: "100%",
                                height: "100%",
                                zIndex: 1e4
                            }), E.forceStyles(f().html, d), E.forceStyles(f().body, d)), m && p.iframe && (E.forceStyles(p.pd.documentElement, d), E.forceStyles(p.pd.body, d), E.forceStyles(p.iframe, $.extend(d, {
                                width: "100%",
                                height: "100%",
                                top: 0,
                                left: 0,
                                position: "fixed",
                                zIndex: 1e4,
                                border: "none"
                            }))), p.keymap = $.extend({}, r._keyboard.map), r.attachKeyboard({
                                escape: r.exitFullscreen,
                                right: r.next,
                                left: r.prev
                            }), p.crop = o.imageCrop, o.fullscreenCrop != e && (o.imageCrop = o.fullscreenCrop), s && s.big && s.image !== s.big) {
                            var c = new Galleria.Picture,
                                u = c.isCached(s.big),
                                h = r.getIndex(),
                                g = r._thumbnails[h];
                            r.trigger({
                                type: Galleria.LOADSTART,
                                cached: u,
                                rewind: !1,
                                index: h,
                                imageTarget: r.getActiveImage(),
                                thumbTarget: g,
                                galleriaData: s
                            }), c.load(s.big, function(e) {
                                r._scaleImage(e, {
                                    complete: function(e) {
                                        r.trigger({
                                            type: Galleria.LOADFINISH,
                                            cached: u,
                                            index: h,
                                            rewind: !1,
                                            imageTarget: e.image,
                                            thumbTarget: g
                                        });
                                        var t = r._controls.getActive().image;
                                        t && $(t).width(e.image.width).height(e.image.height).attr("style", $(e.image).attr("style")).attr("src", e.image.src)
                                    }
                                })
                            })
                        }
                        r.rescale(function() {
                            r.addTimer(!1, function() {
                                l && E.show(r.getActiveImage()), "function" == typeof a && a.call(r)
                            }, 100), r.trigger(Galleria.FULLSCREEN_ENTER)
                        }), l ? n.resize(p.scale) : E.show(r.getActiveImage())
                    },
                    scale: function() {
                        r.rescale()
                    },
                    exit: function(e) {
                        e = p.parseCallback(e), r._options.trueFullscreen && k.support ? k.exit(e) : p._exit(e)
                    },
                    _exit: function(e) {
                        p.active = !1;
                        var i = !r._options.trueFullscreen || !k.support;
                        r.$("container").removeClass("fullscreen"), i && (E.hide(r.getActiveImage()), E.revertStyles(r.get("container"), f().html, f().body), t.scrollTo(0, p.scrolled)), m && p.iframe && (E.revertStyles(p.pd.documentElement, p.pd.body, p.iframe), p.iframe.scrolled && t.parent.scrollTo(0, p.iframe.scrolled)), r.detachKeyboard(), r.attachKeyboard(p.keymap), r._options.imageCrop = p.crop;
                        var a = r.getData().big,
                            s = r._controls.getActive().image;
                        !r.getData().iframe && s && a && a == s.src && t.setTimeout(function(e) {
                            return function() {
                                s.src = e
                            }
                        }(r.getData().image), 1), r.rescale(function() {
                            r.addTimer(!1, function() {
                                i && E.show(r.getActiveImage()), "function" == typeof e && e.call(r), n.trigger("resize")
                            }, 50), r.trigger(Galleria.FULLSCREEN_EXIT)
                        }), n.unbind("resize", p.scale)
                    }
                },
                v = this._idle = {
                    trunk: [],
                    bound: !1,
                    active: !1,
                    add: function(e, t, i, a) {
                        if (e) {
                            v.bound || v.addEvent(), e = $(e), "boolean" == typeof i && (a = i, i = {}), i = i || {};
                            var n = {},
                                r;
                            for (r in t) t.hasOwnProperty(r) && (n[r] = e.css(r));
                            e.data("idle", {
                                from: $.extend(n, i),
                                to: t,
                                complete: !0,
                                busy: !1
                            }), a ? e.css(t) : v.addTimer(), v.trunk.push(e)
                        }
                    },
                    remove: function(e) {
                        e = $(e), $.each(v.trunk, function(t, i) {
                            i && i.length && !i.not(e).length && (e.css(e.data("idle").from), v.trunk.splice(t, 1))
                        }), v.trunk.length || (v.removeEvent(), r.clearTimer(v.timer))
                    },
                    addEvent: function() {
                        v.bound = !0, r.$("container").bind("mousemove click", v.showAll), "hover" == r._options.idleMode && r.$("container").bind("mouseleave", v.hide)
                    },
                    removeEvent: function() {
                        v.bound = !1, r.$("container").bind("mousemove click", v.showAll), "hover" == r._options.idleMode && r.$("container").unbind("mouseleave", v.hide)
                    },
                    addTimer: function() {
                        "hover" != r._options.idleMode && r.addTimer("idle", function() {
                            v.hide()
                        }, r._options.idleTime)
                    },
                    hide: function() {
                        if (r._options.idleMode && r.getIndex() !== !1 && !r.getData().iframe) {
                            r.trigger(Galleria.IDLE_ENTER);
                            var e = v.trunk.length;
                            $.each(v.trunk, function(t, i) {
                                var a = i.data("idle");
                                a && (i.data("idle").complete = !1, E.animate(i, a.to, {
                                    duration: r._options.idleSpeed,
                                    complete: function() {
                                        t == e - 1 && (v.active = !1)
                                    }
                                }))
                            })
                        }
                    },
                    showAll: function() {
                        r.clearTimer("idle"), $.each(v.trunk, function(e, t) {
                            v.show(t)
                        })
                    },
                    show: function(e) {
                        var t = e.data("idle");
                        v.active && (t.busy || t.complete) || (t.busy = !0, r.trigger(Galleria.IDLE_EXIT), r.clearTimer("idle"), E.animate(e, t.from, {
                            duration: r._options.idleSpeed / 2,
                            complete: function() {
                                v.active = !0, $(e).data("idle").busy = !1, $(e).data("idle").complete = !0
                            }
                        })), v.addTimer()
                    }
                },
                y = this._lightbox = {
                    width: 0,
                    height: 0,
                    initialized: !1,
                    active: null,
                    image: null,
                    elems: {},
                    keymap: !1,
                    init: function() {
                        if (r.trigger(Galleria.LIGHTBOX_OPEN), !y.initialized) {
                            y.initialized = !0;
                            var e = "overlay box content shadow title info close prevholder prev nextholder next counter image",
                                t = {},
                                i = r._options,
                                a = "",
                                n = "position:absolute;",
                                s = "lightbox-",
                                o = {
                                    overlay: "position:fixed;display:none;opacity:" + i.overlayOpacity + ";filter:alpha(opacity=" + 100 * i.overlayOpacity + ");top:0;left:0;width:100%;height:100%;background:" + i.overlayBackground + ";z-index:99990",
                                    box: "position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",
                                    shadow: n + "background:#000;width:100%;height:100%;",
                                    content: n + "background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",
                                    info: n + "bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",
                                    close: n + "top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",
                                    image: n + "top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",
                                    prevholder: n + "width:50%;top:0;bottom:40px;cursor:pointer;",
                                    nextholder: n + "width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",
                                    prev: n + "top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",
                                    next: n + "top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",
                                    title: "float:left",
                                    counter: "float:right;margin-left:8px;"
                                },
                                l = function(e) {
                                    return e.hover(function() {
                                        $(this).css("color", "#bbb")
                                    }, function() {
                                        $(this).css("color", "#444")
                                    })
                                },
                                d = {};
                            g && g > 7 && (o.nextholder += "background:#000;filter:alpha(opacity=0);", o.prevholder += "background:#000;filter:alpha(opacity=0);"), $.each(o, function(e, t) {
                                a += ".galleria-" + s + e + "{" + t + "}"
                            }), a += ".galleria-" + s + "box.iframe .galleria-" + s + "prevholder,.galleria-" + s + "box.iframe .galleria-" + s + "nextholder{width:100px;height:100px;top:50%;margin-top:-70px}", E.insertStyleTag(a, "galleria-lightbox"), $.each(e.split(" "), function(e, i) {
                                r.addElement("lightbox-" + i), t[i] = y.elems[i] = r.get("lightbox-" + i)
                            }), y.image = new Galleria.Picture, $.each({
                                box: "shadow content close prevholder nextholder",
                                info: "title counter",
                                content: "info image",
                                prevholder: "prev",
                                nextholder: "next"
                            }, function(e, t) {
                                var i = [];
                                $.each(t.split(" "), function(e, t) {
                                    i.push(s + t)
                                }), d[s + e] = i
                            }), r.append(d), $(t.image).append(y.image.container), $(f().body).append(t.overlay, t.box), E.optimizeTouch(t.box), l($(t.close).bind("click", y.hide).html("&#215;")), $.each(["Prev", "Next"], function(e, i) {
                                var a = $(t[i.toLowerCase()]).html(/v/.test(i) ? "&#8249;&#160;" : "&#160;&#8250;"),
                                    n = $(t[i.toLowerCase() + "holder"]);
                                return n.bind("click", function() {
                                    y["show" + i]()
                                }), 8 > g || Galleria.TOUCH ? void a.show() : void n.hover(function() {
                                    a.show()
                                }, function(e) {
                                    a.stop().fadeOut(200)
                                })
                            }), $(t.overlay).bind("click", y.hide), Galleria.IPAD && (r._options.lightboxTransitionSpeed = 0)
                        }
                    },
                    rescale: function(e) {
                        var t = Math.min(n.width() - 40, y.width),
                            i = Math.min(n.height() - 60, y.height),
                            a = Math.min(t / y.width, i / y.height),
                            s = Math.round(y.width * a) + 40,
                            o = Math.round(y.height * a) + 60,
                            l = {
                                width: s,
                                height: o,
                                "margin-top": -1 * Math.ceil(o / 2),
                                "margin-left": -1 * Math.ceil(s / 2)
                            };
                        e ? $(y.elems.box).css(l) : $(y.elems.box).animate(l, {
                            duration: r._options.lightboxTransitionSpeed,
                            easing: r._options.easing,
                            complete: function() {
                                var e = y.image,
                                    t = r._options.lightboxFadeSpeed;
                                r.trigger({
                                    type: Galleria.LIGHTBOX_IMAGE,
                                    imageTarget: e.image
                                }), $(e.container).show(), $(e.image).animate({
                                    opacity: 1
                                }, t), E.show(y.elems.info, t)
                            }
                        })
                    },
                    hide: function() {
                        y.image.image = null, n.unbind("resize", y.rescale), $(y.elems.box).hide(), E.hide(y.elems.info), r.detachKeyboard(), r.attachKeyboard(y.keymap), y.keymap = !1, E.hide(y.elems.overlay, 200, function() {
                            $(this).hide().css("opacity", r._options.overlayOpacity), r.trigger(Galleria.LIGHTBOX_CLOSE)
                        })
                    },
                    showNext: function() {
                        y.show(r.getNext(y.active))
                    },
                    showPrev: function() {
                        y.show(r.getPrev(y.active))
                    },
                    show: function(e) {
                        y.active = e = "number" == typeof e ? e : r.getIndex() || 0, y.initialized || y.init(), y.keymap || (y.keymap = $.extend({}, r._keyboard.map), r.attachKeyboard({
                            escape: y.hide,
                            right: y.showNext,
                            left: y.showPrev
                        })), n.unbind("resize", y.rescale);
                        var i = r.getData(e),
                            a = r.getDataLength(),
                            s = r.getNext(e),
                            o, l, d;
                        E.hide(y.elems.info);
                        try {
                            for (d = r._options.preload; d > 0; d--) l = new Galleria.Picture, o = r.getData(s), l.preload("big" in o ? o.big : o.image), s = r.getNext(s)
                        } catch (c) {}
                        y.image.isIframe = !!i.iframe, $(y.elems.box).toggleClass("iframe", !!i.iframe), y.image.load(i.iframe || i.big || i.image, function(s) {
                            if (s.isIframe) {
                                var o = $(t).width(),
                                    l = $(t).height();
                                if (r._options.maxVideoSize) {
                                    var d = Math.min(r._options.maxVideoSize / o, r._options.maxVideoSize / l);
                                    1 > d && (o *= d, l *= d)
                                }
                                y.width = o, y.height = l
                            } else y.width = s.original.width, y.height = s.original.height;
                            $(s.image).css({
                                width: s.isIframe ? "100%" : "100.1%",
                                height: s.isIframe ? "100%" : "100.1%",
                                top: 0,
                                zIndex: 99998,
                                opacity: 0,
                                visibility: "visible"
                            }), y.elems.title.innerHTML = i.title || "", y.elems.counter.innerHTML = e + 1 + " / " + a, n.resize(y.rescale), y.rescale()
                        }), $(y.elems.overlay).show().css("visibility", "visible"), $(y.elems.box).show()
                    }
                },
                b = this._timer = {
                    trunk: {},
                    add: function(e, i, a, n) {
                        if (e = e || (new Date).getTime(), n = n || !1, this.clear(e), n) {
                            var r = i;
                            i = function() {
                                r(), b.add(e, i, a)
                            }
                        }
                        this.trunk[e] = t.setTimeout(i, a)
                    },
                    clear: function(e) {
                        var i = function(e) {
                                t.clearTimeout(this.trunk[e]), delete this.trunk[e]
                            },
                            a;
                        if (e && e in this.trunk) i.call(this, e);
                        else if ("undefined" == typeof e)
                            for (a in this.trunk) this.trunk.hasOwnProperty(a) && i.call(this, a)
                    }
                };
            return this
        }, Galleria.prototype = {
            constructor: Galleria,
            init: function(t, i) {
                var a = this;
                return i = b(i), this._original = {
                    target: t,
                    options: i,
                    data: null
                }, this._target = this._dom.target = t.nodeName ? t : $(t).get(0), this._original.html = this._target.innerHTML, C.push(this), this._target ? (this._options = {
                    autoplay: !1,
                    carousel: !0,
                    carouselFollow: !0,
                    carouselSpeed: 400,
                    carouselSteps: "auto",
                    clicknext: !1,
                    dailymotion: {
                        foreground: "%23EEEEEE",
                        highlight: "%235BCEC5",
                        background: "%23222222",
                        logo: 0,
                        hideInfos: 1
                    },
                    dataConfig: function(e) {
                        return {}
                    },
                    dataSelector: "img",
                    dataSort: !1,
                    dataSource: this._target,
                    debug: e,
                    dummy: e,
                    easing: "galleria",
                    extend: function(e) {},
                    fullscreenCrop: e,
                    fullscreenDoubleTap: !0,
                    fullscreenTransition: e,
                    height: 0,
                    idleMode: !0,
                    idleTime: 3e3,
                    idleSpeed: 200,
                    imageCrop: !1,
                    imageMargin: 0,
                    imagePan: !1,
                    imagePanSmoothness: 12,
                    imagePosition: "50%",
                    imageTimeout: e,
                    initialTransition: e,
                    keepSource: !1,
                    layerFollow: !0,
                    lightbox: !1,
                    lightboxFadeSpeed: 200,
                    lightboxTransitionSpeed: 200,
                    linkSourceImages: !0,
                    maxScaleRatio: e,
                    maxVideoSize: e,
                    minScaleRatio: e,
                    overlayOpacity: .85,
                    overlayBackground: "#0b0b0b",
                    pauseOnInteraction: !0,
                    popupLinks: !1,
                    preload: 2,
                    queue: !0,
                    responsive: !0,
                    show: 0,
                    showInfo: !0,
                    showCounter: !0,
                    showImagenav: !0,
                    swipe: !0,
                    thumbCrop: !0,
                    thumbEventType: "click",
                    thumbFit: !0,
                    thumbMargin: 0,
                    thumbQuality: "auto",
                    thumbDisplayOrder: !0,
                    thumbnails: !0,
                    touchTransition: e,
                    transition: "fade",
                    transitionInitial: e,
                    transitionSpeed: 400,
                    trueFullscreen: !0,
                    useCanvas: !1,
                    vimeo: {
                        title: 0,
                        byline: 0,
                        portrait: 0,
                        color: "aaaaaa"
                    },
                    wait: 5e3,
                    width: "auto",
                    youtube: {
                        modestbranding: 1,
                        autohide: 1,
                        color: "white",
                        hd: 1,
                        rel: 0,
                        showinfo: 0
                    }
                }, this._options.initialTransition = this._options.initialTransition || this._options.transitionInitial, i && i.debug === !1 && (o = !1), i && "number" == typeof i.imageTimeout && (l = i.imageTimeout), i && "string" == typeof i.dummy && (d = i.dummy), $(this._target).children().hide(), Galleria.QUIRK && Galleria.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."), "object" == typeof Galleria.theme ? this._init() : F.push(this), this) : void Galleria.raise("Target not found", !0)
            },
            _init: function() {
                var e = this,
                    a = this._options;
                if (this._initialized) return Galleria.raise("Init failed: Gallery instance already initialized."), this;
                if (this._initialized = !0, !Galleria.theme) return Galleria.raise("Init failed: No theme found.", !0), this;
                if ($.extend(!0, a, Galleria.theme.defaults, this._original.options, Galleria.configure.options), function(e) {
                        return "getContext" in e ? void(S = S || {
                            elem: e,
                            context: e.getContext("2d"),
                            cache: {},
                            length: 0
                        }) : void(e = null)
                    }(i.createElement("canvas")), this.bind(Galleria.DATA, function() {
                        this._original.data = this._data, this.get("total").innerHTML = this.getDataLength();
                        var i = this.$("container");
                        e._options.height < 2 && (e._userRatio = e._ratio = e._options.height);
                        var a = {
                                width: 0,
                                height: 0
                            },
                            n = function() {
                                return e.$("stage").height()
                            };
                        E.wait({
                            until: function() {
                                return a = e._getWH(), i.width(a.width).height(a.height), n() && a.width && a.height > 50
                            },
                            success: function() {
                                e._width = a.width, e._height = a.height, e._ratio = e._ratio || a.height / a.width, Galleria.WEBKIT ? t.setTimeout(function() {
                                    e._run()
                                }, 1) : e._run()
                            },
                            error: function() {
                                n() ? Galleria.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:" + a.width + "px, height: " + a.height + "px.", !0) : Galleria.raise("Could not extract a stage height from the CSS. Traced height: " + n() + "px.", !0)
                            },
                            timeout: "number" == typeof this._options.wait ? this._options.wait : !1
                        })
                    }), this.append({
                        "info-text": ["info-title", "info-description"],
                        info: ["info-text"],
                        "image-nav": ["image-nav-right", "image-nav-left"],
                        stage: ["images", "loader", "counter", "image-nav"],
                        "thumbnails-list": ["thumbnails"],
                        "thumbnails-container": ["thumb-nav-left", "thumbnails-list", "thumb-nav-right"],
                        container: ["stage", "thumbnails-container", "info", "tooltip"]
                    }), E.hide(this.$("counter").append(this.get("current"), i.createTextNode(" / "), this.get("total"))), this.setCounter("&#8211;"), E.hide(e.get("tooltip")), this.$("container").addClass(Galleria.TOUCH ? "touch" : "notouch"), $.each(new Array(2), function(t) {
                        var i = new Galleria.Picture;
                        $(i.container).css({
                            position: "absolute",
                            top: 0,
                            left: 0
                        }).prepend(e._layers[t] = $(E.create("galleria-layer")).css({
                            position: "absolute",
                            top: 0,
                            left: 0,
                            right: 0,
                            bottom: 0,
                            zIndex: 2
                        })[0]), e.$("images").append(i.container), e._controls[t] = i
                    }), this.$("images").css({
                        position: "relative",
                        top: 0,
                        left: 0,
                        width: "100%",
                        height: "100%"
                    }), this.$("thumbnails, thumbnails-list").css({
                        overflow: "hidden",
                        position: "relative"
                    }), this.$("image-nav-right, image-nav-left").bind("click", function(t) {
                        a.clicknext && t.stopPropagation(), a.pauseOnInteraction && e.pause();
                        var i = /right/.test(this.className) ? "next" : "prev";
                        e[i]()
                    }), $.each(["info", "counter", "image-nav"], function(t, i) {
                        a["show" + i.substr(0, 1).toUpperCase() + i.substr(1).replace(/-/, "")] === !1 && E.moveOut(e.get(i.toLowerCase()))
                    }), this.load(), a.keepSource || g || (this._target.innerHTML = ""), this.get("errors") && this.appendChild("target", "errors"), this.appendChild("target", "container"), a.carousel) {
                    var r = 0,
                        s = a.show;
                    this.bind(Galleria.THUMBNAIL, function() {
                        this.updateCarousel(), ++r == this.getDataLength() && "number" == typeof s && s > 0 && this._carousel.follow(s)
                    })
                }
                return a.responsive && n.bind("resize", function() {
                    e.isFullscreen() || e.resize()
                }), a.swipe && (! function(t) {
                    var i = [0, 0],
                        a = [0, 0],
                        n = 30,
                        r = 100,
                        s = !1,
                        o = 0,
                        l, d = {
                            start: "touchstart",
                            move: "touchmove",
                            stop: "touchend"
                        },
                        c = function(e) {
                            return e.originalEvent.touches ? e.originalEvent.touches[0] : e
                        },
                        u = function(e) {
                            e.originalEvent.touches && e.originalEvent.touches.length > 1 || (l = c(e), a = [l.pageX, l.pageY], i[0] || (i = a), Math.abs(i[0] - a[0]) > 10 && e.preventDefault())
                        },
                        h = function(l) {
                            return t.unbind(d.move, u), l.originalEvent.touches && l.originalEvent.touches.length || s ? void(s = !s) : (E.timestamp() - o < 1e3 && Math.abs(i[0] - a[0]) > n && Math.abs(i[1] - a[1]) < r && (l.preventDefault(), e[i[0] > a[0] ? "next" : "prev"]()), void(i = a = [0, 0]))
                        };
                    t.bind(d.start, function(e) {
                        e.originalEvent.touches && e.originalEvent.touches.length > 1 || (l = c(e), o = E.timestamp(), i = a = [l.pageX, l.pageY], t.bind(d.move, u).one(d.stop, h))
                    })
                }(e.$("images")), a.fullscreenDoubleTap && this.$("stage").bind("touchstart", function() {
                    var t, i, a, n, r, s, o = function(e) {
                        return e.originalEvent.touches ? e.originalEvent.touches[0] : e
                    };
                    return function(l) {
                        return s = Galleria.utils.timestamp(), i = o(l).pageX, a = o(l).pageY, 500 > s - t && 20 > i - n && 20 > a - r ? (e.toggleFullscreen(), l.preventDefault(), void e.$("stage").unbind("touchend", arguments.callee)) : (t = s, n = i, void(r = a))
                    }
                }())), E.optimizeTouch(this.get("container")), $.each(Galleria.on.binds, function(t, i) {
                    -1 == $.inArray(i.hash, e._binds) && e.bind(i.type, i.callback)
                }), this
            },
            addTimer: function() {
                return this._timer.add.apply(this._timer, E.array(arguments)), this
            },
            clearTimer: function() {
                return this._timer.clear.apply(this._timer, E.array(arguments)), this
            },
            _getWH: function() {
                var e = this.$("container"),
                    t = this.$("target"),
                    i = this,
                    a = {},
                    n;
                return $.each(["width", "height"], function(r, s) {
                    i._options[s] && "number" == typeof i._options[s] ? a[s] = i._options[s] : (n = [E.parseValue(e.css(s)), E.parseValue(t.css(s)), e[s](), t[s]()], i["_" + s] || n.splice(n.length, E.parseValue(e.css("min-" + s)), E.parseValue(t.css("min-" + s))), a[s] = Math.max.apply(Math, n))
                }), i._userRatio && (a.height = a.width * i._userRatio), a
            },
            _createThumbnails: function(e) {
                this.get("total").innerHTML = this.getDataLength();
                var a, n, r, s, o, l = this,
                    d = this._options,
                    c = e ? this._data.length - e.length : 0,
                    u = c,
                    h = [],
                    p = 0,
                    f = 8 > g ? "http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif" : "data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",
                    m = function() {
                        var e = l.$("thumbnails").find(".active");
                        return e.length ? e.find("img").attr("src") : !1
                    }(),
                    v = "string" == typeof d.thumbnails ? d.thumbnails.toLowerCase() : null,
                    y = function(e) {
                        return i.defaultView && i.defaultView.getComputedStyle ? i.defaultView.getComputedStyle(n.container, null)[e] : o.css(e)
                    },
                    b = function(e, t, i) {
                        return function() {
                            $(i).append(e), l.trigger({
                                type: Galleria.THUMBNAIL,
                                thumbTarget: e,
                                index: t,
                                galleriaData: l.getData(t)
                            })
                        }
                    },
                    _ = function(e) {
                        d.pauseOnInteraction && l.pause();
                        var t = $(e.currentTarget).data("index");
                        l.getIndex() !== t && l.show(t), e.preventDefault()
                    },
                    w = function(e, t) {
                        $(e.container).css("visibility", "visible"), l.trigger({
                            type: Galleria.THUMBNAIL,
                            thumbTarget: e.image,
                            index: e.data.order,
                            galleriaData: l.getData(e.data.order)
                        }), "function" == typeof t && t.call(l, e)
                    },
                    k = function(e, t) {
                        e.scale({
                            width: e.data.width,
                            height: e.data.height,
                            crop: d.thumbCrop,
                            margin: d.thumbMargin,
                            canvas: d.useCanvas,
                            complete: function(e) {
                                var i = ["left", "top"],
                                    a = ["Width", "Height"],
                                    n, r, s = l.getData(e.index),
                                    o = s.thumb.split(":");
                                $.each(a, function(t, a) {
                                    n = a.toLowerCase(), d.thumbCrop === !0 && d.thumbCrop !== n || !d.thumbFit || (r = {}, r[n] = e[n], $(e.container).css(r), r = {}, r[i[t]] = 0, $(e.image).css(r)), e["outer" + a] = $(e.container)["outer" + a](!0)
                                }), E.toggleQuality(e.image, d.thumbQuality === !0 || "auto" === d.thumbQuality && e.original.width < 3 * e.width), s.iframe && 2 == o.length && o[0] in x ? x[o[0]].getThumb(o[1], function(i) {
                                    return function(a) {
                                        i.src = a, w(e, t)
                                    }
                                }(e.image)) : d.thumbDisplayOrder && !e.lazy ? $.each(h, function(e, i) {
                                    return e === p && i.ready && !i.displayed ? (p++, i.displayed = !0, void w(i, t)) : void 0
                                }) : w(e, t)
                            }
                        })
                    };
                for (e || (this._thumbnails = [], this.$("thumbnails").empty()); this._data[c]; c++) r = this._data[c], a = r.thumb || r.image, d.thumbnails !== !0 && "lazy" != v || !r.thumb && !r.image ? r.iframe || "empty" === v || "numbers" === v ? (n = {
                    container: E.create("galleria-image"),
                    image: E.create("img", "span"),
                    ready: !0
                }, "numbers" === v && $(n.image).text(c + 1), r.iframe && $(n.image).addClass("iframe"), this.$("thumbnails").append(n.container), t.setTimeout(b(n.image, c, n.container), 50 + 20 * c)) : n = {
                    container: null,
                    image: null
                } : (n = new Galleria.Picture(c), n.index = c, n.displayed = !1, n.lazy = !1, n.video = !1, this.$("thumbnails").append(n.container), o = $(n.container), o.css("visibility", "hidden"), n.data = {
                    width: E.parseValue(y("width")),
                    height: E.parseValue(y("height")),
                    order: c,
                    src: a
                }, d.thumbFit && d.thumbCrop !== !0 ? o.css({
                    width: "auto",
                    height: "auto"
                }) : o.css({
                    width: n.data.width,
                    height: n.data.height
                }), s = a.split(":"), 2 == s.length && s[0] in x ? (n.video = !0, n.ready = !0, n.load(f, {
                    height: n.data.height,
                    width: 1.25 * n.data.height
                }, k)) : "lazy" == v ? (o.addClass("lazy"), n.lazy = !0, n.load(f, {
                    height: n.data.height,
                    width: n.data.width
                })) : n.load(a, k), "all" === d.preload && n.preload(r.image)), $(n.container).add(d.keepSource && d.linkSourceImages ? r.original : null).data("index", c).bind(d.thumbEventType, _).data("thumbload", k), m === a && $(n.container).addClass("active"), this._thumbnails.push(n);
                return h = this._thumbnails.slice(u), this
            },
            lazyLoad: function(e, t) {
                var i = e.constructor == Array ? e : [e],
                    a = this,
                    n = this.$("thumbnails").children().filter(function() {
                        return $(this).data("lazy-src")
                    }),
                    r = 0;
                return $.each(i, function(e, n) {
                    if (!(n > a._thumbnails.length - 1)) {
                        var s = a._thumbnails[n],
                            o = s.data,
                            l = o.src.split(":"),
                            d = function() {
                                ++r == i.length && "function" == typeof t && t.call(a)
                            },
                            c = $(s.container).data("thumbload");
                        s.video ? c.call(a, s, d) : s.load(o.src, function(e) {
                            c.call(a, e, d)
                        })
                    }
                }), this
            },
            lazyLoadChunks: function(e, i) {
                var a = this.getDataLength(),
                    n = 0,
                    r = 0,
                    s = [],
                    o = [],
                    l = this;
                for (i = i || 0; a > n; n++) o.push(n), (++r == e || n == a - 1) && (s.push(o), r = 0, o = []);
                var d = function(e) {
                    var a = s.shift();
                    a && t.setTimeout(function() {
                        l.lazyLoad(a, function() {
                            d(!0)
                        })
                    }, i && e ? i : 0)
                };
                return d(!1), this
            },
            _run: function() {
                var i = this;
                i._createThumbnails(), E.wait({
                    timeout: 1e4,
                    until: function() {
                        return Galleria.OPERA && i.$("stage").css("display", "inline-block"), i._stageWidth = i.$("stage").width(), i._stageHeight = i.$("stage").height(), i._stageWidth && i._stageHeight > 50
                    },
                    success: function() {
                        return D.push(i), E.show(i.get("counter")), i._options.carousel && i._carousel.bindControls(), i._options.autoplay && (i.pause(), "number" == typeof i._options.autoplay && (i._playtime = i._options.autoplay), i._playing = !0), i._firstrun ? (i._options.autoplay && i.trigger(Galleria.PLAY), void("number" == typeof i._options.show && i.show(i._options.show))) : (i._firstrun = !0, Galleria.History && Galleria.History.change(function(a) {
                            isNaN(a) ? t.history.go(-1) : i.show(a, e, !0)
                        }), i.trigger(Galleria.READY), Galleria.theme.init.call(i, i._options), $.each(Galleria.ready.callbacks, function(e, t) {
                            "function" == typeof t && t.call(i, i._options)
                        }), i._options.extend.call(i, i._options), /^[0-9]{1,4}$/.test(u) && Galleria.History ? i.show(u, e, !0) : i._data[i._options.show] && i.show(i._options.show), void(i._options.autoplay && i.trigger(Galleria.PLAY)))
                    },
                    error: function() {
                        Galleria.raise("Stage width or height is too small to show the gallery. Traced measures: width:" + i._stageWidth + "px, height: " + i._stageHeight + "px.", !0)
                    }
                })
            },
            load: function(e, t, i) {
                var a = this,
                    n = this._options;
                return this._data = [], this._thumbnails = [], this.$("thumbnails").empty(), "function" == typeof t && (i = t, t = null), e = e || n.dataSource, t = t || n.dataSelector, i = i || n.dataConfig, /^function Object/.test(e.constructor) && (e = [e]), e.constructor === Array ? this.validate(e) ? this._data = e : Galleria.raise("Load failed: JSON Array not valid.") : (t += ",.video,.iframe", $(e).find(t).each(function(e, t) {
                    t = $(t);
                    var n = {},
                        r = t.parent(),
                        s = r.attr("href"),
                        o = r.attr("rel");
                    s && ("IMG" == t[0].nodeName || t.hasClass("video")) && w(s) ? n.video = s : s && t.hasClass("iframe") ? n.iframe = s : n.image = n.big = s,
                        o && (n.big = o), $.each("big title description link layer".split(" "), function(e, i) {
                            t.data(i) && (n[i] = t.data(i))
                        }), a._data.push($.extend({
                            title: t.attr("title") || "",
                            thumb: t.attr("src"),
                            image: t.attr("src"),
                            big: t.attr("src"),
                            description: t.attr("alt") || "",
                            link: t.attr("longdesc"),
                            original: t.get(0)
                        }, n, i(t)))
                })), "function" == typeof n.dataSort ? r.sort.call(this._data, n.dataSort) : "random" == n.dataSort && this._data.sort(function() {
                    return Math.round(Math.random()) - .5
                }), this.getDataLength() && this._parseData().trigger(Galleria.DATA), this
            },
            _parseData: function() {
                var e = this,
                    t;
                return $.each(this._data, function(i, a) {
                    if (t = e._data[i], "thumb" in a == !1 && (t.thumb = a.image), !1 in a && (t.big = a.image), "video" in a) {
                        var n = w(a.video);
                        n && (t.iframe = x[n.provider].embed(n.id) + function() {
                            if ("object" == typeof e._options[n.provider]) {
                                var t = "?",
                                    i = [];
                                return $.each(e._options[n.provider], function(e, t) {
                                    i.push(e + "=" + t)
                                }), "youtube" == n.provider && (i = ["wmode=opaque"].concat(i)), t + i.join("&")
                            }
                            return ""
                        }(), delete t.video, "thumb" in t && t.thumb || (t.thumb = n.provider + ":" + n.id))
                    }
                }), this
            },
            destroy: function() {
                return this.$("target").data("galleria", null), this.$("container").unbind("galleria"), this.get("target").innerHTML = this._original.html, this.clearTimer(), E.removeFromArray(C, this), E.removeFromArray(D, this), this
            },
            splice: function() {
                var e = this,
                    i = E.array(arguments);
                return t.setTimeout(function() {
                    r.splice.apply(e._data, i), e._parseData()._createThumbnails()
                }, 2), e
            },
            push: function() {
                var e = this,
                    i = E.array(arguments);
                return 1 == i.length && i[0].constructor == Array && (i = i[0]), t.setTimeout(function() {
                    r.push.apply(e._data, i), e._parseData()._createThumbnails(i)
                }, 2), e
            },
            _getActive: function() {
                return this._controls.getActive()
            },
            validate: function(e) {
                return !0
            },
            bind: function(e, t) {
                return e = _(e), this.$("container").bind(e, this.proxy(t)), this
            },
            unbind: function(e) {
                return e = _(e), this.$("container").unbind(e), this
            },
            trigger: function(e) {
                return e = "object" == typeof e ? $.extend(e, {
                    scope: this
                }) : {
                    type: _(e),
                    scope: this
                }, this.$("container").trigger(e), this
            },
            addIdleState: function(e, t, i, a) {
                return this._idle.add.apply(this._idle, E.array(arguments)), this
            },
            removeIdleState: function(e) {
                return this._idle.remove.apply(this._idle, E.array(arguments)), this
            },
            enterIdleMode: function() {
                return this._idle.hide(), this
            },
            exitIdleMode: function() {
                return this._idle.showAll(), this
            },
            enterFullscreen: function(e) {
                return this._fullscreen.enter.apply(this, E.array(arguments)), this
            },
            exitFullscreen: function(e) {
                return this._fullscreen.exit.apply(this, E.array(arguments)), this
            },
            toggleFullscreen: function(e) {
                return this._fullscreen[this.isFullscreen() ? "exit" : "enter"].apply(this, E.array(arguments)), this
            },
            bindTooltip: function(e, t) {
                return this._tooltip.bind.apply(this._tooltip, E.array(arguments)), this
            },
            defineTooltip: function(e, t) {
                return this._tooltip.define.apply(this._tooltip, E.array(arguments)), this
            },
            refreshTooltip: function(e) {
                return this._tooltip.show.apply(this._tooltip, E.array(arguments)), this
            },
            openLightbox: function() {
                return this._lightbox.show.apply(this._lightbox, E.array(arguments)), this
            },
            closeLightbox: function() {
                return this._lightbox.hide.apply(this._lightbox, E.array(arguments)), this
            },
            getActiveImage: function() {
                return this._getActive().image || e
            },
            getActiveThumb: function() {
                return this._thumbnails[this._active].image || e
            },
            getMousePosition: function(e) {
                return {
                    x: e.pageX - this.$("container").offset().left,
                    y: e.pageY - this.$("container").offset().top
                }
            },
            addPan: function(e) {
                if (this._options.imageCrop !== !1) {
                    e = $(e || this.getActiveImage());
                    var t = this,
                        i = e.width() / 2,
                        a = e.height() / 2,
                        n = parseInt(e.css("left"), 10),
                        r = parseInt(e.css("top"), 10),
                        s = n || 0,
                        o = r || 0,
                        l = 0,
                        d = 0,
                        c = !1,
                        u = E.timestamp(),
                        h = 0,
                        p = 0,
                        f = function(t, i, a) {
                            if (t > 0 && (p = Math.round(Math.max(-1 * t, Math.min(0, i))), h !== p))
                                if (h = p, 8 === g) e.parent()["scroll" + a](-1 * p);
                                else {
                                    var n = {};
                                    n[a.toLowerCase()] = p, e.css(n)
                                }
                        },
                        m = function(e) {
                            E.timestamp() - u < 50 || (c = !0, i = t.getMousePosition(e).x, a = t.getMousePosition(e).y)
                        },
                        v = function(u) {
                            c && (l = e.width() - t._stageWidth, d = e.height() - t._stageHeight, n = i / t._stageWidth * l * -1, r = a / t._stageHeight * d * -1, s += (n - s) / t._options.imagePanSmoothness, o += (r - o) / t._options.imagePanSmoothness, f(d, o, "Top"), f(l, s, "Left"))
                        };
                    return 8 === g && (e.parent().scrollTop(-1 * o).scrollLeft(-1 * s), e.css({
                        top: 0,
                        left: 0
                    })), this.$("stage").unbind("mousemove", m).bind("mousemove", m), this.addTimer("pan" + t._id, v, 50, !0), this
                }
            },
            proxy: function(e, t) {
                return "function" != typeof e ? h : (t = t || this, function() {
                    return e.apply(t, E.array(arguments))
                })
            },
            removePan: function() {
                return this.$("stage").unbind("mousemove"), this.clearTimer("pan" + this._id), this
            },
            addElement: function(e) {
                var t = this._dom;
                return $.each(E.array(arguments), function(e, i) {
                    t[i] = E.create("galleria-" + i)
                }), this
            },
            attachKeyboard: function(e) {
                return this._keyboard.attach.apply(this._keyboard, E.array(arguments)), this
            },
            detachKeyboard: function() {
                return this._keyboard.detach.apply(this._keyboard, E.array(arguments)), this
            },
            appendChild: function(e, t) {
                return this.$(e).append(this.get(t) || t), this
            },
            prependChild: function(e, t) {
                return this.$(e).prepend(this.get(t) || t), this
            },
            remove: function(e) {
                return this.$(E.array(arguments).join(",")).remove(), this
            },
            append: function(e) {
                var t, i;
                for (t in e)
                    if (e.hasOwnProperty(t))
                        if (e[t].constructor === Array)
                            for (i = 0; e[t][i]; i++) this.appendChild(t, e[t][i]);
                        else this.appendChild(t, e[t]);
                return this
            },
            _scaleImage: function(e, t) {
                if (e = e || this._controls.getActive()) {
                    var i = this,
                        a, n = function(e) {
                            $(e.container).children(":first").css({
                                top: Math.max(0, E.parseValue(e.image.style.top)),
                                left: Math.max(0, E.parseValue(e.image.style.left)),
                                width: E.parseValue(e.image.width),
                                height: E.parseValue(e.image.height)
                            })
                        };
                    return t = $.extend({
                        width: this._stageWidth,
                        height: this._stageHeight,
                        crop: this._options.imageCrop,
                        max: this._options.maxScaleRatio,
                        min: this._options.minScaleRatio,
                        margin: this._options.imageMargin,
                        position: this._options.imagePosition,
                        iframelimit: this._options.maxVideoSize
                    }, t), this._options.layerFollow && this._options.imageCrop !== !0 ? "function" == typeof t.complete ? (a = t.complete, t.complete = function() {
                        a.call(e, e), n(e)
                    }) : t.complete = n : $(e.container).children(":first").css({
                        top: 0,
                        left: 0
                    }), e.scale(t), this
                }
            },
            updateCarousel: function() {
                return this._carousel.update(), this
            },
            resize: function(t, i) {
                "function" == typeof t && (i = t, t = e), t = $.extend({
                    width: 0,
                    height: 0
                }, t);
                var a = this,
                    n = this.$("container");
                return $.each(t, function(e, i) {
                    i || (n[e]("auto"), t[e] = a._getWH()[e])
                }), $.each(t, function(e, t) {
                    n[e](t)
                }), this.rescale(i)
            },
            rescale: function(t, i, a) {
                var n = this;
                "function" == typeof t && (a = t, t = e);
                var r = function() {
                    n._stageWidth = t || n.$("stage").width(), n._stageHeight = i || n.$("stage").height(), n._scaleImage(), n._options.carousel && n.updateCarousel(), n.trigger(Galleria.RESCALE), "function" == typeof a && a.call(n)
                };
                return r.call(n), this
            },
            refreshImage: function() {
                return this._scaleImage(), this._options.imagePan && this.addPan(), this
            },
            show: function(e, t, i) {
                return this._queue.length > 3 || e === !1 || !this._options.queue && this._queue.stalled ? void 0 : (e = Math.max(0, Math.min(parseInt(e, 10), this.getDataLength() - 1)), t = "undefined" != typeof t ? !!t : e < this.getIndex(), i = i || !1, !i && Galleria.History ? void Galleria.History.set(e.toString()) : (this._active = e, r.push.call(this._queue, {
                    index: e,
                    rewind: t
                }), this._queue.stalled || this._show(), this))
            },
            _show: function() {
                var i = this,
                    a = this._queue[0],
                    n = this.getData(a.index);
                if (n) {
                    var s = n.iframe || (this.isFullscreen() && "big" in n ? n.big : n.image),
                        o = this._controls.getActive(),
                        l = this._controls.getNext(),
                        d = l.isCached(s),
                        c = this._thumbnails[a.index],
                        u = function() {
                            $(l.image).trigger("mouseup")
                        },
                        h = function(e, a, n, s, o) {
                            return function() {
                                var l;
                                I.active = !1, E.toggleQuality(a.image, i._options.imageQuality), i._layers[i._controls.active].innerHTML = "", $(n.container).css({
                                    zIndex: 0,
                                    opacity: 0
                                }).show(), n.isIframe && $(n.container).find("iframe").remove(), i.$("container").toggleClass("iframe", !!e.iframe), $(a.container).css({
                                    zIndex: 1,
                                    left: 0,
                                    top: 0
                                }).show(), i._controls.swap(), i._options.imagePan && i.addPan(a.image), (e.link || i._options.lightbox || i._options.clicknext) && $(a.image).css({
                                    cursor: "pointer"
                                }).bind("mouseup", function(a) {
                                    return "number" == typeof a.which && a.which > 1 ? void 0 : i._options.clicknext && !Galleria.TOUCH ? (i._options.pauseOnInteraction && i.pause(), void i.next()) : e.link ? void(i._options.popupLinks ? l = t.open(e.link, "_blank") : t.location.href = e.link) : void(i._options.lightbox && i.openLightbox())
                                }), i._playCheck(), i.trigger({
                                    type: Galleria.IMAGE,
                                    index: s.index,
                                    imageTarget: a.image,
                                    thumbTarget: o.image,
                                    galleriaData: e
                                }), r.shift.call(i._queue), i._queue.stalled = !1, i._queue.length && i._show()
                            }
                        }(n, l, o, a, c);
                    if (this._options.carousel && this._options.carouselFollow && this._carousel.follow(a.index), this._options.preload) {
                        var p, g, f = this.getNext(),
                            m;
                        try {
                            for (g = this._options.preload; g > 0; g--) p = new Galleria.Picture, m = i.getData(f), p.preload(this.isFullscreen() && "big" in m ? m.big : m.image), f = i.getNext(f)
                        } catch (v) {}
                    }
                    E.show(l.container), l.isIframe = !!n.iframe, $(i._thumbnails[a.index].container).addClass("active").siblings(".active").removeClass("active"), i.trigger({
                        type: Galleria.LOADSTART,
                        cached: d,
                        index: a.index,
                        rewind: a.rewind,
                        imageTarget: l.image,
                        thumbTarget: c.image,
                        galleriaData: n
                    }), i._queue.stalled = !0, l.load(s, function(t) {
                        var r = $(i._layers[1 - i._controls.active]).html(n.layer || "").hide();
                        i._scaleImage(t, {
                            complete: function(t) {
                                "image" in o && E.toggleQuality(o.image, !1), E.toggleQuality(t.image, !1), i.removePan(), i.setInfo(a.index), i.setCounter(a.index), n.layer && (r.show(), (n.link || i._options.lightbox || i._options.clicknext) && r.css("cursor", "pointer").unbind("mouseup").mouseup(u));
                                var s = i._options.transition;
                                if ($.each({
                                        initial: null === o.image,
                                        touch: Galleria.TOUCH,
                                        fullscreen: i.isFullscreen()
                                    }, function(t, a) {
                                        return a && i._options[t + "Transition"] !== e ? (s = i._options[t + "Transition"], !1) : void 0
                                    }), s in I.effects == !1) h();
                                else {
                                    var l = {
                                        prev: o.container,
                                        next: t.container,
                                        rewind: a.rewind,
                                        speed: i._options.transitionSpeed || 400
                                    };
                                    I.active = !0, I.init.call(i, s, l, h)
                                }
                                i.trigger({
                                    type: Galleria.LOADFINISH,
                                    cached: d,
                                    index: a.index,
                                    rewind: a.rewind,
                                    imageTarget: t.image,
                                    thumbTarget: i._thumbnails[a.index].image,
                                    galleriaData: i.getData(a.index)
                                })
                            }
                        })
                    })
                }
            },
            getNext: function(e) {
                return e = "number" == typeof e ? e : this.getIndex(), e === this.getDataLength() - 1 ? 0 : e + 1
            },
            getPrev: function(e) {
                return e = "number" == typeof e ? e : this.getIndex(), 0 === e ? this.getDataLength() - 1 : e - 1
            },
            next: function() {
                return this.getDataLength() > 1 && this.show(this.getNext(), !1), this
            },
            prev: function() {
                return this.getDataLength() > 1 && this.show(this.getPrev(), !0), this
            },
            get: function(e) {
                return e in this._dom ? this._dom[e] : null
            },
            getData: function(e) {
                return e in this._data ? this._data[e] : this._data[this._active]
            },
            getDataLength: function() {
                return this._data.length
            },
            getIndex: function() {
                return "number" == typeof this._active ? this._active : !1
            },
            getStageHeight: function() {
                return this._stageHeight
            },
            getStageWidth: function() {
                return this._stageWidth
            },
            getOptions: function(e) {
                return "undefined" == typeof e ? this._options : this._options[e]
            },
            setOptions: function(e, t) {
                return "object" == typeof e ? $.extend(this._options, e) : this._options[e] = t, this
            },
            play: function(e) {
                return this._playing = !0, this._playtime = e || this._playtime, this._playCheck(), this.trigger(Galleria.PLAY), this
            },
            pause: function() {
                return this._playing = !1, this.trigger(Galleria.PAUSE), this
            },
            playToggle: function(e) {
                return this._playing ? this.pause() : this.play(e)
            },
            isPlaying: function() {
                return this._playing
            },
            isFullscreen: function() {
                return this._fullscreen.active
            },
            _playCheck: function() {
                var e = this,
                    t = 0,
                    i = 20,
                    a = E.timestamp(),
                    n = "play" + this._id;
                if (this._playing) {
                    this.clearTimer(n);
                    var r = function() {
                        return t = E.timestamp() - a, t >= e._playtime && e._playing ? (e.clearTimer(n), void e.next()) : void(e._playing && (e.trigger({
                            type: Galleria.PROGRESS,
                            percent: Math.ceil(t / e._playtime * 100),
                            seconds: Math.floor(t / 1e3),
                            milliseconds: t
                        }), e.addTimer(n, r, i)))
                    };
                    e.addTimer(n, r, i)
                }
            },
            setPlaytime: function(e) {
                return this._playtime = e, this
            },
            setIndex: function(e) {
                return this._active = e, this
            },
            setCounter: function(e) {
                if ("number" == typeof e ? e++ : "undefined" == typeof e && (e = this.getIndex() + 1), this.get("current").innerHTML = e, g) {
                    var t = this.$("counter"),
                        i = t.css("opacity");
                    1 === parseInt(i, 10) ? E.removeAlpha(t[0]) : this.$("counter").css("opacity", i)
                }
                return this
            },
            setInfo: function(e) {
                var t = this,
                    i = this.getData(e);
                return $.each(["title", "description"], function(e, a) {
                    var n = t.$("info-" + a);
                    i[a] ? n[i[a].length ? "show" : "hide"]().html(i[a]) : n.empty().hide()
                }), this
            },
            hasInfo: function(e) {
                var t = "title description".split(" "),
                    i;
                for (i = 0; t[i]; i++)
                    if (this.getData(e)[t[i]]) return !0;
                return !1
            },
            jQuery: function(e) {
                var t = this,
                    i = [];
                $.each(e.split(","), function(e, a) {
                    a = $.trim(a), t.get(a) && i.push(a)
                });
                var a = $(t.get(i.shift()));
                return $.each(i, function(e, i) {
                    a = a.add(t.get(i))
                }), a
            },
            $: function(e) {
                return this.jQuery.apply(this, E.array(arguments))
            }
        }, $.each(y, function(e, t) {
            var i = /_/.test(t) ? t.replace(/_/g, "") : t;
            Galleria[t.toUpperCase()] = "galleria." + i
        }), $.extend(Galleria, {
            IE9: 9 === g,
            IE8: 8 === g,
            IE7: 7 === g,
            IE6: 6 === g,
            IE: g,
            WEBKIT: /webkit/.test(c),
            CHROME: /chrome/.test(c),
            SAFARI: /safari/.test(c) && !/chrome/.test(c),
            QUIRK: g && i.compatMode && "BackCompat" === i.compatMode,
            MAC: /mac/.test(navigator.platform.toLowerCase()),
            OPERA: !!t.opera,
            IPHONE: /iphone/.test(c),
            IPAD: /ipad/.test(c),
            ANDROID: /android/.test(c),
            TOUCH: "ontouchstart" in i
        }), Galleria.addTheme = function(e) {
            e.name || Galleria.raise("No theme name specified"), "object" != typeof e.defaults ? e.defaults = {} : e.defaults = b(e.defaults);
            var i = !1,
                a;
            return "string" == typeof e.css ? ($("link").each(function(t, n) {
                return a = new RegExp(e.css), a.test(n.href) ? (i = !0, M(e), !1) : void 0
            }), i || $("script").each(function(n, r) {
                a = new RegExp("galleria\\." + e.name.toLowerCase() + "\\."), a.test(r.src) && (i = r.src.replace(/[^\/]*$/, "") + e.css, t.setTimeout(function() {
                    E.loadCSS(i, "galleria-theme", function() {
                        M(e)
                    })
                }, 1))
            }), i || Galleria.raise("No theme CSS loaded")) : M(e), e
        }, Galleria.loadTheme = function(e, i) {
            if (!$("script").filter(function() {
                    return $(this).attr("src") == e
                }).length) {
                var a = !1,
                    n;
                return $(t).load(function() {
                    a || (n = t.setTimeout(function() {
                        a || Galleria.theme || Galleria.raise("Galleria had problems loading theme at " + e + ". Please check theme path or load manually.", !0)
                    }, 2e4))
                }), Galleria.unloadTheme(), E.loadScript(e, function() {
                    a = !0, t.clearTimeout(n)
                }), Galleria
            }
        }, Galleria.unloadTheme = function() {
            return "object" == typeof Galleria.theme && ($("script").each(function(e, t) {
                new RegExp("galleria\\." + Galleria.theme.name + "\\.").test(t.src) && $(t).remove()
            }), Galleria.theme = e), Galleria
        }, Galleria.get = function(e) {
            return C[e] ? C[e] : "number" != typeof e ? C : void Galleria.raise("Gallery index " + e + " not found")
        }, Galleria.configure = function(e, t) {
            var i = {};
            return "string" == typeof e && t ? (i[e] = t, e = i) : $.extend(i, e), Galleria.configure.options = i, $.each(Galleria.get(), function(e, t) {
                t.setOptions(i)
            }), Galleria
        }, Galleria.configure.options = {}, Galleria.on = function(e, t) {
            if (e) {
                t = t || h;
                var i = e + t.toString().replace(/\s/g, "") + E.timestamp();
                return $.each(Galleria.get(), function(a, n) {
                    n._binds.push(i), n.bind(e, t)
                }), Galleria.on.binds.push({
                    type: e,
                    callback: t,
                    hash: i
                }), Galleria
            }
        }, Galleria.on.binds = [], Galleria.run = function(e, t) {
            return $.isFunction(t) && (t = {
                extend: t
            }), $(e || "#galleria").galleria(t), Galleria
        }, Galleria.addTransition = function(e, t) {
            return I.effects[e] = t, Galleria
        }, Galleria.utils = E, Galleria.log = function() {
            var e = E.array(arguments);
            if (!("console" in t && "log" in t.console)) return t.alert(e.join("<br>"));
            try {
                return t.console.log.apply(t.console, e)
            } catch (i) {
                $.each(e, function() {
                    t.console.log(this)
                })
            }
        }, Galleria.ready = function(e) {
            return "function" != typeof e ? Galleria : ($.each(D, function(t, i) {
                e.call(i, i._options)
            }), Galleria.ready.callbacks.push(e), Galleria)
        }, Galleria.ready.callbacks = [], Galleria.raise = function(e, t) {
            var i = t ? "Fatal error" : "Error",
                a = this,
                n = {
                    color: "#fff",
                    position: "absolute",
                    top: 0,
                    left: 0,
                    zIndex: 1e5
                },
                r = function(e) {
                    var a = '<div style="padding:4px;margin:0 0 2px;background:#' + (t ? "811" : "222") + ';">' + (t ? "<strong>" + i + ": </strong>" : "") + e + "</div>";
                    $.each(C, function() {
                        var e = this.$("errors"),
                            t = this.$("target");
                        e.length || (t.css("position", "relative"), e = this.addElement("errors").appendChild("target", "errors").$("errors").css(n)), e.append(a)
                    }), C.length || $("<div>").css($.extend(n, {
                        position: "fixed"
                    })).append(a).appendTo(f().body)
                };
            if (o) {
                if (r(e), t) throw new Error(i + ": " + e)
            } else if (t) {
                if (T) return;
                T = !0, t = !1, r("Gallery could not load.")
            }
        }, Galleria.version = s, Galleria.requires = function(e, t) {
            return t = t || "You need to upgrade Galleria to version " + e + " to use one or more components.", Galleria.version < e && Galleria.raise(t, !0), Galleria
        }, Galleria.Picture = function(e) {
            this.id = e || null, this.image = null, this.container = E.create("galleria-image"), $(this.container).css({
                overflow: "hidden",
                position: "relative"
            }), this.original = {
                width: 0,
                height: 0
            }, this.ready = !1, this.isIframe = !1
        }, Galleria.Picture.prototype = {
            cache: {},
            show: function() {
                E.show(this.image)
            },
            hide: function() {
                E.moveOut(this.image)
            },
            clear: function() {
                this.image = null
            },
            isCached: function(e) {
                return !!this.cache[e]
            },
            preload: function(e) {
                $(new Image).load(function(e, t) {
                    return function() {
                        t[e] = e
                    }
                }(e, this.cache)).attr("src", e)
            },
            load: function(e, i, a) {
                if ("function" == typeof i && (a = i, i = null), this.isIframe) {
                    var n = "if" + (new Date).getTime();
                    return this.image = $("<iframe>", {
                        src: e,
                        frameborder: 0,
                        id: n,
                        allowfullscreen: !0,
                        css: {
                            visibility: "hidden"
                        }
                    })[0], $(this.container).find("iframe,img").remove(), this.container.appendChild(this.image), $("#" + n).load(function(e, i) {
                        return function() {
                            t.setTimeout(function() {
                                $(e.image).css("visibility", "visible"), "function" == typeof i && i.call(e, e)
                            }, 10)
                        }
                    }(this, a)), this.container
                }
                this.image = new Image, Galleria.IE8 && $(this.image).css("filter", "inherit");
                var r = 0,
                    s = !1,
                    o = !1,
                    l = $(this.container),
                    c = $(this.image),
                    u = function() {
                        s ? d ? $(this).attr("src", d) : Galleria.raise("Image not found: " + e) : (s = !0, t.setTimeout(function(e, t) {
                            return function() {
                                e.attr("src", t + "?" + E.timestamp())
                            }
                        }($(this), e), 50))
                    },
                    h = function(e, a, n) {
                        return function() {
                            var r = function() {
                                $(this).unbind("load"), e.original = i || {
                                    height: this.height,
                                    width: this.width
                                }, e.container.appendChild(this), e.cache[n] = n, "function" == typeof a && t.setTimeout(function() {
                                    a.call(e, e)
                                }, 1)
                            };
                            this.width && this.height ? r.call(this) : t.setTimeout(function(e) {
                                return function() {
                                    e.width && e.height ? r.call(e) : o ? Galleria.raise("Could not extract width/height from image: " + e.src + ". Traced measures: width:" + e.width + "px, height: " + e.height + "px.") : ($(new Image).load(h).attr("src", e.src), o = !0)
                                }
                            }(this), 2)
                        }
                    }(this, a, e);
                return l.find("iframe,img").remove(), c.css("display", "block"), E.hide(this.image), $.each("minWidth minHeight maxWidth maxHeight".split(" "), function(e, t) {
                    c.css(t, /min/.test(t) ? "0" : "none")
                }), c.load(h).error(u).attr("src", e), this.container
            },
            scale: function(t) {
                var i = this;
                if (t = $.extend({
                        width: 0,
                        height: 0,
                        min: e,
                        max: e,
                        margin: 0,
                        complete: h,
                        position: "center",
                        crop: !1,
                        canvas: !1,
                        iframelimit: e
                    }, t), this.isIframe) {
                    var a = t.width,
                        n = t.height,
                        r, s;
                    if (t.iframelimit) {
                        var o = Math.min(t.iframelimit / a, t.iframelimit / n);
                        1 > o ? (r = a * o, s = n * o, $(this.image).css({
                            top: n / 2 - s / 2,
                            left: a / 2 - r / 2,
                            position: "absolute"
                        })) : $(this.image).css({
                            top: 0,
                            left: 0
                        })
                    }
                    $(this.image).width(r || a).height(s || n).removeAttr("width").removeAttr("height"), $(this.container).width(a).height(n), t.complete.call(i, i);
                    try {
                        this.image.contentWindow && $(this.image.contentWindow).trigger("resize")
                    } catch (l) {}
                    return this.container
                }
                if (!this.image) return this.container;
                var d, c, u = $(i.container),
                    p;
                return E.wait({
                    until: function() {
                        return d = t.width || u.width() || E.parseValue(u.css("width")), c = t.height || u.height() || E.parseValue(u.css("height")), d && c
                    },
                    success: function() {
                        var e = (d - 2 * t.margin) / i.original.width,
                            a = (c - 2 * t.margin) / i.original.height,
                            n = Math.min(e, a),
                            r = Math.max(e, a),
                            s = {
                                "true": r,
                                width: e,
                                height: a,
                                "false": n,
                                landscape: i.original.width > i.original.height ? r : n,
                                portrait: i.original.width < i.original.height ? r : n
                            },
                            o = s[t.crop.toString()],
                            l = "";
                        t.max && (o = Math.min(t.max, o)), t.min && (o = Math.max(t.min, o)), $.each(["width", "height"], function(e, t) {
                            $(i.image)[t](i[t] = i.image[t] = Math.round(i.original[t] * o))
                        }), $(i.container).width(d).height(c), t.canvas && S && (S.elem.width = i.width, S.elem.height = i.height, l = i.image.src + ":" + i.width + "x" + i.height, i.image.src = S.cache[l] || function(e) {
                            S.context.drawImage(i.image, 0, 0, i.original.width * o, i.original.height * o);
                            try {
                                return p = S.elem.toDataURL(), S.length += p.length, S.cache[e] = p, p
                            } catch (t) {
                                return i.image.src
                            }
                        }(l));
                        var u = {},
                            h = {},
                            g = function(e, t, a) {
                                var n = 0;
                                if (/\%/.test(e)) {
                                    var r = parseInt(e, 10) / 100,
                                        s = i.image[t] || $(i.image)[t]();
                                    n = Math.ceil(-1 * s * r + a * r)
                                } else n = E.parseValue(e);
                                return n
                            },
                            f = {
                                top: {
                                    top: 0
                                },
                                left: {
                                    left: 0
                                },
                                right: {
                                    left: "100%"
                                },
                                bottom: {
                                    top: "100%"
                                }
                            };
                        $.each(t.position.toLowerCase().split(" "), function(e, t) {
                            "center" === t && (t = "50%"), u[e ? "top" : "left"] = t
                        }), $.each(u, function(e, t) {
                            f.hasOwnProperty(t) && $.extend(h, f[t])
                        }), u = u.top ? $.extend(u, h) : h, u = $.extend({
                            top: "50%",
                            left: "50%"
                        }, u), $(i.image).css({
                            position: "absolute",
                            top: g(u.top, "height", c),
                            left: g(u.left, "width", d)
                        }), i.show(), i.ready = !0, t.complete.call(i, i)
                    },
                    error: function() {
                        Galleria.raise("Could not scale image: " + i.image.src)
                    },
                    timeout: 1e3
                }), this
            }
        }, $.extend($.easing, {
            galleria: function(e, t, i, a, n) {
                return (t /= n / 2) < 1 ? a / 2 * t * t * t + i : a / 2 * ((t -= 2) * t * t + 2) + i
            },
            galleriaIn: function(e, t, i, a, n) {
                return a * (t /= n) * t + i
            },
            galleriaOut: function(e, t, i, a, n) {
                return -a * (t /= n) * (t - 2) + i
            }
        }), $.fn.galleria = function(e) {
            var t = this.selector;
            return $(this).length ? this.each(function() {
                $.data(this, "galleria") && ($.data(this, "galleria").destroy(), $(this).find("*").hide()), $.data(this, "galleria", (new Galleria).init(this, e))
            }) : ($(function() {
                $(t).length ? $(t).galleria(e) : Galleria.utils.wait({
                    until: function() {
                        return $(t).length
                    },
                    success: function() {
                        $(t).galleria(e)
                    },
                    error: function() {
                        Galleria.raise('Init failed: Galleria could not find the element "' + t + '".')
                    },
                    timeout: 5e3
                })
            }), this)
        }
    }(jQuery), document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image", "1.1") ? $("html").addClass("svg") : $("html").addClass("no-svg");
var _rcq = _rcq || [];
$(function() {
    function e() {
        l.hide(), $("body").removeClass("blur")
    }

    function t() {
        $("#id_vb_event_type").on("DOMSubtreeModified.sselect propertychange.sselect", function() {
            $("#id_vb_event_type").off("DOMSubtreeModified.sselect propertychange.sselect"), setTimeout(function() {
                $("#id_vb_event_type").resetSS(), t()
            }, 1e3)
        })
    }

    function i() {
        if ($(".vb-widget-form .success").length > 0) {
            var e = window.location.pathname;
            e = e.replace(/\/$/, ""), window.location.href = e + "/thankyou"
        } else $(".vb-widget-form .error").length < 1 && setTimeout(function() {
            i()
        }, 500)
    }

    function a(e) {
        h.removeClass(w), w = e >= 980 ? "desktop" : "narrow", h.addClass(w)
    }

    function n() {
        windowHeight = $(window).innerHeight(), windowWidth = $(window).width(), $(window).width(), windowWidth <= 768 ? $("#photos, .photo").css("min-height", "340px") : ($("#photos").css("margin-top", $("#header").height()), $("#photos, .photo").css("min-height", windowHeight - $("#header").height()))
    }

    function r(e) {
        var t = new Date,
            i = 6e4,
            a = e - t;
        return !a > 0 ? 120 : Math.round(a / i)
    }

    function o(e) {
        for (var t = window.location.search.substring(1), i = t.split("&"), a = 0; a < i.length; a++) {
            var n = i[a].split("=");
            if (n[0] == e) return n[1]
        }
    }
    $("#smartrate").length && $.getJSON("/json/smartrate.json", {
        property: [0]
    }, function(e) {
        var t = e.rate;
        if (t && t.price && t.price.roomrate && !isNaN(parseInt(t.price.roomrate)) && 1 != t.price.tomorrow) {
            var i = t.price.booking_link.replace("&chebs=smart-rate", "");
            $("#smartrate .fs_price span").text(parseInt(t.price.roomrate)), $("#smartrate .fs_link").attr("href", i)
        } else $("#smartrate").addClass("hide")
    }), $("#booking form").on("submit", function(e) {
        var t = $.cookie("cartstack.com-email");
        return t && ($(this).find("#cseid").remove(), $('<input type="hidden" id="cseid" name="cs_e_id">').val(t).appendTo("#booking form")), !0
    }), $("#code-dropdown").change(function() {
        $("#booking legend").hide(), $("#booking-wrapper #booking #code").show();
        var e = $(this).val();
        console.log(e), 1 == e ? ($("#code").attr("placeholder", "Enter Your Group Code"), $("#code").attr("name", "group")) : 2 == e ? ($("#code").attr("placeholder", "Enter Your Promo Code"), $("#code").attr("name", "promo")) : 3 == e ? ($("#code").attr("placeholder", "Enter Your Travel Agent ID"), $("#code").attr("name", "iata")) : 4 == e && ($("#code").attr("placeholder", "Enter Your Corporate Code"), $("#code").attr("name", "promo"))
    }), $("input[placeholder], textarea[placeholder]");
    var l = $("#popup-offer"),
        d = $("form", l);
    d.on("submit", function() {
        d.validationEngine("validate") && (e(), $.cookie("__CUGmember__", "true", {
            expires: 7300
        }), $.cookie('members', 'true', {
            expires: 7300,
            path: '/'
        }))
    }), "true" === $.cookie("__CUGmember__") ? e() : l.length && (s.pagename = "The Gershwin Hotel New York / Home / Email Sign Up Lightbox -  Members Only Specials", s.channel = "Email Sign Up", s.events = "event29", s.eVar2 = "Email Sign Up Lightbox -  Members Only Specials", s_code = s.t()), t(), $(".vb-widget-form").submit(function() {
        $("html, body").scrollTop($(".vb-widget-form").offset().top), setTimeout(function() {
            i()
        }, 500)
    });
    var c = $(window),
        u = $("body"),
        h = $("html"),
        p = $("#photos"),
        g = $(".slideshow", p),
        f = $("figure", p),
        m = $("#header"),
        v = $("#main-menu > ul > li"),
        y = $("#main-menu").width(),
        b = !1,
        _ = $("#booking-wrapper"),
        x = navigator.userAgent ? navigator.userAgent.match(/(iphone|ipad|ipod|android|webos|blackberry|windows phone)/gi) : !1,
        w = "desktop",
        k = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
    v.each(function() {
        v = this;
        var e = $(this).position().left,
            t = $(this).width(),
            i = y - (t + e);
        $("ul", this).width() > i && ($("ul", this).css({
            left: "auto",
            right: 0
        }), $("ul li ul", this).css({
            right: "100%"
        }))
    }), a(k);
    var D;
    c.on("resize", function() {
        var e = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        a(e), clearTimeout(D), D = setTimeout(function() {
            $("#booking select").resetSS()
        }, 500)
    }), NProgress.configure({
        parent: "#header",
        showSpinner: !1,
        barSelector: ".bar",
        template: '<div class="bar"><div class="glow"></div></div>'
    }), NProgress.start(), setTimeout(function() {
        b || NProgress.set(.33)
    }, 500), $(window).load(function() {
        b = !0, NProgress.done()
    }), $("#map-canvas").length && initGoogleMap(siteSettings), $('a[rel="external"], form.form-external, a[href^="http"][href*="://"]:not([href*="' + window.location.host + '"]), a[href*=".pdf"]').attr("target", "_blank"), $("#ping").length && $("#ping").after($("<input>").attr({
        name: "pong",
        value: $("#ping").val(),
        "class": "hide"
    })), f.length > 1 && setTimeout(function() {
        g.bxSlider({
            auto: !0,
            pause: 5e3,
            speed: 500,
            autoHover: !0,
            infiniteLoop: !0,
            minSlides: 1,
            maxSlides: 1,
            moveSlides: 1,
            pager: !1
        })
    }, 1e3), 
    $("#promos article").length > 4 && $("#promos .slideshow").bxSlider({
        auto: !0,
        pause: 5e3,
        speed: 500,
        slideWidth: 220,
        slideMargin:10,
        autoReload: true,
        adaptiveHeight: true,
        breaks: [{
            screen: 0,
            slides: 1,
            pager: false
        }, {
            screen: 412,
            slides: 2
        }, {
            screen: 460,
            slides: 3
        }, {
            screen: 768,
            slides: 4
        }],
        autoHover: !0,
        useCSS: !/MSIE (\d+\.\d+);/.test(navigator.userAgent),
        pager: !1,
        minSlides: 1,
        maxSlides: 4,
        moveSlides: 1,
        controls: !0,
        infiniteLoop: !0
    }), $("#promos article").length < 4 && $("#promos").addClass("no-after"), $("#testimonials article").length > 1 && $("#testimonials .slideshow").bxSlider({
        pager: !1,
        auto: !0,
        autoHover: !1,
        useCSS: !/MSIE (\d+\.\d+);/.test(navigator.userAgent),
        controls: !0,
        infiniteLoop: !0
    });
    var C = $("#content"),
        T = $(".expand-button"),
        S = $('<div class="collapse-button"/>');
    $("#content p:empty").remove(), C.length && C.children().length > 1 && ($(T).text("Read More").nextAll().wrapAll('<div class="expand-content collapsed"/>'), T.click(function() {
        $(this).fadeOut("1000", function() {
            $("#content .expand-content").slideDown("1000", function() {
                $(this).removeClass("collapsed").append(S), $(S).fadeIn(1e3)
            })
        })
    }), $(S).text("Read Less"), S.click(function() {
        $(this).fadeOut("1000", function() {
            $("#content .expand-content").slideUp("1000", function() {
                $(this).addClass("collapsed"), $(T).fadeIn(1e3)
            })
        })
    })), n(), $(window).resize(function() {
        windowHeight = $(window).innerHeight(), windowHeight <= 780 ? $("#photos, .photo").css("min-height", "640px") : n()
    });
    var F = $("#pressroom"),
        M = $("article", F),
        E = $(".category-selector", F),
        I = $("button", E);
    $("button", E).first().addClass("active"), I.click(function() {
        var e = $(this).data("category");
        I.removeClass("active"), $(this).addClass("active"), M.show(), 0 != e && M.not("[data-category*=" + e + "]").hide()
    }), Galleria.addTheme({
        name: "hebs",
        defaults: {
            autoplay: !1,
            debug: !1,
            fullscreenDoubleTap: !1,
            imageCrop: !1,
            imagePan: !1,
            initialTransition: "fade",
            layerFollow: !1,
            maxScaleRatio: 1,
            preload: 3,
            queue: !1,
            showCounter: !1,
            thumbCrop: !0,
            thumbQuality: "auto",
            transition: "fade",
            transitionSpeed: 300,
            trueFullscreen: !1
        },
        init: function(e) {
            var t = this;
            t.bind("loadstart", function() {
                t.$("loader").fadeIn(200)
            }), t.bind("loadfinish", function() {
                t.$("loader").fadeOut(200)
            })
        }
    }), $(".view-gallery", M).click(function() {
        var e = {};
        return $.each(pressroomJSON, function(t, i) {
            e[t] = {
                images: []
            }, $.each(i, function(i, a) {
                e[t].images.push({
                    image: a.src_full,
                    link: a.url,
                    description: a.caption
                })
            })
        }), initGallery({
            data: e,
            id: $(this).data("gallery-id")
        }), !1
    }), $(".gallery").mouseenter(function() {
        $(this).find(".description").length && $(this).css("z-index", "10"), $(".description", this).stop().animate({
            bottom: -$(".description", this).outerHeight()
        }, 400), $(".container .galleryimage .button", this).stop().animate({
            bottom: "0"
        }, 400)
    }).mouseleave(function() {
        $(".description", this).stop().animate({
            bottom: "0"
        }, 200, function() {
            $(this).parent().css("z-index", "1")
        }), $(".container .galleryimage .button", this).stop().animate({
            bottom: -$(".button", this).outerHeight()
        }, 200)
    }), inputPlaceholder($("#sc-email")), inputPlaceholder($("#promo-code")), inputPlaceholder($("#booking-checkin")), inputPlaceholder($("#booking-checkout")), $(".form select, .form input, .form textarea").bind("focus", function() {
        $(".form p").removeClass("highlight"), $(this).parents("p").addClass("highlight")
    }).bind("blur", function() {
        $(".form p").removeClass("highlight")
    }), $.validationEngine && $("#content .form, #footer form").validationEngine(), $("#booking .submit button.button").click(function() {
        $.validationEngine && $("#booking form").validationEngine({
            focusFirstField: !1,
            scroll: !1
        })
    }), $("#booking select, #content .form select, #calendar-filter select").sSelect(), $("#content table tr:nth-child(even)").removeClass("odd").addClass("even"), $("#content table tr:nth-child(odd)").addClass("odd").removeClass("even"), $(".scroll-to-explore", p).click(function(e) {
        e.preventDefault(), "desktop" == w ? $("html, body").stop().animate({
            scrollTop: p.height() - 59
        }, 400) : $("html, body").stop().animate({
            scrollTop: p.height() + m.height()
        }, 400)
    }), $(document).click(function(e) {
        $(e.target).is("#checkin, #checkout, .dp-choose-date") || $("#checkin-inline, #checkout-inline").hide()
    }), $(".share-this-site").click(function(e) {
        var t = $("<div />", {
                id: "share-this-site-overlay"
            }),
            i = $("<div />", {
                "class": "wrapper"
            }),
            a = $("<button />", {
                "class": "close-button"
            });
        $("body").append(t.append(i)), i.append($("<div />").load(templateURL + "share.html", function() {
            h.addClass("selection-disabled"), t.fadeIn(200)
        })), a.appendTo(i).on("click.share-this-site", function() {
            a.off("click.share-this-site"), t.fadeOut(200, function() {
                $(this).remove(), h.removeClass("selection-disabled")
            })
        }), e.preventDefault()
    }), $.datepicker.setDefaults({
        dateFormat: "mm/dd/yy",
        showOtherMonths: !0,
        minDate: 0,
        showAnim: ""
    }), $(".date-picker, .date-pick").datepicker({
        showOn: "both"
    }), $("#id_vb_date").datepicker({
        showOn: "both"
    });
    var A = function(e, t, i) {
        if (prefill = !1, i = i || 1, prefill) {
            var a = new Date,
                n = new Date;
            n.setDate(n.getDate() + i), e.datepicker("setDate", a), t.datepicker("setDate", n)
        }
        e.datepicker("option", "onSelect", function(e) {
            var a = new Date(Date.parse(e));
            a.setDate(a.getDate() + i), t.datepicker("option", "minDate", a), t.datepicker("setDate", a), $("#booking .dates .placeholder").remove()
        })
    };
    A($("#booking-checkin"), $("#booking-checkout"), !0), $(".galleries").length && ($.each(galleryJSON, function() {
        for (var e = this.images.length, t = 0; e > t; t++) this.images[t].image = this.images[t].full, this.images[t].description = this.images[t].caption
    }), $("#content .gallery a").click(function() {
        return initGallery({
            data: galleryJSON,
            id: $(this).data("gallery-id"),
            categories: !0
        }), !1
    }));
    var P = $("#reminder form");
    P.validationEngine({
        scroll: !1
    });
    var N = new Date;
    if ($("#reminder .cal").datepicker({
            onSelect: function(e) {
                P.find("input[type=hidden]").val($.datepicker.parseDate("mm/dd/yy", e))
            }
        }), $("#reminder input[type=submit]").on("click", function(e) {
            e.preventDefault();
            var t = P.find("input[type=hidden]").val(),
                i = new Date(t),
                a = o("test");
            if ("true" === a) var n = 1;
            else var n = r(i);
            P.validationEngine("validate") && _rcq.push(["_addReminder", "538f7619b6b156896d47f165", $("input[name=email]").val(), {
                ttl: n
            }, function(e) {
                if (e) {
                    P.find("input").fadeOut();
                    var a = i.getMonthName() + " " + i.getDate() + ", " + i.getFullYear() + "!";
                    P.find(".note").html(t ? "Thank You! You will be reminded on " + a : "Thank You! You will be reminded later today!"), setTimeout(function() {
                        P.fadeOut("normal", function() {
                            $(this).addClass("reminder-hide").find("input").show(), $("#reminder > span").text("Remind me to book later").removeClass("hidden"), $(this).find(".note").html("We will send you an email reminder on this date."), $(this).find("input[name=email]").val("")
                        })
                    }, 3e3)
                }
            }])
        }), $("#reminder > span").on("click", function() {
            $(this).toggleClass("hidden").text("Cancel" == $(this).text() ? "Remind me to book later" : "Cancel"),
                P.slideToggle("fast")
        }), $("#rooms-list").length) {
        var O = $("#rooms-list"),
            j = $(".category-selector", O),
            L = $("button", j),
            O = $(".rooms-entry", O);
        L.click(function() {
            var e = $(this),
                t = e.data("category");
            L.removeClass("active"), e.addClass("active"), O.each(function() {
                var e = $(this);
                e.data("category") != t && 0 != t ? e.addClass("hide") : e.removeClass("hide")
            })
        })
    }
    iOS() && ($("html").addClass("ipad"), $("#main-menu > ul > li > a").click(function(e) {
        return $(this).parent().find("ul").length ? (e.preventDefault(), $(this).parent().addClass("hover"), !1) : void 0
    }), $("#main-menu > ul > li > a").each(function() {
        var e = $("<li/>").append($(this).clone().html("Overview"));
        e.prependTo($(this).next("ul"))
    }), $(".hasDatepicker").css("pointer-events", "none"), $(".hasDatepicker").each(function() {
        var e = $(this);
        e.hide().after($("<input>", {
            type: "date",
            rel: e.attr("id"),
            value: e.val(),
            size: 14
        }))
    }), $(".form, #booking form").submit(function() {
        return $('input[type="date"]').each(function() {
            var e = $(this).val().split("-");
            $("input#" + $(this).attr("rel")).val(e[1] + "/" + e[2] + "/" + e[0])
        }), !0
    }))
}), jQuery.support.placeholder = function() {
    var e = document.createElement("input");
    return "placeholder" in e
}();